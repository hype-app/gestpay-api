<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <script src="http://localhost:35729/livereload.js"></script>
  </head>

  <body class="index" data-languages="[&quot;xml&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="xml">xml</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>
<pre class="highlight xml"><code>   _____           _                     
  / ____|         | |                    
 | |  __  ___  ___| |_ _ __   __ _ _   _ 
 | | |_ |/ _ \/ __| __| '_ \ / _` | | | |
 | |__| |  __/\__ \ |_| |_) | (_| | |_| |
  \_____|\___||___/\__| .__/ \__,_|\__, |
                      | |           __/ |
                      |_|          |___/ 
</code></pre>

<p>Gestpay API documentation aims to be a comprehensive and living catalog of Gestpay services.</p>

<p>Our API is SOAP-based, so you must encode your requests in XML to communicate with Gestpay.</p>

<p>For every service, we will present both the test and the production endpoints.   </p>

<p>Our services are: </p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><a href="/?xml#wscryptdecrypt"><code class="prettyprint">WSCryptDecrypt</code></a></td>
<td>used to start (and end) the payment process.</td>
</tr>
<tr>
<td><a href="/?xml#js_gestpay"><code class="prettyprint">js_GestPay.js</code></a></td>
<td>Mainly used to build a customized payment page.</td>
</tr>
<tr>
<td><a href="/?xml#wss2s"><code class="prettyprint">WSs2s</code></a></td>
<td>To control every aspect of your transactions and your shop.</td>
</tr>
</tbody></table>

          <h1 id="wscryptdecrypt">WSCryptDecrypt</h1>

<p>WSCryptDecrypt web service is available on production and test servers and does not require any installation on the merchant’s server.</p>

<p>The merchant must implement – in the page(s) of the virtual store configured to handle payments – a call to the webservice which handles requests to use the GestPay encryption service.</p>

<p>To request the encryption service it is necessary to call the Encrypt method.</p>

<p>If the encryption operation is concluded correctly (TransactionResult tag value with OK), the encrypted data string returned by GestPay will be available by reading the value of the CryptDecryptString tag.</p>

<p>If this is not the case, the values of the ErrorCode and ErrorDescription tag will make it possible to identify the reasons that prevented the encryption operation. To request the decryption service it is necessary to call the Decrypt method, passing the shopLogin and CryptedString tags with the values communicated by GestPay in Phase III.</p>

<p>The information containing the transaction result will be available by reading the information in the XML response file corresponding to the result of the transaction.</p>

<h2 id="encrypt"> Encrypt</h2>

<blockquote>
<p>Example <code class="prettyprint">Encrypt</code> call with mandatory fields: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985.21<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p><code class="prettyprint">Encrypt</code> is the main entrypoint for Gestpay. You must call <code class="prettyprint">Encrypt</code> either if you want to use the standard payment page, or the custom iframe solution. </p>

<p>These are the mandatory fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td style="text-align: center">30</td>
<td>shopLogin (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td style="text-align: center">3</td>
<td>Code identifying currency in which transaction amount is denominated - see Currency Codes table TODO - (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td style="text-align: center">9</td>
<td>Transaction amount. Do not insert thousands separator. Decimals, max. 2 numbers, are optional and separator is the point (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionID</code></strong></td>
<td style="text-align: center">50</td>
<td>Identifier attributed to merchant’s transaction (Mandatory)</td>
</tr>
</tbody></table>

<blockquote>
<p>Here is an example where we use <code class="prettyprint">customInfo</code> and other non-mandatory fields. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>1245.6<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;buyerName&gt;</span>Mario Bianchi<span class="nt">&lt;/buyerName&gt;</span>
  <span class="nt">&lt;buyerEmail&gt;</span>mario.bianchi@isp.it<span class="nt">&lt;/buyerEmail&gt;</span>
  <span class="nt">&lt;customInfo&gt;</span>BV_CODCLIENTE=12*P1*BV_SESSIONID=398<span class="nt">&lt;/customInfo&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>These are non-mandatory fields, but are direct children of the <code class="prettyprint">Encrypt</code> root.  </p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td style="text-align: center">2</td>
<td>Code identifying language used in communication with buyer</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code><sup><a href="#fn1" id="ref1">1</a></sup></td>
<td style="text-align: center">1000</td>
<td>String containing specific information as configured in the merchant’s profile</td>
</tr>
</tbody></table>

<blockquote>
<p><code class="prettyprint">RequestToken</code> example we are requesting a token to store the payment data. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;requestToken&gt;</span>MASKEDPAN<span class="nt">&lt;/requestToken&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<h3 id="requesttoken">RequestToken</h3>

<p>You can request a token that will represent the credit card for your website. You can use it later to handle recurring payments, or to avoid your customer to insert again his credit card data. This behaviour is compliant with PCI. Read more <a href="https://hype-app.github.io/gestpay-doc/rec/handling-subscriptions.html">here</a>.</p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">requestToken</code> <sup><a href="#fn2" id="ref2">2</a></sup></td>
<td style="text-align: center">25</td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token any other value for Custom Token. Using <code class="prettyprint">:FORCED:</code> before the token, it&rsquo; s possible to have the token even if the transaction is not authorized.</td>
</tr>
</tbody></table>

<h3 id="ppsellerprotection-shippingdetails">ppSellerProtection, ShippingDetails</h3>

<blockquote>
<p>Paypal Seller Protection example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
<span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
<span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
<span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
<span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
<span class="nt">&lt;ppSellerProtection&gt;</span>1<span class="nt">&lt;/ppSellerProtection&gt;</span>
  <span class="nt">&lt;shippingDetails&gt;</span>
    <span class="nt">&lt;shipToName&gt;</span>Marco Bianchi<span class="nt">&lt;/shipToName&gt;</span>
    <span class="nt">&lt;shipToStreet&gt;</span>Via Milano 1<span class="nt">&lt;/shipToStreet&gt;</span>
    <span class="nt">&lt;shipToCity&gt;</span>Torino<span class="nt">&lt;/shipToCity&gt;</span>
    <span class="nt">&lt;shipToState&gt;</span>Torino<span class="nt">&lt;/shipToState&gt;</span>
    <span class="nt">&lt;shipToCountryCode&gt;</span>IT<span class="nt">&lt;/shipToCountryCode&gt;</span>
    <span class="nt">&lt;shipToZip&gt;</span>10100<span class="nt">&lt;/shipToZip&gt;</span>
    <span class="nt">&lt;shipToStreet2/&gt;</span>
  <span class="nt">&lt;/shippingDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>For more informations, checkout the <a href="https://hype-app.github.io/gestpay-doc/gs/how-gestpay-works.html">Seller Protection: Fields &amp; Parameters</a> page.</p>

<p>If you want to activate the <strong>Paypal Seller Protection</strong> you must:</p>

<ul>
<li>set <code class="prettyprint">ppSellerProtection</code> to 1</li>
</ul>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ppSellerProtection</code> <sup><a href="#fn3" id="ref3">3</a></sup></td>
<td style="text-align: center">1</td>
<td>Parameter to set the use of a confirmed addresses</td>
</tr>
</tbody></table>

<ul>
<li>send all the shipment data in the <code class="prettyprint">shipmentDetails</code> tag: </li>
</ul>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shipToName</code></td>
<td style="text-align: center">32</td>
<td>String containing the shipping name</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet</code></td>
<td style="text-align: center">100</td>
<td>String containing the shipping address</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCity</code></td>
<td style="text-align: center">40</td>
<td>String containing the shipping city</td>
</tr>
<tr>
<td><code class="prettyprint">shipToState</code></td>
<td style="text-align: center">40</td>
<td>String containing the shipping state (see <a href="#">State Codes table - TODO</a>)</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCountryCode</code></td>
<td style="text-align: center">2</td>
<td>String containing the shipping country code (see <a href="#">Country Codes table - TODO</a>)</td>
</tr>
<tr>
<td><code class="prettyprint">shipToZip</code></td>
<td style="text-align: center">20</td>
<td>String containing the shipping zip</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet2</code></td>
<td style="text-align: center">100</td>
<td>String containing an additional shipping address field</td>
</tr>
</tbody></table>

<p><sup id="fn1">1. Each field can be up to a maximum of 300 characters in length.<a href="#ref1" title="Jump back to footnote 1 in the text.">↩</a></sup></p>

<p><sup id="fn2">2. Required only when a Token is needed within the transaction response. <br> In order to be able to request, obtain and use a Token, merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office.<a href="#ref2" title="Jump back to footnote 2 in the text.">↩</a></sup></p>

<p><sup id="fn3">3. <strong>PayPal Seller Protection parameter</strong>. In order to be able to activate the Seller Protection Option the merchants need to appropriately set &ldquo;Fields and Parameters&rdquo; in the dedicated section of GestPay Merchant Back Office.<a href="#ref3" title="Jump back to footnote 3 in the text.">↩</a></sup></p>

<p><sup id="fn4">4. <strong>Payment Systems Visibility</strong>. In order to be able to activate the Payment Systems Visibility the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The Payment System Visibility can be configured in the specific interface in the Back Office Merchant.<a href="#ref4" title="Jump back to footnote 4 in the text.">↩</a></sup></p>

<p><sup id="fn5">5. <strong>paymentTypeDetail</strong>. In order to be able to activate the payment Type Detail the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The correct merchant configuration of Sofort and Ideal has to be configured in the specific interface of Back Office Merchant.(1) Each field can be up to a maximum of 300 characters in length<a href="#ref5" title="Jump back to footnote 5 in the text.">↩</a></sup></p>

<p><sup id="fn6">6. <strong>Line Items</strong>: in case the buyer selects PayPal as payment method in the payment page, fields Name, Description, Quantity and UnitPrice of every occurrency of the ProductDetail tag will be used to show the transaction items details in PayPal payment page.<a href="#ref6" title="Jump back to footnote 6 in the text.">↩</a></sup></p>

<h2 id="decrypt">Decrypt</h2>

          <h1 id="js_gestpay-js">js_GestPay.js</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>WSCryptDecrypt web service is available on production and test servers and does not require any installation on the merchant’s server.</p>

<p>The merchant must implement – in the page(s) of the virtual store configured to handle payments – a call to the webservice which handles requests to use the GestPay encryption service.</p>

<p>To request the encryption service it is necessary to call the Encrypt method.</p>

<p>If the encryption operation is concluded correctly (TransactionResult tag value with OK), the encrypted data string returned by GestPay will be available by reading the value of the CryptDecryptString tag.</p>

<p>If this is not the case, the values of the ErrorCode and ErrorDescription tag will make it possible to identify the reasons that prevented the encryption operation. To request the decryption service it is necessary to call the Decrypt method, passing the shopLogin and CryptedString tags with the values communicated by GestPay in Phase III.</p>

<p>The information containing the transaction result will be available by reading the information in the XML response file corresponding to the result of the transaction.</p>

<h2 id="encrypt"> Encrypt</h2>

<p>Some of the information to communicate to GestPay is required in order to complete the payment process, while other information can be omitted without compromising the processing of the transaction. Through the GestPay Back Office environment, merchants can define what information is required and what information is optional.</p>

<p>Some information that is essential to the payment process is configured as compulsory by GestPay. This attributes cannot be modified.</p>

<p>The following table gives the information that must be communicated to GestPay xml using Encrypt method in order to make a transaction, the tags&rsquo; names are case sensitive.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td style="text-align: center">30</td>
<td>shopLogin (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td style="text-align: center">3</td>
<td>Code identifying currency in which transaction amount is denominated - see Currency Codes table TODO - (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td style="text-align: center">9</td>
<td>Transaction amount. Do not insert thousands separator. Decimals, max. 2 numbers, are optional and separator is the point (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionID</code></strong></td>
<td style="text-align: center">50</td>
<td>Identifier attributed to merchant’s transaction (Mandatory)</td>
</tr>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td style="text-align: center">2</td>
<td>Code identifying language used in communication with buyer</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code><sup><a href="#fn1" id="ref1">1</a></sup></td>
<td style="text-align: center">1000</td>
<td>String containing specific information as configured in the merchant’s profile</td>
</tr>
<tr>
<td><code class="prettyprint">requestToken</code> <sup><a href="#fn2" id="ref2">2</a></sup></td>
<td style="text-align: center">25</td>
<td>“MASKEDPAN” for a Standard Token any other value for Custom Token. Using :FORCED: before the token, it&rsquo; s possible to have the token even if the transaction is not authorized.</td>
</tr>
<tr>
<td><code class="prettyprint">ppSellerProtection</code> <sup><a href="#fn3" id="ref3">2</a></sup></td>
<td style="text-align: center">1</td>
<td>Parameter to set the use of a confirmed addresses</td>
</tr>
<tr>
<td><code class="prettyprint">shippingDetails</code>:</td>
<td style="text-align: center"></td>
<td></td>
</tr>
<tr>
<td>alhoa</td>
<td style="text-align: center"></td>
<td></td>
</tr>
</tbody></table>

<p><sup id="fn1">1. Each field can be up to a maximum of 300 characters in length.<a href="#ref1" title="Jump back to footnote 1 in the text.">↩</a></sup></p>

<p><sup id="fn2">2. Required only when a Token is needed within the transaction response. <br> In order to be able to request, obtain and use a Token, merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office.<a href="#ref2" title="Jump back to footnote 2 in the text.">↩</a></sup></p>

<p><sup id="fn3">3. <strong>PayPal Seller Protection parameter</strong>. In order to be able to activate the Seller Protection Option the merchants need to appropriately set &ldquo;Fields and Parameters&rdquo; in the dedicated section of GestPay Merchant Back Office.<a href="#ref3" title="Jump back to footnote 3 in the text.">↩</a></sup></p>

<p><sup id="fn4">4. <strong>Payment Systems Visibility</strong>. In order to be able to activate the Payment Systems Visibility the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The Payment System Visibility can be configured in the specific interface in the Back Office Merchant.<a href="#ref4" title="Jump back to footnote 4 in the text.">↩</a></sup></p>

<p><sup id="fn5">5. <strong>paymentTypeDetail</strong>. In order to be able to activate the payment Type Detail the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The correct merchant configuration of Sofort and Ideal has to be configured in the specific interface of Back Office Merchant.(1) Each field can be up to a maximum of 300 characters in length<a href="#ref5" title="Jump back to footnote 5 in the text.">↩</a></sup></p>

<p><sup id="fn6">6. <strong>Line Items</strong>: in case the buyer selects PayPal as payment method in the payment page, fields Name, Description, Quantity and UnitPrice of every occurrency of the ProductDetail tag will be used to show the transaction items details in PayPal payment page.<a href="#ref6" title="Jump back to footnote 6 in the text.">↩</a></sup></p>

<h2 id="decrypt">Decrypt</h2>

          <h1 id="wss2s">WsS2S</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>WSCryptDecrypt web service is available on production and test servers and does not require any installation on the merchant’s server.</p>

<p>The merchant must implement – in the page(s) of the virtual store configured to handle payments – a call to the webservice which handles requests to use the GestPay encryption service.</p>

<p>To request the encryption service it is necessary to call the Encrypt method.</p>

<p>If the encryption operation is concluded correctly (TransactionResult tag value with OK), the encrypted data string returned by GestPay will be available by reading the value of the CryptDecryptString tag.</p>

<p>If this is not the case, the values of the ErrorCode and ErrorDescription tag will make it possible to identify the reasons that prevented the encryption operation. To request the decryption service it is necessary to call the Decrypt method, passing the shopLogin and CryptedString tags with the values communicated by GestPay in Phase III.</p>

<p>The information containing the transaction result will be available by reading the information in the XML response file corresponding to the result of the transaction.</p>

<h2 id="encrypt"> Encrypt</h2>

<p>Some of the information to communicate to GestPay is required in order to complete the payment process, while other information can be omitted without compromising the processing of the transaction. Through the GestPay Back Office environment, merchants can define what information is required and what information is optional.</p>

<p>Some information that is essential to the payment process is configured as compulsory by GestPay. This attributes cannot be modified.</p>

<p>The following table gives the information that must be communicated to GestPay xml using Encrypt method in order to make a transaction, the tags&rsquo; names are case sensitive.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td style="text-align: center">30</td>
<td>shopLogin (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td style="text-align: center">3</td>
<td>Code identifying currency in which transaction amount is denominated - see Currency Codes table TODO - (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td style="text-align: center">9</td>
<td>Transaction amount. Do not insert thousands separator. Decimals, max. 2 numbers, are optional and separator is the point (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionID</code></strong></td>
<td style="text-align: center">50</td>
<td>Identifier attributed to merchant’s transaction (Mandatory)</td>
</tr>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td style="text-align: center">2</td>
<td>Code identifying language used in communication with buyer</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code><sup><a href="#fn1" id="ref1">1</a></sup></td>
<td style="text-align: center">1000</td>
<td>String containing specific information as configured in the merchant’s profile</td>
</tr>
<tr>
<td><code class="prettyprint">requestToken</code> <sup><a href="#fn2" id="ref2">2</a></sup></td>
<td style="text-align: center">25</td>
<td>“MASKEDPAN” for a Standard Token any other value for Custom Token. Using :FORCED: before the token, it&rsquo; s possible to have the token even if the transaction is not authorized.</td>
</tr>
<tr>
<td><code class="prettyprint">ppSellerProtection</code> <sup><a href="#fn3" id="ref3">2</a></sup></td>
<td style="text-align: center">1</td>
<td>Parameter to set the use of a confirmed addresses</td>
</tr>
<tr>
<td><code class="prettyprint">shippingDetails</code>:</td>
<td style="text-align: center"></td>
<td></td>
</tr>
<tr>
<td>alhoa</td>
<td style="text-align: center"></td>
<td></td>
</tr>
</tbody></table>

<p><sup id="fn1">1. Each field can be up to a maximum of 300 characters in length.<a href="#ref1" title="Jump back to footnote 1 in the text.">↩</a></sup></p>

<p><sup id="fn2">2. Required only when a Token is needed within the transaction response. <br> In order to be able to request, obtain and use a Token, merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office.<a href="#ref2" title="Jump back to footnote 2 in the text.">↩</a></sup></p>

<p><sup id="fn3">3. <strong>PayPal Seller Protection parameter</strong>. In order to be able to activate the Seller Protection Option the merchants need to appropriately set &ldquo;Fields and Parameters&rdquo; in the dedicated section of GestPay Merchant Back Office.<a href="#ref3" title="Jump back to footnote 3 in the text.">↩</a></sup></p>

<p><sup id="fn4">4. <strong>Payment Systems Visibility</strong>. In order to be able to activate the Payment Systems Visibility the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The Payment System Visibility can be configured in the specific interface in the Back Office Merchant.<a href="#ref4" title="Jump back to footnote 4 in the text.">↩</a></sup></p>

<p><sup id="fn5">5. <strong>paymentTypeDetail</strong>. In order to be able to activate the payment Type Detail the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The correct merchant configuration of Sofort and Ideal has to be configured in the specific interface of Back Office Merchant.(1) Each field can be up to a maximum of 300 characters in length<a href="#ref5" title="Jump back to footnote 5 in the text.">↩</a></sup></p>

<p><sup id="fn6">6. <strong>Line Items</strong>: in case the buyer selects PayPal as payment method in the payment page, fields Name, Description, Quantity and UnitPrice of every occurrency of the ProductDetail tag will be used to show the transaction items details in PayPal payment page.<a href="#ref6" title="Jump back to footnote 6 in the text.">↩</a></sup></p>

<h2 id="decrypt">Decrypt</h2>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="xml">xml</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
