<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>
 <link rel="icon" href="images/favicon.png">
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>
<pre class="highlight xml"><code>   _____           _                     
  / ____|         | |                    
 | |  __  ___  ___| |_ _ __   __ _ _   _ 
 | | |_ |/ _ \/ __| __| '_ \ / _` | | | |
 | |__| |  __/\__ \ |_| |_) | (_| | |_| |
  \_____|\___||___/\__| .__/ \__,_|\__, |
                      | |           __/ |
                      |_|          |___/ 
</code></pre>
<p>Gestpay API documentation aims to be a comprehensive and living catalog of Gestpay services.</p>

<p>Our API is SOAP-based, so you must encode your requests in XML to communicate with Gestpay.</p>

<p>For every service, we will present both the test and the production endpoints.   </p>

<p>Our services are: </p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><a href="#wscryptdecrypt-api"><code class="prettyprint">WSCryptDecrypt</code></a></td>
<td>used to start (and end) the payment process.</td>
</tr>
<tr>
<td><a href="#js_gestpay-js-api"><code class="prettyprint">js_GestPay.js</code></a></td>
<td>Mainly used to build a customized payment page.</td>
</tr>
<tr>
<td><a href="#wss2s-api"><code class="prettyprint">WSs2s</code></a></td>
<td>Allows to control via a programmable interface many aspects of your transactions.</td>
</tr>
</tbody></table>

          <h1 id="wscryptdecrypt-api">WSCryptDecrypt API</h1>

<p>GestPay <code class="prettyprint">WsCryptDecrypt</code> web service is exposed by GestPay at following URLs: </p>

<table><thead>
<tr>
<th>environment</th>
<th>URL</th>
</tr>
</thead><tbody>
<tr>
<td>test</td>
<td><code class="prettyprint">https://sandbox.gestpay.net/gestpay/GestPayWS/WsCryptDecrypt.asmx?wsdl</code></td>
</tr>
<tr>
<td>production</td>
<td><code class="prettyprint">https://ecommS2S.sella.it/gestpay/GestPayWS/WsCryptDecrypt.asmx?wsdl</code></td>
</tr>
</tbody></table>

<p>WSCryptDecrypt web service is available on production and test servers and does not require any installation on the merchant’s server.</p>

<p>The merchant must implement – in the page(s) of the virtual store configured to handle payments – a call to the webservice which handles requests to use the GestPay encryption service.</p>

<p>To request the encryption service it is necessary to call the Encrypt method.</p>

<p>If the encryption operation is concluded correctly (<code class="prettyprint">TransactionResult</code> tag value with OK), the encrypted data string returned by GestPay will be available by reading the value of the <code class="prettyprint">CryptDecryptString</code> tag.</p>

<p>If not, the values of the <code class="prettyprint">ErrorCode</code> and <code class="prettyprint">ErrorDescription</code> tag will make it possible to identify the reasons that prevented the encryption operation. To request the decryption service it is necessary to call the <code class="prettyprint">Decrypt</code> method, passing the <code class="prettyprint">shopLogin</code> and <code class="prettyprint">CryptedString</code> tags with the values communicated by GestPay.</p>

<p>The information containing the transaction result will be available by reading the information in the XML response file corresponding to the result of the transaction.</p>

          <h2 id="encrypt">Encrypt</h2>

<blockquote>
<p>A valid <code class="prettyprint">Encrypt</code> can be called with just these fields - very easy: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985.21<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<blockquote>
<p>Characters and strings that must not be used within the parameters encoded by GestPay and in customised information are: </p>
</blockquote>
<pre class="highlight plaintext"><code>&amp;  (space)  §     (     )     * 
&lt;     &gt;     ,     ;     :    *P1* 
/     [     ]     ?     =     -- 
/*    %     //    ~
</code></pre>
<p><code class="prettyprint">Encrypt</code> is the main entrypoint for Gestpay. You must call <code class="prettyprint">Encrypt</code> either if you want to use the standard payment page, or the custom iframe solution. </p>

<p>These are the <strong>mandatory</strong> fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td style="text-align: center">30</td>
<td>shopLogin (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td style="text-align: center">3</td>
<td>Code identifying currency in which transaction amount is denominated - see <a href="#currency-codes">Currency Codes table</a> - (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td style="text-align: center">9</td>
<td>Transaction amount. Do not insert thousands separator. Decimals, max. 2 numbers, are optional and separator is the point (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td style="text-align: center">50</td>
<td>Identifier attributed to merchant’s transaction (Mandatory)</td>
</tr>
</tbody></table>

<blockquote>
<p>Here is an example where we use <code class="prettyprint">customInfo</code> and other non-mandatory fields. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>1245.6<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;buyerName&gt;</span>Mario Bianchi<span class="nt">&lt;/buyerName&gt;</span>
  <span class="nt">&lt;buyerEmail&gt;</span>mario.bianchi@isp.it<span class="nt">&lt;/buyerEmail&gt;</span>
  <span class="nt">&lt;customInfo&gt;</span>BV_CODCLIENTE=12*P1*BV_SESSIONID=398<span class="nt">&lt;/customInfo&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    ...
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>These are non-mandatory fields, but are direct children of the <code class="prettyprint">Encrypt</code> root.  </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td style="text-align: center">2</td>
<td>Code identifying language used in communication with buyer</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code><sup><a href="#fn1" id="ref1">1</a></sup></td>
<td style="text-align: center">1000</td>
<td>String containing specific information as configured in the merchant’s profile. See the next section for further explanations.</td>
</tr>
<tr>
<td><a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a></td>
<td style="text-align: center"></td>
<td>a container ojbect of other data. It is used by <a href="#gestpay-guaranteed-payment"> Gestpay Guaranteed Payment</a> and by alternative payments.</td>
</tr>
</tbody></table>

<p><sup id="fn1">1. Each field can be up to a maximum of 300 characters in length. See next section for further explanations.<a href="#ref1" title="Jump back to footnote 1 in the text.">↩</a></sup></p>

<p><a name="customInfo"></a></p>

<h3 id="sending-custom-data-to-gestpay-lt-custominfo-gt">Sending custom data to Gestpay: <code class="prettyprint">&lt;customInfo&gt;</code></h3>

<blockquote>
<p>The information included in <code class="prettyprint">customInfo</code> will follow this form:</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;customInfo&gt;</span>datum1=value1*P1*datum2=value2*P1* ... *P1*datumN=valueN<span class="nt">&lt;/customInfo&gt;</span>
</code></pre>
<blockquote>
<p>Formally, it is a string containing couples of <strong><code class="prettyprint">&quot;key&quot;=&quot;value&quot;</code></strong> separated by the special string <strong><code class="prettyprint">*P1*</code></strong>. <br></p>
</blockquote>

<p><code class="prettyprint">&lt;customInfo&gt;</code> is a special Gestpay field; it is used to send custom merchant-defined parameters that Gestpay will not touch. You can store everything, as long as the data respects the syntax described on the right.</p>

<p>The maximum length of the field is 1000 characters, and each individual parameter can be max 300 characters.</p>

<p>To start sending custom parameters, you must configure Gestpay to receive them. This can be done in the backoffice, in <strong>Payment Page -&gt; Fields &amp; Parameters -&gt; Add Parameter</strong>. Here you can configure some aspects of this parameter, for example if has to be returned by the <code class="prettyprint">Decrypt</code> webservice. Don&rsquo;t forget to populate the <em>languages</em> section. </p>

<p>With this customization, you can <em>send</em> all the parameters you want, as long they fit the 1000 characters length. To read more about custom parameters, refer to the <a href="http://docs.gestpay.it/gs/how-gestpay-works.html#sending-custom-parameters-to-gestpay">documentation</a>. </p>

<h3 id="requesttoken">RequestToken</h3>

<blockquote>
<p><code class="prettyprint">RequestToken</code> example we are requesting a token to store the payment data.</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;requestToken&gt;</span>MASKEDPAN<span class="nt">&lt;/requestToken&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>You can request a token that will represent the credit card for your website. You can use it later to handle recurring payments, or to avoid your customer to insert again his credit card data. This behaviour is compliant with PCI. Read more <a href="https://hype-app.github.io/gestpay-doc/rec/handling-subscriptions.html">here</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">requestToken</code> <sup><a href="#fn2" id="ref2">2</a></sup></td>
<td style="text-align: center">25</td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token any other value for Custom Token. Using <code class="prettyprint">:FORCED:</code> before the token, it&rsquo; s possible to have the token even if the transaction is not authorized.</td>
</tr>
</tbody></table>

<p><sup id="fn2">2. Required only when a Token is needed within the transaction response.<a href="#ref2" title="Jump back to footnote 2 in the text.">↩</a></sup></p>

<p><a name="paymentTypes"></a></p>

<h3 id="paymenttypes">PaymentTypes</h3>

<blockquote>
<p>If you want to enable only Credit Card or Masterpass for this payment, you can send the request like this: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>CREDITCARD<span class="nt">&lt;/paymentType&gt;</span> 
    <span class="nt">&lt;paymentType&gt;</span>MASTERPASS<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>
<blockquote>
<p>If you only specify one payment type, Gestpay won&rsquo;t show the payment page but will redirect directly to the third party payment page: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>MASTERPASS<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>
<p>GestPay provides a way for merchants to dinamically define which payment methods must be displayed for each transaction.</p>

<p>In order to do that, merchants must properly set the tag <code class="prettyprint">paymentType</code> that can be repeated as many times as needed, inside the tag <code class="prettyprint">paymentTypes</code> (with a final “s”).</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">paymentTypes</code></td>
<td style="text-align: center"></td>
<td>container of one or more <code class="prettyprint">paymentType</code></td>
</tr>
<tr>
<td><code class="prettyprint">paymentType</code></td>
<td style="text-align: center">25</td>
<td>Set of tags to set the visibility of payment systems on payment page (see <a href="#payment-type-codes">Payment Type Codes table</a>)</td>
</tr>
</tbody></table>

          <h2 id="encrypt-result">Encrypt result</h2>

<blockquote>
<p>A succesful <code class="prettyprint">Encrypt</code> call would be like this: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;EncryptResult&gt;</span>
  <span class="nt">&lt;GestPayCryptDecrypt&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>ENCRYPT<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;CryptDecryptString&gt;</span>897543..<span class="nt">&lt;/CryptDecryptString&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription/&gt;</span>
  <span class="nt">&lt;/GestPayCryptDecrypt&gt;</span>
<span class="nt">&lt;/EncryptResult&gt;</span>
</code></pre>
<p><code class="prettyprint">Encrypt</code> web service returns back the following information in xml: </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td style="text-align: center">7</td>
<td>Decode the transaction type request (<code class="prettyprint">DECRYPT</code>, <code class="prettyprint">ENCRYPT</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td style="text-align: center">2</td>
<td>Transaction result (<code class="prettyprint">OK</code>/ <code class="prettyprint">KO</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">CryptDecryptString</code></td>
<td style="text-align: center">&hellip;..</td>
<td>Encrypted string get by parameter set in the xml request</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code> </td>
<td style="text-align: center">9</td>
<td>Error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td style="text-align: center">255</td>
<td>Error description</td>
</tr>
</tbody></table>

          <h2 id="decrypt">Decrypt</h2>

<blockquote>
<p>A <code class="prettyprint">Decrypt</code> request: </p>
</blockquote>
<pre class="highlight xml"><code> <span class="nt">&lt;Decrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;CryptedString&gt;</span>HT987YU....<span class="nt">&lt;/CryptedString&gt;</span>
 <span class="nt">&lt;/Decrypt&gt;</span>
</code></pre>
<p>GestPay communicates the payment transaction result to the merchant through an encrypted string (parameter b of the call to the url preconfigured by the merchant) with a set of transaction&rsquo;s informations.</p>

<p>To Decrypt the data it is necessary to use Decrypt method passing the following parameters, the tags&rsquo; names are case sensitive:</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td style="text-align: center">30</td>
<td>Shop Login</td>
</tr>
<tr>
<td><code class="prettyprint">CryptedString</code></td>
<td style="text-align: center">&hellip;&hellip;</td>
<td>Encrypted string get by parameter b of the call to the url preconfigured by the merchant</td>
</tr>
</tbody></table>

          <h2 id="decrypt-result">Decrypt result</h2>

<blockquote>
<p>GestPay authenticates the calling server and checks the encrypted data string. If the checks are passed, it returns an unencrypted data string containing the transaction result: </p>
</blockquote>
<pre class="highlight xml"><code> <span class="nt">&lt;DecryptResult&gt;</span>
  <span class="nt">&lt;GestPayCryptDecrypt</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>DECRYPT<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;ShopTransactionID&gt;</span>34az85ord19<span class="nt">&lt;/ShopTransactionID&gt;</span>
    <span class="nt">&lt;BankTransactionID&gt;</span>656<span class="nt">&lt;/BankTransactionID&gt;</span>
    <span class="nt">&lt;AuthorizationCode&gt;</span>983RT4<span class="nt">&lt;/AuthorizationCode&gt;</span>
    <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
    <span class="nt">&lt;Amount&gt;</span>985.40<span class="nt">&lt;/Amount&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;RiskResponseCode&gt;</span>created<span class="nt">&lt;/RiskResponseCode&gt;</span>
    <span class="nt">&lt;RiskResponseDescription/&gt;</span>
  <span class="nt">&lt;/GestPayCryptDecrypt&gt;</span>
<span class="nt">&lt;/DecryptResult&gt;</span>
</code></pre>
<p>Decrypt webservice returns back the following information in the xml.</p>

<p>The minimum information returned back as transaction result is marked in bold. </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td style="text-align: center">7</td>
<td>Decode the transaction type request (<code class="prettyprint">DECRYPT</code>, <code class="prettyprint">ENCRYPT</code>)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">TransactionResult</code></strong></td>
<td style="text-align: center"><strong>2</strong></td>
<td><strong>Transaction result (<code class="prettyprint">OK</code>/<code class="prettyprint">KO</code>)</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">ShopTransactionID</code></strong></td>
<td style="text-align: center"><strong>50</strong></td>
<td><strong>Identifier attributed to merchant’s transaction</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">BankTransactionID</code></strong></td>
<td style="text-align: center"><strong>9</strong></td>
<td><strong>Identifier attributed to the transaction by GestPay</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">AuthorizationCode</code></strong></td>
<td style="text-align: center"><strong>6</strong></td>
<td><strong>Transaction authorisation code</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">Currency</code></strong></td>
<td style="text-align: center"><strong>3</strong></td>
<td><strong>Code identifying currency in which transaction amount is denominated (see <a href="#currency-codes">Currency Codes</a> table)</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">Amount</code></strong></td>
<td style="text-align: center"><strong>9</strong></td>
<td><strong>Transaction amount. Decimals (max. 2 numbers) are optional and separator is the point (see examples)</strong></td>
</tr>
<tr>
<td><code class="prettyprint">Country</code></td>
<td style="text-align: center">30</td>
<td>Nationality of the issuing card institute</td>
</tr>
<tr>
<td><code class="prettyprint">CustomInfo</code></td>
<td style="text-align: center">1000</td>
<td> String that has the specific information as configured in themerchant’s profile. Each field can be up to a maximum of 300 characters in length.</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">TDLevel</code></td>
<td style="text-align: center">255</td>
<td>Level of authentication for VBV Visa / Mastercard Securecode transactions. The string may have the value <code class="prettyprint">FULL</code> or <code class="prettyprint">HALF</code></td>
</tr>
<tr>
<td><strong><code class="prettyprint">ErrorCode</code></strong></td>
<td style="text-align: center"><strong>9</strong></td>
<td><strong>Error code</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">ErrorDescription</code></strong></td>
<td style="text-align: center"><strong>255</strong></td>
<td><strong>Error description (localized in your language)</strong></td>
</tr>
<tr>
<td><code class="prettyprint">AlertCode</code></td>
<td style="text-align: center">9</td>
<td>Alert code. See <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management</a> for an accurate description.</td>
</tr>
<tr>
<td><code class="prettyprint">AlertDescription</code></td>
<td style="text-align: center">255</td>
<td>Alert description in chosen language. See <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management</a> for an accurate description.</td>
</tr>
<tr>
<td><code class="prettyprint">CVVPresent</code></td>
<td style="text-align: center">1</td>
<td>Credit Card security code flag</td>
</tr>
<tr>
<td><code class="prettyprint">MaskedPAN</code></td>
<td style="text-align: center">25</td>
<td>Masked Pan string</td>
</tr>
<tr>
<td><code class="prettyprint">PaymentMethod</code></td>
<td style="text-align: center">100</td>
<td>Indicates the used Payment Method</td>
</tr>
<tr>
<td><code class="prettyprint">TOKEN</code> </td>
<td style="text-align: center">25</td>
<td>String containing the token value</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td style="text-align: center">100</td>
<td> String containing Card Type</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryMonth</code> </td>
<td style="text-align: center">2</td>
<td>String containing the token expiry month</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryYear</code></td>
<td style="text-align: center">2</td>
<td>String containing the token expiry year</td>
</tr>
<tr>
<td><code class="prettyprint">TransactionKey</code> </td>
<td style="text-align: center">18</td>
<td>Transaction identifier for 3D transactions. Not used in transactions managed with the Payment Page. It is useful only in Server-Server transactions</td>
</tr>
<tr>
<td><code class="prettyprint">VbV</code></td>
<td style="text-align: center">2</td>
<td>Verified By Visa Flag</td>
</tr>
<tr>
<td><code class="prettyprint">VbVRisp</code></td>
<td style="text-align: center"></td>
<td>Encrypted string containing information for 3D- Secure transactions. Not used in transactions managed with the Payment Page. It is useful only in Server-Server transactions</td>
</tr>
<tr>
<td><code class="prettyprint">VbVBuyer</code></td>
<td style="text-align: center">2</td>
<td>Information about the enrolment of the buyer&rsquo;s card to 3D-Secure protocol: <code class="prettyprint">OK</code> means that the card is enrolled, <code class="prettyprint">KO</code> means that the card is not enrolled</td>
</tr>
<tr>
<td><code class="prettyprint">VbVFlag</code></td>
<td style="text-align: center">2</td>
<td>Information about the 3D-Secure status. Not used in transactions managed with the Payment Page. It is useful only in Server-Server transactions.</td>
</tr>
<tr>
<td><code class="prettyprint">RiskResponseCode</code></td>
<td style="text-align: center">10</td>
<td>Risk Fraud Score of the transaction, given by <a href="http://docs.gestpay.it/sec/gestpay-guaranteed-payment.html">Gestpay Guaranteed Payment</a>. Possible values are: <ul><li><code class="prettyprint">created</code>: transaction has been received by the Gestpay Guaranteed Payment</li><li><code class="prettyprint">submitted</code>: transaction is under review</li><li><code class="prettyprint">approved</code>: transaction approved by  Gestpay Guaranteed Payment</li><li><code class="prettyprint">declined</code>: transaction not approved by  Gestpay Guaranteed Payment</li><li><code class="prettyprint">captured</code>: For <em>Select&amp;Submit</em> plan, <code class="prettyprint">captured</code> is returned for transactions that are not marked for review.</li><li><strong>any other value</strong> is an error returned by  Gestpay Guaranteed Payment.</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">RiskResponseDescription</code></td>
<td style="text-align: center">255</td>
<td>Risk Description of the RiskResponseCode</td>
</tr>
</tbody></table>

<p>Other information is defined as optional and will be returned according to the merchant’s profile settings made in the GestPay Back Office environment.</p>

<p>A transaction result can be interpreted by verifying the <code class="prettyprint">TransactionResult</code> field value. The possible values are:</p>

<table><thead>
<tr>
<th>Transaction Result</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">OK</code> </td>
<td>Positive transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">KO</code> </td>
<td>Negative transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">XX</code> </td>
<td>Suspended transaction result. This is not a final result: Gestpay will send <code class="prettyprint">XX</code> when the outcome is asynchronous. Right now these systems are <code class="prettyprint">MyBank</code>, <code class="prettyprint">Sofort</code>, <code class="prettyprint">IDeal</code>, <code class="prettyprint">Bank Transfer</code>. In the future, this code might be returned with other payment systems (bitcoins, for example). <br/> A new communication will be provided to the merchant when the transaction will assume the final <code class="prettyprint">OK</code>/<code class="prettyprint">KO</code> status. <br/> <strong>If you receive a <code class="prettyprint">XX</code> code, don&rsquo;t send your goods but wait to receive the actual payment.</strong> The customer with <code class="prettyprint">XX</code> transaction is redirect to URL for positive response.</td>
</tr>
</tbody></table>

          <h1 id="alternative-payments-examples">Alternative Payments Examples</h1>

<p><a href="#encrypt"><code class="prettyprint">Encrypt</code></a> can be used to  start a payment process in one of the several alternative payments that Gestpay supports. </p>

<p>You can see the complete list of Gestpay <a href="http://docs.gestpay.it/oth/what-does-it-mean-that-gestpay-is-a-payment-gateway.html">supported alternative payments</a> in the docs. </p>

<p>As a recap, you can use the <a href="#paymenttypes"><code class="prettyprint">&lt;paymentType&gt;</code></a> tag to specify which payment methods you want to enable. In the next paragraphs we will show some alternative payment examples. </p>

          <h2 id="wss2s-example-apple-pay">WsS2S Example: Apple Pay</h2>

<blockquote>
<p>Apple Pay example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callPagamS2S&gt;</span>
  <span class="c">&lt;!-- mandatory data --&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000002<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- code for euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>24.21<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-0001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="c">&lt;!-- insert here data from Apple Pay --&gt;</span>
  <span class="nt">&lt;applePay&gt;</span> 
    <span class="nt">&lt;applePayPKPaymentToken&gt;</span>
    {
      "paymentData": {
        "data": "Q0tfx6QzXdx...",
        "signature": "MIAGCSqGSIb3DQEHAq...",
        "header": {
          "publicKeyHash": "b9OHKov7pD...",
          "ephemeralPublicKey": "MFkwE...",
          "transactionId": "df9ea7239074..."
        },
        "version": "EC_v1"
      },
      "transactionIdentifier": "DF9EA72390...",
      "paymentMethod": {
        "network": "Visa",
        "type": "debit",
        "displayName": "Visa0492"
      }
    }
    <span class="nt">&lt;/applePayPKPaymentToken&gt;</span>
  <span class="nt">&lt;/applePay&gt;</span>
  <span class="c">&lt;!-- fill the remaining fields with usual data --&gt;</span> 
  ...
<span class="nt">&lt;/callPagamS2S&gt;</span>
</code></pre>
<p>Please read the detailed setup process for Apple Pay <a href="http://docs.gestpay.it/oth/apple-pay/">in the docs</a>. </p>

<p>Once you have received a <em>Payment Token Package</em>, you can call <a href="#callpagams2s"><code class="prettyprint">callPagamS2S</code></a> with the relevant data. </p>

<p>Note that, if using Apple Pay, <em>no Credit Card or Token data are needed</em>.</p>

<p>For a real example of Payment Token Package, contained in <code class="prettyprint">applePayPKPaymentToken</code>, <a href="http://docs.gestpay.it/assets/examples/paymentPackageToken_example_full.json">click here</a>.</p>

<p>The most important field in this process is <code class="prettyprint">applePayPKPaymentToken</code>. Here is a description:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">applePayPKPaymentToken</code></td>
<td>string</td>
<td>contains a UTF-8 serialization of a plain-text JSON dictionary.</td>
</tr>
</tbody></table>

<p>Once you have submitted <code class="prettyprint">callPagamS2S</code>, Gestpay will behave exactly as always and your payment will be processed.</p>

          <h2 id="encrypt-example-alipay">Encrypt Example: Alipay</h2>

<blockquote>
<p>Alipay example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PALI<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>alfred.nobel@dynamite.se<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Alipay does not need any mandatory parameters. Just specify the <code class="prettyprint">PaymentType</code> <code class="prettyprint">S2PALI</code> and the payment page will show to your user. </p>

<p>If you specify the <code class="prettyprint">PrimaryEmail</code> in the <a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a> tag, you will redirect your user to Alipay payment page where some fields are already filled. </p>

          <h2 id="encrypt-example-amazon-pay">Encrypt Example: Amazon Pay</h2>

<blockquote>
<p>Amazon Pay example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord20<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>AMAZONPAY<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Amazon Pay does not need any mandatory parameters. Use <code class="prettyprint">AMAZONPAY</code>  as Payment Type and the user will be redirected to Amazon Pay. </p>

<aside class="notice">
The shopTransactionId must be unique. 
</aside>

          <h2 id="encrypt-example-bitcoin">Encrypt Example: Bitcoin</h2>

<blockquote>
<p>Bitcoin example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PBIT<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="c">&lt;!-- optional --&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetails&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>satoshi.nakamoto@bitcoin.com<span class="nt">&lt;/PrimaryEmail&gt;</span>
      <span class="nt">&lt;LastName&gt;</span>Nakamoto<span class="nt">&lt;/LastName&gt;</span>
    <span class="nt">&lt;/CustomerDetails&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Bitcoin does not need mandatory parameters, however if you send the <code class="prettyprint">LastName</code> and the <code class="prettyprint">PrimaryEmail</code> address the buyer will be redirected to the payment page without filling additional fields. </p>

<p>You must use <code class="prettyprint">S2PBIT</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about Bitcoin are <a href="http://docs.gestpay.it/oth/bitcoin.html">in the doc</a>. </p>

          <h2 id="encrypt-example-consel">Encrypt Example: Consel</h2>

<blockquote>
<p>Consel example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>CONSEL<span class="nt">&lt;/paymentType&gt;</span><span class="c">&lt;!-- select CONSEL --&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;Consel_MerchantPro&gt;</span>WIK<span class="nt">&lt;/Consel_MerchantPro&gt;</span>
  <span class="nt">&lt;Consel_CustomerInfo&gt;</span>
    <span class="nt">&lt;Surname&gt;</span>Rossi<span class="nt">&lt;/Surname&gt;</span>
    <span class="nt">&lt;Name&gt;</span>Mario<span class="nt">&lt;/Name&gt;</span> 
    <span class="nt">&lt;TaxationCode&gt;</span>RSSMRA70D23H501H<span class="nt">&lt;/TaxationCode&gt;</span> 
    <span class="nt">&lt;Address&gt;</span>Via Torino<span class="nt">&lt;/Address&gt;</span>
    <span class="nt">&lt;City&gt;</span>Roma<span class="nt">&lt;/City&gt;</span> 
    <span class="nt">&lt;StateCode&gt;</span>RM<span class="nt">&lt;/StateCode&gt;</span> 
    <span class="nt">&lt;DateAddress&gt;</span>11/04/1999<span class="nt">&lt;/DateAddress&gt;</span> 
    <span class="nt">&lt;Phone&gt;</span>0632...<span class="nt">&lt;/Phone&gt;</span> 
    <span class="nt">&lt;MobilePhone&gt;</span>331...<span class="nt">&lt;/MobilePhone&gt;</span>
  <span class="nt">&lt;/Consel_CustomerInfo&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Here more info about <a href="https://hype-app.github.io/gestpay-doc/oth/consel-rate-in-rete.html">Consel Rate in Rete</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Consel_MerchantPro</code></td>
<td style="text-align: center">3</td>
<td>Merchant Promotional Code (Mandatory to show Consel in the pagam&rsquo;s Payment Method)</td>
</tr>
<tr>
<td><code class="prettyprint">Consel_CustomerInfo</code></td>
<td style="text-align: center"></td>
<td>Wrapper for Consel tags)</td>
</tr>
<tr>
<td><code class="prettyprint">Surname</code></td>
<td style="text-align: center">30</td>
<td>Customer Surname</td>
</tr>
<tr>
<td><code class="prettyprint">NAme</code></td>
<td style="text-align: center">30</td>
<td>Customer Name</td>
</tr>
<tr>
<td><code class="prettyprint">TaxationCode</code></td>
<td style="text-align: center">30</td>
<td>Customer Taxation Code</td>
</tr>
<tr>
<td><code class="prettyprint">Address</code></td>
<td style="text-align: center">30</td>
<td>Customer Address</td>
</tr>
<tr>
<td><code class="prettyprint">City</code></td>
<td style="text-align: center">30</td>
<td>Customer City</td>
</tr>
<tr>
<td><code class="prettyprint">StateCode</code></td>
<td style="text-align: center">30</td>
<td>Customer State Code</td>
</tr>
<tr>
<td><code class="prettyprint">DateAddress</code></td>
<td style="text-align: center">30</td>
<td>Date since the customer lives in the declared address (dd/mm/yyyy)</td>
</tr>
<tr>
<td><code class="prettyprint">Phone</code></td>
<td style="text-align: center">30</td>
<td>Customer Phone</td>
</tr>
<tr>
<td><code class="prettyprint">MobilePhone</code></td>
<td style="text-align: center">30</td>
<td>Customer Mobile phone</td>
</tr>
</tbody></table>

          <h2 id="encrypt-example-eps">Encrypt Example: EPS</h2>

<blockquote>
<p>EPS example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PEPS<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>EPS does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PEPS</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about EPS are <a href="http://docs.gestpay.it/oth/eps.html">in the doc</a>. </p>

          <h2 id="encrypt-example-giropay">Encrypt Example: Giropay</h2>

<blockquote>
<p>Giropay example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PGIR<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Giropay does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PGIR</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about Giropay are <a href="http://docs.gestpay.it/oth/giropay.html">in the doc</a>. </p>

          <h2 id="encrypt-example-ideal-and-mybank">Encrypt Example: IDeal and MyBank</h2>

<blockquote>
<p>MyBank example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>MYBANK<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;paymentTypeDetail&gt;</span> 
    <span class="nt">&lt;MyBankBankCode&gt;</span>Code0000X<span class="nt">&lt;/MyBankBankCode&gt;</span>
  <span class="nt">&lt;/paymentTypeDetail&gt;</span> 
<span class="nt">&lt;/Enrcypt&gt;</span>
</code></pre>
<blockquote>
<p>IDeal example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>IDEAL<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;paymentTypeDetail&gt;</span> 
    <span class="nt">&lt;IdealBankCode&gt;</span>Code0000Y<span class="nt">&lt;/IdealBankCode&gt;</span>
  <span class="nt">&lt;/paymentTypeDetail&gt;</span> 
<span class="nt">&lt;/Enrcypt&gt;</span>
</code></pre>
<p>If you choose let your users pay with MyBank or IDeal, you have to compile other two fileds.</p>

<p>More details can be found in at the <a href="http://docs.gestpay.it/oth/mybank_and_ideal.html">MyBank and IDeal</a> page.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">paymentTypeDetail</code></td>
<td style="text-align: center"></td>
<td>container of one of <code class="prettyprint">MyBankBankCode</code> or <code class="prettyprint">IdealBankCode</code></td>
</tr>
<tr>
<td><code class="prettyprint">MyBankBankCode</code></td>
<td style="text-align: center">25</td>
<td>Tag to set the Bank to show on payment page (the bank List is retrieved from <code class="prettyprint">WsS2S.CallMyBankListS2S</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">IdealBankCode</code></td>
<td style="text-align: center">25</td>
<td>Tag to set the Bank to show on payment page (the bank List is retrieved from <code class="prettyprint">WsS2S.CallIdealListS2S</code>)</td>
</tr>
</tbody></table>

          <h2 id="encrypt-example-klarna">Encrypt Example: Klarna</h2>

<blockquote>
<p>Here is an example of how to enable Klarna with Gestpay.</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PKLA<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;FirstName&gt;</span>Alfred<span class="nt">&lt;/FirstName&gt;</span>
      <span class="nt">&lt;Lastname&gt;</span>Nobel<span class="nt">&lt;Lastname&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>alfred.nobel@dynamite.se<span class="nt">&lt;/PrimaryEmail&gt;</span>
      <span class="nt">&lt;PrimaryPhone&gt;</span>00491522113356<span class="nt">&lt;/PrimaryPhone&gt;</span>
      <span class="nt">&lt;SocialSecurityNumber&gt;</span>410321-9202<span class="nt">&lt;/SocialSecurityNumber&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;StreetNumber&gt;</span>14<span class="nt">&lt;StreetNumber&gt;</span>
      <span class="nt">&lt;StreetName&gt;</span>Sturegatan<span class="nt">&lt;/StreetName&gt;</span><span class="c">&lt;!--mandatory--&gt;</span>
      <span class="nt">&lt;City&gt;</span>Stockholm<span class="nt">&lt;/City&gt;</span><span class="c">&lt;!--mandatory--&gt;</span>
      <span class="nt">&lt;ZipCode&gt;</span>SE-102<span class="nt">&lt;/ZipCode&gt;</span><span class="c">&lt;!--mandatory--&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>SE<span class="nt">&lt;/CountryCode&gt;</span><span class="c">&lt;!--mandatory--&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
    <span class="nt">&lt;ProductDetails&gt;</span>
      <span class="nt">&lt;ProductDetail&gt;</span><span class="c">&lt;!-- mandatory --&gt;</span>
        <span class="nt">&lt;ProductCode&gt;</span>1<span class="nt">&lt;/ProductCode&gt;</span>
        <span class="nt">&lt;SKU&gt;</span>AK-7<span class="nt">&lt;/SKU&gt;</span> 
        <span class="nt">&lt;Name&gt;</span>TV2000<span class="nt">&lt;/Name&gt;</span> 
        <span class="nt">&lt;Description&gt;</span>Television<span class="nt">&lt;/Description&gt;</span> 
        <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span> 
        <span class="nt">&lt;Price&gt;</span>100<span class="nt">&lt;/Price&gt;</span> 
        <span class="nt">&lt;UnitPrice&gt;</span>100<span class="nt">&lt;/UnitPrice&gt;</span> 
        <span class="nt">&lt;Type&gt;</span>1<span class="nt">&lt;/Type&gt;</span> 
        <span class="nt">&lt;Vat&gt;</span>10<span class="nt">&lt;/Vat&gt;</span> 
        <span class="nt">&lt;Discount&gt;</span>0<span class="nt">&lt;/Discount&gt;</span>
      <span class="nt">&lt;/ProductDetail&gt;</span> 
    <span class="nt">&lt;/ProductDetails&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Klarna requires these parameters as mandatory, children of <code class="prettyprint">OrderDetails</code>: </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">BillingAddress.StreetName</code></td>
<td style="text-align: center">100</td>
<td>Shipping street name. <strong>Accepts only alpha-numeric characters.</strong></td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.City</code></td>
<td style="text-align: center">50</td>
<td>Shipping city name</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.ZipCode</code></td>
<td style="text-align: center">50</td>
<td>Shipping zip code</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.CountryCode</code></td>
<td style="text-align: center">2</td>
<td>one of [AT &#124; DK &#124; FI &#124; DE &#124; NL &#124; NO &#124; SE]</td>
</tr>
<tr>
<td><code class="prettyprint">ProductDetails.ProductDetail</code></td>
<td style="text-align: center"></td>
<td>the list of ordered products</td>
</tr>
</tbody></table>

<p>We strongly suggest you to <a href="http://docs.gestpay.it/oth/klarna.html#some-clarifications-on-mandatory-fields">read these notes on <code class="prettyprint">BillingAddress</code> and <code class="prettyprint">ShippingAddress</code></a>.</p>

<aside class="active">
<code>StreetName</code> and <code>StreetNumber</code>, either in <code>BillingAddress</code> or <code>ShippingAddress</code>, must contain only alphanumeric characters. 
</aside>

<p>If you send other fields, your customer will find them already filled: </p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.FirstName</code></td>
<td style="text-align: center">65</td>
<td>Customer First Name</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.Lastname</code></td>
<td style="text-align: center">65</td>
<td>the list of ordered products</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryEmail</code></td>
<td style="text-align: center">100</td>
<td>Customer primary email</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryPhone</code></td>
<td style="text-align: center">100</td>
<td>Customer’s phone including prefix. See below on how to use it.</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.SocialSecurityNumber</code></td>
<td style="text-align: center">20</td>
<td>Customer&rsquo;s social or fiscal identifier (for Klarna Use)</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.StreetNumber</code></td>
<td style="text-align: center">5</td>
<td>Shipping Street Number. <strong>Accepts only numbers.</strong></td>
</tr>
</tbody></table>

<aside class="active" markdown="1">
<code>PrimaryPhone</code> must follow these rules: 
<ul>
<li>it must contain only numbers;</li>
<li>if the number does not contain a country code, it must be preceeded by <code>0</code> followed by the phone number; for example, <code>01522113356</code></li>
<li>If the number contains a country code, it must be set to CountryCode + phone number, without the <code>0</code> prefix; for example <code>00491522113356</code>.</li>
</ul>
</aside>

<p><code class="prettyprint">ProductDetails</code> can have one or more <code class="prettyprint">ProductDetail</code>. Here is a description of its fields:</p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProductCode</code></td>
<td style="text-align: center">12</td>
<td>Article’s product Code</td>
</tr>
<tr>
<td><code class="prettyprint">SKU</code></td>
<td style="text-align: center">50</td>
<td>Article’s Stock Keeping Unit</td>
</tr>
<tr>
<td><code class="prettyprint">Name</code></td>
<td style="text-align: center">100</td>
<td>Article’s name</td>
</tr>
<tr>
<td><code class="prettyprint">Description</code></td>
<td style="text-align: center">255</td>
<td>Article’s description</td>
</tr>
<tr>
<td><code class="prettyprint">Quantity</code></td>
<td style="text-align: center">3</td>
<td>The number of products</td>
</tr>
<tr>
<td><code class="prettyprint">Price</code></td>
<td style="text-align: center">12</td>
<td>Article’s price</td>
</tr>
<tr>
<td><code class="prettyprint">UnitPrice</code></td>
<td style="text-align: center">12</td>
<td>Article’s Unit Price</td>
</tr>
<tr>
<td><code class="prettyprint">Type</code></td>
<td style="text-align: center">2</td>
<td>The type of article: visit the <a href="http://docs.gestpay.it/oth/klarna.html#product-type">klarna page in the docs</a> to set the right value</td>
</tr>
<tr>
<td><code class="prettyprint">Vat</code></td>
<td style="text-align: center">2</td>
<td>Value-Added Tax (the value of the tax)</td>
</tr>
<tr>
<td><code class="prettyprint">Discount</code></td>
<td style="text-align: center">2</td>
<td>The amount offered by you as discount, in percentage. <code class="prettyprint">10</code> means <code class="prettyprint">10%</code> and it is subtracted to the price.</td>
</tr>
</tbody></table>

<aside class="active" markdown="1">

Please note: 
<ul>
<li>The total value for the <code>ProductDetails</code> needs to be the same as the total amount sent otherwise the transaction fails.</li>
<li>The <code>Discount</code> is a percentage and must be considered in the Total Amount Value.</li>
<li>For example if the <code>Quantity</code> is 1 the <code>Price</code> is 10 and the <code>Discount</code> is 10(%) the Total Amount of the transaction must be 9, otherwise the transaction is refused.</li>
</ul>
</aside>

<p>More details about Klarna are in <a href="http://docs.gestpay.it/oth/klarna.html">the documentation</a>. </p>

          <h2 id="encrypt-example-konbini">Encrypt Example: Konbini</h2>

<blockquote>
<p>Konbini example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PKON<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="c">&lt;!--optional, to skip authentication --&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>yamauchi.fusajiro@nintendo.jp<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Konbini does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PKON</code> as <code class="prettyprint">paymentType</code>.</p>

<p>If you pass the <code class="prettyprint">PrimaryEmail</code> tag, the customer will be redirected directly to the payment page. </p>

<p>More informations about Konbini are <a href="http://docs.gestpay.it/oth/konbini.html">in the doc</a>. </p>

          <h2 id="encrypt-example-masterpass">Encrypt Example: Masterpass</h2>

<blockquote>
<p>Masterpass example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>MASTERPASS<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Masterpass does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">MASTERPASS</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about Masterpass are <a href="http://docs.gestpay.it/oth/masterpass.html">in the doc</a>. </p>

          <h2 id="encrypt-example-mercadopago">Encrypt Example: MercadoPago</h2>

<blockquote>
<p>MercadoPago example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PMER<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>MercadoPago does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PMER</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about MercadoPago are <a href="http://docs.gestpay.it/oth/mercadopago.html">in the doc</a>. </p>

          <h2 id="encrypt-example-multibanco">Encrypt Example: Multibanco</h2>

<blockquote>
<p>Multibanco example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PMUL<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Multibanco does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PMUL</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about Multibanco are <a href="http://docs.gestpay.it/oth/multibanco.html">in the doc</a>. </p>

          <h2 id="encrypt-example-paypal">Encrypt example: Paypal</h2>

<h3 id="enabling-paypal">Enabling Paypal</h3>

<blockquote>
<p>If you only specify <code class="prettyprint">PAYPAL</code> payment type, Gestpay won&rsquo;t show the payment page but will redirect directly to Paypal&rsquo;s payment page: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>PAYPAL<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>
<p>A detailed description of <a href="http://docs.gestpay.it/oth/paypal.html">Gestpay integration with Paypal</a> is in the docs.</p>

<h3 id="paypal-seller-protection">Paypal Seller Protection</h3>

<blockquote>
<p>Paypal Seller Protection example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;ppSellerProtection&gt;</span>1<span class="nt">&lt;/ppSellerProtection&gt;</span>
  <span class="nt">&lt;shippingDetails&gt;</span>
    <span class="nt">&lt;shipToName&gt;</span>Marco Bianchi<span class="nt">&lt;/shipToName&gt;</span>
    <span class="nt">&lt;shipToStreet&gt;</span>Via Milano 1<span class="nt">&lt;/shipToStreet&gt;</span>
    <span class="nt">&lt;shipToCity&gt;</span>Torino<span class="nt">&lt;/shipToCity&gt;</span>
    <span class="nt">&lt;shipToState&gt;</span>TO<span class="nt">&lt;/shipToState&gt;</span>
    <span class="nt">&lt;shipToCountryCode&gt;</span>IT<span class="nt">&lt;/shipToCountryCode&gt;</span>
    <span class="nt">&lt;shipToZip&gt;</span>10100<span class="nt">&lt;/shipToZip&gt;</span>
    <span class="nt">&lt;shipToStreet2/&gt;</span>
  <span class="nt">&lt;/shippingDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>For more informations, checkout the <a href="http://docs.gestpay.it/oth/paypal.html#paypal-seller-protection">Paypal Seller Protection</a> section.</p>

<p>If you want to activate the <strong>Paypal Seller Protection</strong> you must:</p>

<ul>
<li>set <code class="prettyprint">ppSellerProtection</code> to 1</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ppSellerProtection</code></td>
<td style="text-align: center">1</td>
<td>Parameter to set the use of a confirmed addresses</td>
</tr>
</tbody></table>

<ul>
<li>send all the shipment data in the <code class="prettyprint">shipmentDetails</code> tag: </li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shipToName</code></td>
<td style="text-align: center">32</td>
<td>String containing the shipping name</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet</code></td>
<td style="text-align: center">100</td>
<td>String containing the shipping address</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCity</code></td>
<td style="text-align: center">40</td>
<td>String containing the shipping city</td>
</tr>
<tr>
<td><code class="prettyprint">shipToState</code></td>
<td style="text-align: center">40</td>
<td>String containing the shipping state (see <a href="#paypal-state-amp-province-codes">Paypal State Codes table</a>)</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCountryCode</code></td>
<td style="text-align: center">2</td>
<td>String containing the shipping country code (see <a href="#paypal-country-codes">Paypal Country Codes table</a>)</td>
</tr>
<tr>
<td><code class="prettyprint">shipToZip</code></td>
<td style="text-align: center">20</td>
<td>String containing the shipping zip</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet2</code></td>
<td style="text-align: center">100</td>
<td>String containing an additional shipping address field</td>
</tr>
</tbody></table>

<h3 id="paypal-recurring-payments"> Paypal recurring payments</h3>

<blockquote>
<p>In this way you can activate recurring payments on paypal. Note that no <code class="prettyprint">paymentType</code> is needed. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;payPalBillingAgreementDescription&gt;</span>
    description of the agreement 
  <span class="nt">&lt;/payPalBillingAgreementDescription&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>
<p>A Buyer will be able to subscribe a Billing Agreement on PayPal website so authorizing the Merchant to debit his/her PayPal account in future transactions.</p>

<p>To use PayPal Reference Transaction it&rsquo;s necessary to fill the tag <code class="prettyprint">PayPalBillingAgreementDescription</code> that can be present or not (in case of a normal PayPal payment it will be left empty or not passed at all).</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">payPalBillingAgreementDescription</code></td>
<td style="text-align: center">127</td>
<td>Description of the goods, terms and conditions of the billing agreement</td>
</tr>
</tbody></table>

<p>The Encryption service, if field <code class="prettyprint">payPalBillingAgreementDescription</code> is present and not empty, assumes that the payment method is PayPal (so <code class="prettyprint">paymentType</code> field in this case is <strong>not mandatory</strong>: if present it must be valued <code class="prettyprint">PAYPAL</code>).</p>

<p>If this tag is passed to Encryption, GestPay bypasses the Pagam page in every case (even if other payment methods are enabled for the Merchant).</p>

<p>This tag has to be filled with description of the goods, terms and conditions of the billing agreement.</p>

<aside class="notice">When using paypal Billing Agreement, you will get a Token to use later with the callPagamS2S webservice. </aside>

          <h2 id="encrypt-example-paysafecard">Encrypt Example: Paysafecard</h2>

<blockquote>
<p>Paysafecard example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PPSC<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Paysafecard does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PPSC</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about Paysafecard are <a href="http://docs.gestpay.it/oth/paysafecard.html">in the doc</a>. </p>

          <h2 id="encrypt-example-przelewy24">Encrypt Example: Przelewy24</h2>

<blockquote>
<p>Przelewy24 example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>PRZELEWY24<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>fryderyk.chopin@pianolessons.pl<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Przelewy24 does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PPSC</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about Przelewy24 are <a href="http://docs.gestpay.it/oth/przelewy24.html">in the doc</a>. </p>

          <h2 id="encrypt-example-qiwi">Encrypt Example: Qiwi</h2>

<blockquote>
<p>Qiwi call example :</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PQIW<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryPhone&gt;</span>0123456789<span class="nt">&lt;/PrimaryPhone&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>US<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Qiwi does not need mandatory parameters, but if you send these few parameters you can have a frictionless call directly to the first screen of QIWI where authentication data are asked. These fields are children of <a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a>:</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryPhone</code></td>
<td style="text-align: center">20</td>
<td>Customer&rsquo;s phone including prefix</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.CountryCode</code></td>
<td style="text-align: center">2</td>
<td>Alpha-2 code example for US is “US”</td>
</tr>
</tbody></table>

<p>This mean that no others values are asked to the buyers; but if these field are not sent with the payment, a page will be displayed in order to ask the necessary fields like Phone and CountryCode of the buyer.</p>

          <h2 id="encrypt-example-sepa">Encrypt Example: SEPA</h2>

<blockquote>
<p>SEPA Direct Debit example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>10<span class="nt">&lt;/amount&gt;</span><span class="c">&lt;!-- mandatory, but not used --&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>SEPADD<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;FirstName&gt;</span>Stephen<span class="nt">&lt;/FirstName&gt;</span>
      <span class="nt">&lt;Lastname&gt;</span>Hawk<span class="nt">&lt;/Lastname&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>stephen@hawk.com<span class="nt">&lt;/PrimaryEmail&gt;</span>
      <span class="nt">&lt;PrimaryPhone&gt;</span>+390123456789<span class="nt">&lt;/PrimaryPhone&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;StreetNumber&gt;</span>8<span class="nt">&lt;/StreetNumber&gt;</span>
      <span class="nt">&lt;StreetName&gt;</span>Piazza Martiri della Liberta<span class="nt">&lt;/StreetName&gt;</span>
      <span class="nt">&lt;City&gt;</span>Biella<span class="nt">&lt;/City&gt;</span>
      <span class="nt">&lt;ZipCode&gt;</span>13900<span class="nt">&lt;/ZipCode&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>IT<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>To get a pre-approval from SEPA you must specify the paymentType <code class="prettyprint">SEPADD</code>. </p>

<p>This payment method requires some other mandatory data, like <strong>customer details</strong> and <strong>billing address</strong>.</p>

<p>The amount used in the Encrypt is mandatory, but it is discarded since the <code class="prettyprint">Encrypt</code> call is used only to get a pre-approval token. </p>

<p>The effectively charged amount is passed to <a href="#callpagams2s"><code class="prettyprint">callPagamS2S</code></a> after the pre-approval token is received. </p>

          <h2 id="encrypt-example-sofort">Encrypt Example: Sofort</h2>

<blockquote>
<p>SOFORT example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PSOF<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;FirstName&gt;</span>Albert<span class="nt">&lt;/FirstName&gt;</span>
      <span class="nt">&lt;Lastname&gt;</span>Einstein<span class="nt">&lt;/Lastname&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>albert.einstein@princeton.edu<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>DE<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Sofort does not need mandatory parameters, but if you send the following parameters, you will jump straight to the SOFORT payment page without authenticating. All these fields are children of <a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.FirstName</code></td>
<td style="text-align: center">65</td>
<td>Customer First Name</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.Lastname</code></td>
<td style="text-align: center">65</td>
<td>Customer Last name</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryEmail</code></td>
<td style="text-align: center">100</td>
<td>Customer primary email</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.CountryCode</code></td>
<td style="text-align: center">2</td>
<td>Alpha-2 code. For example, use US for USA</td>
</tr>
</tbody></table>

          <h2 id="encrypt-example-unionpay">Encrypt Example: UnionPay</h2>

<blockquote>
<p>UnionPay example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>SP_S2P_UnionPay_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PUNI<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryPhone&gt;</span>+85211112222<span class="nt">&lt;/PrimaryPhone&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>yangchenning@physics.cn<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Unipay does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PUNI</code> as <code class="prettyprint">paymentType</code>.</p>

<p>However, if you send the <code class="prettyprint">PrimaryEmail</code> and <code class="prettyprint">PrimaryPhone</code> fields in the <a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a> tag, you will jump straight to the UnionPay payment page; otherwise, an intermediary page asking for the email address is showed. </p>

          <h2 id="encrypt-example-webmoney">Encrypt Example: WebMoney</h2>

<blockquote>
<p>WebMoney example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>0.10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP_001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PWMO<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>WebMoney does not need mandatory parameters. </p>

<p>You must use <code class="prettyprint">S2PWMO</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about WebMoney are <a href="http://docs.gestpay.it/oth/webmoney.html">in the doc</a>. </p>

          <h2 id="encrypt-example-wechat">Encrypt Example: WeChat</h2>

<blockquote>
<p>WeChat example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>144<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>WECHAT<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>bruce.lee@jetkunedo.com<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>WeChat does not need mandatory parameters.</p>

<p>You must use <code class="prettyprint">WECHAT</code> as <code class="prettyprint">paymentType</code>.</p>

<p>More informations about WeChat are <a href="http://docs.gestpay.it/oth/wechat.html">in the doc</a>. </p>

          <h2 id="encrypt-example-yandex">Encrypt Example: Yandex</h2>

<blockquote>
<p>Yandex Example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>10<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PYAN<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetail&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>alfred.nobel@dynamite.se<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>
<p>Yandex does not need mandatory parameters; but if you send <code class="prettyprint">CustomerDetail.PrimaryEmail</code> in the <a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a> tag you can have a frictionless call directly to the first screen of Yandex where authentication data are asked.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryEmail</code></td>
<td style="text-align: center">100</td>
<td>Customer primary email</td>
</tr>
</tbody></table>

<p>This mean that no others values are asked to the buyer; if this field is not sent with the payment, a page will ask the necessary fields.</p>

          <h1 id="js_gestpay-js-api">js_GestPay.js API</h1>

<blockquote>
<p>To start using this feature, import the script:</p>
</blockquote>
<pre class="highlight html"><code> <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ecomm.sella.it/pagam/JavaScript/js_GestPay.js"</span>
    <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<blockquote>
<p>Once the script is imported, it will do some security checks. You can see this with the <code class="prettyprint">BrowserEnabled</code> variable: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">if</span> <span class="p">(</span> <span class="nx">BrowserEnabled</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">//The Browser is supported! </span>
    <span class="c1">//Proceed to create the Payment page</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//The browser is not supported </span>
    <span class="c1">//Place here error handle code</span>
<span class="p">}</span>
</code></pre>
<p>js_Gestpay.js is a javascript that enable you to process payments on your website, leaving you with the ability to completely design your custom payment page. </p>

<p>To use the following functionalities, you should first call <a href="#encrypt">`<code class="prettyprint">WSCryptDecrypt.Encrypt</code> webservice</a>. </p>

          <h2 id="createpaymentpage">CreatePaymentPage</h2>

<blockquote>
<p>Syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">CreatePaymentPage</span><span class="p">(</span>
    <span class="nx">shopLogin</span><span class="p">,</span> <span class="c1">//I.E. 90000001</span>
    <span class="nx">EncryptedString</span><span class="p">,</span> <span class="c1">// "CFD3732BB102..." </span>
    <span class="nx">PaymentPageLoaded</span><span class="p">);</span> <span class="c1">// a callback to call on success</span>
</code></pre>
<blockquote>
<p>Example: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">CreatePaymentPage</span><span class="p">(</span>
    <span class="s1">'9000001'</span><span class="p">,</span>  <span class="c1">//shopLogin</span>
    <span class="s1">'DcffrrnDNdjfnemfnermgnermNfdm,gnem/*ng'</span><span class="p">,</span> <span class="c1">//EncryptedString </span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">//callback </span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">==</span> <span class="mi">10</span><span class="p">){</span> 
            <span class="c1">//iFrame created and payment page correctly loaded</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//An error has occurred, check ErrorCode and ErrorDescription</span>
            <span class="c1">//properties of the Result object</span>
        <span class="p">}</span> 
    <span class="p">});</span>
</code></pre>
<p>The first thing to do to accept payments securely is to call <code class="prettyprint">GestPay.CreatePaymentPage()</code>.</p>

<p>The function will create an hidden iFrame into the body element and will load the payment page passing the merchant code and the generated encrypted string from the previous phase. </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Shop Login</td>
<td><code class="prettyprint">string</code></td>
<td>the code that identifies your shop.</td>
</tr>
<tr>
<td>Encrypted String</td>
<td><code class="prettyprint">string</code></td>
<td>the string created with <code class="prettyprint">WSCryptEncrypt.Encrypt</code> webservice.</td>
</tr>
<tr>
<td>callback</td>
<td><code class="prettyprint">function</code></td>
<td>the callback that will be called with the result</td>
</tr>
</tbody></table>

          <h2 id="sendpayment">SendPayment</h2>

<h3 id="credit-card-authorization">Credit card authorization</h3>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span> <span class="p">({</span> 
    <span class="na">CC</span>    <span class="p">:</span> <span class="s1">'1234567812345678'</span><span class="p">,</span> 
    <span class="na">EXPMM</span> <span class="p">:</span> <span class="s1">'06'</span><span class="p">,</span> 
    <span class="na">EXPYY</span> <span class="p">:</span> <span class="s1">'12'</span><span class="p">,</span> 
    <span class="na">CVV2</span> <span class="p">:</span> <span class="s1">'123'</span><span class="p">,</span> <span class="c1">//optional</span>
    <span class="na">Name</span> <span class="p">:</span> <span class="s1">'Some Dude'</span><span class="p">,</span> <span class="c1">//optional </span>
    <span class="na">Mail</span><span class="p">:</span> <span class="s1">'some@dude.net'</span> <span class="c1">//optional  </span>
  <span class="p">},</span>
  <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span><span class="p">({</span>
    <span class="na">CC</span> <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'CC'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span> 
    <span class="na">EXPMM</span> <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'EXPMM'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span> 
    <span class="na">EXPYY</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'EXPYY'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span> 
    <span class="na">CVV2</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'CVV2'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span> 
    <span class="na">Name</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'Name'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span> 
    <span class="na">Email</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'Email'</span><span class="p">).</span><span class="nx">value</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErroCode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//Transaction correctly processed</span>
      <span class="c1">//Decrypt the Result.EncryptedString property to read the </span>
      <span class="c1">//transaction result</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">//An error has occurred, check ErrorCode and ErrorDescription </span>
      <span class="c1">//properties of the Result object</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p>To send the credit card data to the hidden iFrame, the checkout page will assign a function to the <code class="prettyprint">OnSubimt</code> event of the credit card form, this function will retrieve the credit card data and will call the <code class="prettyprint">GestPay.SendPayment</code> method providing an object with the credit card number (<code class="prettyprint">CC</code>), the expiration month (<code class="prettyprint">EXPMM</code>) and the expiration year (<code class="prettyprint">EXPYY</code>), the CVV (<code class="prettyprint">CVV2</code>) if enabled, and a CallBack object. </p>

<p>The input is composed of two arguments: </p>

<ul>
<li>The object <code class="prettyprint">CCData</code>, with these fields</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Size</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CC</code></td>
<td>Credit card number</td>
<td><code class="prettyprint">number</code></td>
<td>min: 13, max: 19</td>
</tr>
<tr>
<td><code class="prettyprint">EXPMM</code></td>
<td>Expiration Month</td>
<td><code class="prettyprint">number</code></td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">EXPYY</code></td>
<td>Expiration Year</td>
<td><code class="prettyprint">number</code></td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">CVV2</code> (optional)</td>
<td>Cvv/4DBC</td>
<td><code class="prettyprint">number</code></td>
<td>min:3, max:4</td>
</tr>
<tr>
<td><code class="prettyprint">Name</code> (optional)</td>
<td>Buyer&rsquo;s name</td>
<td><code class="prettyprint">string</code> </td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">Email</code> (optional)</td>
<td>Buyer&rsquo;s email</td>
<td><code class="prettyprint">string</code></td>
<td></td>
</tr>
</tbody></table>

<ul>
<li>a callback function, to handle the output. </li>
</ul>

<p><code class="prettyprint">CVV2</code>, <code class="prettyprint">Name</code> and <code class="prettyprint">Email</code> are optional but <strong>highly recommended</strong>. </p>

<aside class="warning">To free the Shop from the need to comply with PCI Security standard, the OnSubmit event of the Credit card form must avoid to postback the data to the checkout page! </aside>

<h3 id="call-after-3d-authentication">Call after 3D Authentication</h3>

<blockquote>
<p>Syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span><span class="p">({</span>
    <span class="na">PARes</span> <span class="p">:</span> <span class="s1">''</span><span class="p">,</span> 
    <span class="na">TransKey</span> <span class="p">:</span> <span class="s1">''</span>
  <span class="p">},</span>  
  <span class="nx">callbackFunction</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span> <span class="p">({</span>
  <span class="na">PARes</span> <span class="p">:</span> <span class="s1">'xMNjdsre23214hjksBBDsjkrhewGSD/*dwhjdkhawNDAHDGUY'</span><span class="p">,</span> 
  <span class="na">TransKey</span> <span class="p">:</span> <span class="s1">'eFtstSStefgd23432'</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErroCode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
      <span class="c1">// Transaction correctly processed ! </span>
      <span class="c1">// Decrypt the Result.EncryptedString property to read the </span>
      <span class="c1">// transaction result</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="c1">// An error has occurred, check ErrorCode and ErrorDescription</span>
      <span class="c1">// properties of the Result object</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p>If during the first <code class="prettyprint">SendPayment</code> call <code class="prettyprint">Result.ErrorCode == 8006</code>, you should redirect the user to the <code class="prettyprint">pagam3d.aspx</code> page. You can read about the process at this link: <a href="http://docs.gestpay.it/pay/creating-your-custom-payment-page.html">Customizing the payment page</a>. </p>

<p>When card holder is verified and authorized, you have to re-call <code class="prettyprint">SendPayment()</code> with some new parameters: </p>

<ul>
<li><code class="prettyprint">CCData</code> (<code class="prettyprint">object</code>)

<ul>
<li><code class="prettyprint">PARes</code> (<code class="prettyprint">string</code>)</li>
<li><code class="prettyprint">TransKey</code> (<code class="prettyprint">string</code>)</li>
</ul></li>
<li>callback (<code class="prettyprint">function</code>) </li>
</ul>

          <h2 id="ping">ping</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">ping</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErroCode</span> <span class="o">==</span> <span class="mi">1111</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//connection estabilished: servers are available</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">)</span> <span class="c1">// outputs 'Ping Back'</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">//An error has occurred, check ErrorCode and ErrorDescription </span>
      <span class="c1">//properties of the Result object</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p>The <code class="prettyprint">Ping</code> function checks that there is an active connection with Gestpay. </p>

<p>Useful for troubleshooting connection errors. </p>

          <h2 id="getlastanswer">getLastAnswer</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">getLastAnswer</span><span class="p">(</span><span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">getLastAnswer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asks Gestpay to re-send the last Result object. </span>
  <span class="p">});</span>
</code></pre>
<p><code class="prettyprint">getLastAnswer</code> asks Gestpay to send back the last received Result object.   </p>

          <h2 id="checkcc">checkCC</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkCC</span><span class="p">(</span><span class="nx">CCNum</span><span class="p">,</span> <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkCC</span><span class="p">(</span><span class="s1">'12345678'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">);</span> <span class="c1">// i.e. 1119</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">);</span> <span class="c1">// 'Credit card number with wrong length'</span>
    <span class="p">...</span> <span class="c1">//handle the error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the Credit Card Number is valid'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p><code class="prettyprint">checkCC</code> checks the formal correctness of the credit card number. </p>

          <h2 id="checkcvv">checkCVV</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkCVV</span><span class="p">(</span><span class="nx">CVVNum</span><span class="p">,</span> <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">CVV</span> <span class="o">=</span> <span class="s1">'XY@Z'</span><span class="p">;</span>

<span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkCVV</span><span class="p">(</span><span class="nx">CVV</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">);</span> <span class="c1">// i.e. 1149</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">);</span> <span class="c1">// 'Missing or wrong CVV2'</span>
    <span class="p">...</span> <span class="c1">//handle the error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the CVV value is valid'</span><span class="p">);</span> 
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p><code class="prettyprint">checkCVV</code> checks the formal correctness of the value sent as CVV. </p>

          <h2 id="checkexpmm">checkEXPMM</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEXPMM</span><span class="p">(</span><span class="nx">EXPMMVal</span><span class="p">,</span> <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">EXPMMVal</span> <span class="o">=</span> <span class="s1">'123'</span><span class="p">;</span> <span class="c1">//not valid ! </span>

<span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEXPMM</span><span class="p">(</span><span class="nx">EXPMMVal</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">);</span> <span class="c1">// i.e. 1124</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">);</span> <span class="c1">// 'Invalid expiry month'</span>
    <span class="p">...</span> <span class="c1">//handle the error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the expiring month value is valid'</span><span class="p">);</span> 
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p><code class="prettyprint">checkEXPMM</code> checks the formal correctness of the value sent as <code class="prettyprint">EXPMMVal</code>. It represents the <strong>expiring month</strong> so it should be a value between <code class="prettyprint">0</code> and <code class="prettyprint">12</code>. </p>

          <h2 id="checkexpyy">checkEXPYY</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEXPYY</span><span class="p">(</span><span class="nx">EXPYYVal</span><span class="p">,</span> <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">EXPYYVal</span> <span class="o">=</span> <span class="s1">'99999'</span><span class="p">;</span> <span class="c1">//not a valid year ! </span>

<span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEXPYY</span><span class="p">(</span><span class="nx">EXPYYVal</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">);</span> <span class="c1">// i.e. 1125</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">);</span> <span class="c1">// 'Invalid expiry year'</span>
    <span class="p">...</span> <span class="c1">//handle the error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the expiring year is valid'</span><span class="p">);</span> 
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p><code class="prettyprint">checkEXPYY</code> checks the formal correctness of the value sent as <code class="prettyprint">EXPYYVal</code>. It represents the <strong>expiring year</strong> so it should be a value between <code class="prettyprint">0</code> and <code class="prettyprint">99</code>. </p>

          <h2 id="checkexpdate">checkEXPDATE</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEXPDATE</span><span class="p">(</span><span class="nx">EXPMMVal</span><span class="p">,</span> <span class="nx">EXPYYVal</span><span class="p">,</span> <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">EXPMMVal</span> <span class="o">=</span> <span class="s1">'11'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">EXPYYVal</span> <span class="o">=</span> <span class="s1">'211'</span><span class="p">;</span> 

<span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEXPDATE</span><span class="p">(</span><span class="nx">EXPMMVal</span><span class="p">,</span> <span class="nx">EXPYYVal</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">);</span> <span class="c1">// i.e. 1125</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">);</span> <span class="c1">// 'Invalid expiry year'</span>
    <span class="p">...</span> <span class="c1">//handle the error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the expiring year is valid'</span><span class="p">);</span> 
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p><code class="prettyprint">checkEXPDATE</code> checks the formal correctness of the <strong>expiry date</strong>, sent as two variables for month and year. </p>

          <h2 id="checkemail">checkEMAIL</h2>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEMAIL</span><span class="p">(</span><span class="nx">EmailVal</span><span class="p">,</span> <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">checkEMAIL</span><span class="p">(</span> <span class="s1">'email@example.com'</span> <span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// mail is valid, ErrorCode is 0 </span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">);</span> 
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorDescription</span><span class="p">);</span>
    <span class="p">...</span> <span class="c1">//handle error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the email is valid'</span><span class="p">);</span>  <span class="c1">//prints 'the email is valid'</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
<p><code class="prettyprint">checkEMAIL</code> checks the formal correctness of the <strong>email address</strong>.</p>

          <h2 id="the-result-object"> the Result Object</h2>

<blockquote>
<p>Example: Merchant not 3D enabled or credit card not enrolled. </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">LocalObj</span><span class="p">.</span><span class="nx">CallBack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Result</span><span class="p">){</span> 
    <span class="k">if</span> <span class="p">(</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Call failed an error has occurred </span>
        <span class="c1">//.... place here error handle code...</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Transaction correctly processed proceed to decrypt the</span>
        <span class="c1">// Result.EncryptedResponse property</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Example: Merchant 3D enabled and 3D enrolled credit card</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">LocalObj</span><span class="p">.</span><span class="nx">CallBack</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span> 
    <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">==</span> <span class="mi">8006</span><span class="p">){</span>
            <span class="c1">//3D Transaction - Card holder authorization required </span>
            <span class="c1">//Get the TransKey</span>
            <span class="c1">//NOTE you have to store this value in your server for </span>
            <span class="c1">//further use</span>
            <span class="kd">var</span> <span class="nx">TransKey</span> <span class="o">=</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">TransKey</span><span class="p">;</span>
            <span class="c1">//Get the VBVRisp</span>
            <span class="kd">var</span> <span class="nx">VBVRisp</span> <span class="o">=</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">VBVRisp</span><span class="p">;</span>
            <span class="c1">//place here the code to redirect the card holder to the </span>
            <span class="c1">//authentication website</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//Call failed an error has occurred </span>
            <span class="c1">//.... place here error handle code...</span>
        <span class="p">}</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">//Transaction correctly processed proceed to decrypt the</span>
      <span class="c1">//Result.EncryptedResponse property</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>When callbacks are executed, the <code class="prettyprint">Result</code> object will contain useful properties, needed to understand if an error has occurred.</p>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Result.ErrorCode</code></td>
<td>the error code</td>
</tr>
<tr>
<td><code class="prettyprint">Result.ErrorDescription</code></td>
<td>the error description</td>
</tr>
<tr>
<td><code class="prettyprint">Result.EncryptedResponse</code></td>
<td>returns the encrypted response string</td>
</tr>
<tr>
<td><code class="prettyprint">Result.TransKey</code></td>
<td>return the <code class="prettyprint">TransKey</code> in case of 3D enrolled credit card</td>
</tr>
<tr>
<td><code class="prettyprint">Result.VBVRisp</code></td>
<td>return the ciphered string needed for the cardholder authentication in case of 3D enrolled credit card</td>
</tr>
</tbody></table>

<p>The GestPay.SendPayment() function will send an asynchronous call to the hidden iFrame windows, the CallBack object will retrieve the Result object once the transaction result is thrown from the hidden payment page.</p>

          <h1 id="wss2s-api">WsS2S API</h1>

<p><em>Server to Server</em> communication between merchants and GestPay is managed by consuming WSs2s <a href="http://www.w3.org/TR/soap/">SOAP</a> web service.</p>

<p>Consuming WSs2s methods allow merchants to send requests and retrieve responses in XML format.</p>

<ul>
<li>Test environment url:<br>
<code class="prettyprint">https://sandbox.gestpay.net/gestpay/gestpayws/WSs2s.asmx?WSDL</code></li>
<li>Production environment url: <br>
<code class="prettyprint">https://ecomms2s.sella.it/gestpay/gestpayws/WSs2s.asmx?WSDL</code></li>
</ul>

<aside class="notice">To use *Server to Server* features, you must be authorized by Banca Sella or Easy Nolo.</aside>

          <h2 id="callpagams2s">callPagamS2S</h2>

<p>This service performs an authorization request. </p>

<p>Merchants can use this method to perform the transaction, passing all the parameters useful to define all the transaction’s features. </p>

<h3 id="request-parameters"> Request parameters</h3>

<blockquote>
<p>request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callPagamS2S&gt;</span>
    <span class="nt">&lt;shopLogin&gt;</span>9000002<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- euro --&gt;</span>
    <span class="nt">&lt;amount&gt;</span>24.21<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-0001<span class="nt">&lt;/shopTransactionId&gt;</span>
    <span class="c">&lt;!-- here we have choosen to pay with credit card data --&gt;</span>
    <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
    <span class="nt">&lt;expiryMonth&gt;</span>06<span class="nt">&lt;/expiryMonth&gt;</span>
    <span class="nt">&lt;expiryYear&gt;</span>21<span class="nt">&lt;/expiryYear&gt;</span>
    <span class="c">&lt;!-- if we wanted to pay by token: 
    &lt;tokenValue&gt;ABCD12345678EFGD&lt;/tokenValue&gt;
    --&gt;</span>
    <span class="nt">&lt;buyerName&gt;</span>John Fitzgerald Kennedy<span class="nt">&lt;/buyerName&gt;</span>
    <span class="nt">&lt;buyerEmail&gt;</span>johnny.kennedy@usa.com<span class="nt">&lt;/buyerEmail&gt;</span>
    <span class="nt">&lt;languageId&gt;</span>2<span class="nt">&lt;/languageId&gt;</span><span class="c">&lt;!-- english --&gt;</span>
    <span class="nt">&lt;cvv&gt;</span>987<span class="nt">&lt;/cvv&gt;</span>
    <span class="nt">&lt;PARes</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;transKey</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;customInfo&gt;&lt;/customInfo&gt;</span>
    <span class="nt">&lt;requestToken&gt;</span>MASKEDPAN<span class="nt">&lt;/requestToken&gt;</span>
    <span class="nt">&lt;itemType&gt;</span>physical<span class="nt">&lt;/itemType&gt;</span>
    <span class="nt">&lt;recurrent&gt;</span>false<span class="nt">&lt;/recurrent&gt;</span>
    <span class="nt">&lt;shippingDetails&gt;</span>
        <span class="nt">&lt;shipToName&gt;</span>Jonny Kennedy<span class="nt">&lt;/shipToName&gt;</span>
        <span class="nt">&lt;shipToStreet&gt;</span>83 Beals street<span class="nt">&lt;/shipToStreet&gt;</span>
        <span class="nt">&lt;shipToCity&gt;</span>Brookline<span class="nt">&lt;/shipToCity&gt;</span>
        <span class="nt">&lt;shipToState&gt;</span>MA<span class="nt">&lt;/shipToState&gt;</span>
        <span class="nt">&lt;shipToCountryCode&gt;</span>US<span class="nt">&lt;/shipToCountryCode&gt;</span>
        <span class="nt">&lt;shipToZip&gt;</span>02446<span class="nt">&lt;/shipToZip&gt;</span>
        <span class="nt">&lt;shipToStreet2</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/shippingDetails&gt;</span>
    <span class="nt">&lt;OrderDetails&gt;</span>
      ... 
    <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/callPagamS2S&gt;</span>
</code></pre>
<p>First we describe the mandatory attributes. </p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Data Type</th>
<th>max length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong> </td>
<td>shopLogin value</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong> </td>
<td>currency code</td>
<td>number</td>
<td>3</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td>the amount of the transaction</td>
<td>numeric</td>
<td>9</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>30</td>
</tr>
</tbody></table>

<p>Depending on the payment method, you can choose to send <strong>Credit Card</strong> data: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Data Type</th>
<th>max length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">cardNumber</code></strong></td>
<td>card account number</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryMonth</code></strong></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryYear</code></strong></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
</tbody></table>

<p>Or a <strong>token</strong>: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Data Type</th>
<th>max length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">tokenValue</code></strong></td>
<td>String containing the <code class="prettyprint">token</code> value returned by Gestpay. <br/> In case of <code class="prettyprint">PayPalBillingAgreement</code> this token value is the token returned by PayPal during the Billing Agreements.</td>
<td>string</td>
<td>25</td>
</tr>
</tbody></table>

<aside class="notice">You must use exactly one among <strong>Credit Card data</strong> and <strong>Token value</strong>.</aside>

<p>The following features may be optionally assigned:   </p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Data Type</th>
<th>max length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td>buyer’s e-mail address. Using <code class="prettyprint">:NOSEND:</code> before the email address, it&rsquo; s possible to pass the email information but avoid to send an email to the buyer.</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td>buyer’s name</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code></td>
<td>A string containing optional customised parameters. See <a href="#customInfo">customInfo</a> section for more details.</td>
<td>string</td>
<td>1000</td>
</tr>
<tr>
<td><code class="prettyprint">cvv</code></td>
<td>security code of the card. Refer to <a href="http://docs.gestpay.it/adv/cvv-field-handling.html">this page</a> to enable and use it.</td>
<td>string</td>
<td>4</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td>language to use for e-mails to the buyer</td>
<td>number</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">PARes</code>        </td>
<td>encrypted string returned by Issuer (for 3D-Secure   transactions only. See <a href="http://docs.gestpay.it/adv/3dsecure-transactions.html">3D-secure transactions</a> for more details.) </td>
<td>string</td>
<td>4096</td>
</tr>
<tr>
<td><code class="prettyprint">transKey</code></td>
<td>transaction ID value for 3D-Secure transactions. See <a href="http://docs.gestpay.it/adv/3dsecure-transactions.html">3D-secure transactions</a> for more details.</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><code class="prettyprint">requestToken</code></td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token any other value for Custom  Token</td>
<td>string</td>
<td>25</td>
</tr>
<tr>
<td><code class="prettyprint">clientIP</code></td>
<td>For PayPal Billing Agreements it is required only in &ldquo;one click&rdquo; mode transaction. <br> For AMEX transaction not in Euro, in this field the merchant could provide the client IP address to activate the Enhanced Authorization AAV.<br><strong>Mandatory if you use RiskiFied with S2S.</strong></td>
<td>string</td>
<td>45</td>
</tr>
<tr>
<td><code class="prettyprint">itemType</code></td>
<td>Item Category: <code class="prettyprint">digital</code>/<code class="prettyprint">physical</code> (If <code class="prettyprint">physical</code> the <code class="prettyprint">ShippingDetails</code> have to be filled)</td>
<td>string</td>
<td>250</td>
</tr>
<tr>
<td><code class="prettyprint">recurrent</code></td>
<td>true if it&rsquo;s a recurrent payment, false if not.</td>
<td>boolean</td>
<td>5</td>
</tr>
<tr>
<td><code class="prettyprint">shippingDetails</code></td>
<td>contains the shipping address. Used for <a href="http://docs.gestpay.it/oth/paypal.html">paypal seller protection</a>.</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#orderdetails"><code class="prettyprint">OrderDetails</code></a></td>
<td>contains every other info needed to handle the payment. It is used by  Gestpay Guaranteed Payment.</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<ul>
<li>children of <code class="prettyprint">ShippingDetails</code> :</li>
</ul>

<table><thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shipToName</code></td>
<td>shipping name</td>
<td>string</td>
<td>32</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet</code></td>
<td>shipping address</td>
<td>string</td>
<td>100</td>
</tr>
<tr>
<td><code class="prettyprint">shipToState</code> </td>
<td>shipping state (see <a href="#paypal-state-amp-province-codes">Paypal State Codes</a> table)</td>
<td>string</td>
<td>40</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCountryCode</code></td>
<td>shipping country code (see <a href="#paypal-country-codes">Paypal Country Codes</a> table)</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">shipToZip</code></td>
<td>the shipping Zip</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet2</code></td>
<td>an additional field for the shipping  address</td>
<td>string</td>
<td>200</td>
</tr>
</tbody></table>

<h3 id="response-fields">Response fields</h3>

<blockquote>
<p>response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
  <span class="nt">&lt;TransactionType&gt;</span>PAGAM<span class="nt">&lt;/TransactionType&gt;</span>
  <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
  <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-0001<span class="nt">&lt;/ShopTransactionID&gt;</span>
  <span class="nt">&lt;BankTransactionID&gt;</span>65<span class="nt">&lt;/BankTransactionID&gt;</span>
  <span class="nt">&lt;AuthorizationCode&gt;</span>365530<span class="nt">&lt;/AuthorizationCode&gt;</span>
  <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
  <span class="nt">&lt;Amount&gt;</span>24.21<span class="nt">&lt;/Amount&gt;</span>
  <span class="nt">&lt;Country&gt;</span>US<span class="nt">&lt;/Country&gt;</span>
  <span class="nt">&lt;Buyer&gt;</span>
    <span class="nt">&lt;BuyerName&gt;</span>John Fitzgerald Kennedy<span class="nt">&lt;/BuyerName&gt;</span>
    <span class="nt">&lt;BuyerEmail&gt;</span>johnny.kennedy@usa.com<span class="nt">&lt;/BuyerEmail&gt;</span>
  <span class="nt">&lt;/Buyer&gt;</span>
  <span class="nt">&lt;CustomInfo/&gt;</span>
  <span class="nt">&lt;TDLevel/&gt;</span>
  <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
  <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
  <span class="nt">&lt;AlertCode/&gt;</span>
  <span class="nt">&lt;AlertDescription/&gt;</span>
  <span class="nt">&lt;TransactionKey&gt;</span>579428899<span class="nt">&lt;/TransactionKey&gt;</span>
  <span class="nt">&lt;VbV&gt;</span>
    <span class="nt">&lt;VbVFlag&gt;</span>KO<span class="nt">&lt;/VbVFlag&gt;</span>
    <span class="nt">&lt;VbVBuyer/&gt;</span>
    <span class="nt">&lt;VbVRisp/&gt;</span>
  <span class="nt">&lt;/VbV&gt;</span>
  <span class="nt">&lt;MaskedPAN&gt;</span>40L76FDIEFMH1112<span class="nt">&lt;/MaskedPAN&gt;</span>
  <span class="nt">&lt;PaymentMethod&gt;</span>VISA VBV<span class="nt">&lt;/PaymentMethod&gt;</span>
  <span class="nt">&lt;ProductType&gt;&lt;/ProductType&gt;</span>
  <span class="nt">&lt;CVVPresent&gt;</span>Y<span class="nt">&lt;/CVVPresent&gt;</span>
  <span class="nt">&lt;TOKEN&gt;</span>40L76FDIEFMH1112<span class="nt">&lt;/TOKEN&gt;</span>
  <span class="nt">&lt;TokenExpiryMonth&gt;&lt;/TokenExpiryMonth&gt;</span>
  <span class="nt">&lt;TokenExpiryYear&gt;&lt;/TokenExpiryYear&gt;</span>
  <span class="nt">&lt;PayPalFee&gt;&lt;/PayPalFee&gt;</span>
  <span class="nt">&lt;RiskResponseCode&gt;</span>approved<span class="nt">&lt;/RiskResponseCode&gt;</span>
  <span class="nt">&lt;RiskResponseDescription&gt;</span>the transaction is approved<span class="nt">&lt;/RiskResponseDescription&gt;</span>
<span class="nt">&lt;/GestPayS2S&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">PAGAM</code> in response to <code class="prettyprint">CallPagamS2S</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td>Returns transaction result with <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionID</code></td>
<td>shop transaction ID value</td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>code given by bank to transaction</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCode</code></td>
<td>authorisation code</td>
</tr>
<tr>
<td><code class="prettyprint">Currency</code></td>
<td><a href="#currency-codes">currency code</a></td>
</tr>
<tr>
<td><code class="prettyprint">Country</code></td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">CustomInfo</code></td>
<td>custom parameters, if passed to the request</td>
</tr>
<tr>
<td><code class="prettyprint">BuyerType</code></td>
<td>Returns address name and e-mail of thebuyer divided as follows: <br> <ul><li><code class="prettyprint">BuyerEmail</code>: Returns the e-mail of the buyer</li><li><code class="prettyprint">BuyerName</code>: Returns the name of the buyer</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>a code related to the transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>the description connected to the ErrorCode value</td>
</tr>
<tr>
<td><code class="prettyprint">AlertCode</code></td>
<td>the violation code of the risk management criteria. See <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management</a> for an accurate description.</td>
</tr>
<tr>
<td><code class="prettyprint">AlertDescription</code></td>
<td>the description connected to the AlertCode value. See <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management</a> for an accurate description.</td>
</tr>
<tr>
<td><code class="prettyprint">Amount</code></td>
<td>the amount of the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">TransKey</code></td>
<td>transaction ID value for 3D-Secure transactions</td>
</tr>
<tr>
<td><code class="prettyprint">VBV</code></td>
<td>Returns the values for 3D-Secure as follows: <br><ul><li><code class="prettyprint">VbVFlag</code>: 3D-secure flag (<code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>)</li><li><code class="prettyprint">VbVBuyer</code>:returns the flag Full Verified by Visa transaction</li><li><code class="prettyprint">VbVRisp</code>: Returns the encrypted string obtained by 3D-Secure directory</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">MaskedPAN</code></td>
<td>this field returns a token (to not confuse with <code class="prettyprint">TOKEN</code>) that should not be stored or used as a credit card token. With this parameter the merchant can assess some risk management analisys, for example he can check if the same <code class="prettyprint">MaskedPAN</code> has already done some purchases or is involved in frauds.</td>
</tr>
<tr>
<td><code class="prettyprint">PaymentMethod</code></td>
<td>the credit card circuit / payment system used</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td>can be <code class="prettyprint">Credit</code>, <code class="prettyprint">Debit</code>, or empty.</td>
</tr>
<tr>
<td><code class="prettyprint">CVVPresent</code></td>
<td><code class="prettyprint">Y</code> if the CVV is present, <code class="prettyprint">N</code> if not.</td>
</tr>
<tr>
<td><code class="prettyprint">TOKEN</code> </td>
<td>contains a token that represents the credit card number. See <a href="http://docs.gestpay.it/rec/handling-subscriptions.html">Handling Subscriptions</a> in the docs.</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryMonth</code> </td>
<td>the token exiration month</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryYear</code> </td>
<td>the token expiration year</td>
</tr>
<tr>
<td><code class="prettyprint">PayPalFee</code></td>
<td>the fee owed to paypal.</td>
</tr>
<tr>
<td><code class="prettyprint">TDLevel</code></td>
<td>Level of authentication for 3D-Secure transactions. <code class="prettyprint">FULL</code> or <code class="prettyprint">HALF</code></td>
</tr>
<tr>
<td><code class="prettyprint">RiskResponseCode</code></td>
<td>Risk Fraud Score of the transaction, given by <a href="http://docs.gestpay.it/sec/gestpay-guaranteed-payment.html"> Gestpay Guaranteed Payment</a>. Possible values are: <ul><li><code class="prettyprint">created</code>: transaction has been received by the Gestpay Guaranteed Payment</li><li><code class="prettyprint">submitted</code>: transaction is under review</li><li><code class="prettyprint">approved</code>: transaction approved by  Gestpay Guaranteed Payment</li><li><code class="prettyprint">declined</code>: transaction not approved by  Gestpay Guaranteed Payment</li><li><code class="prettyprint">captured</code>: For <em>Select&amp;Submit</em> plan, <code class="prettyprint">captured</code> is returned for transactions that are not marked for review.</li><li><strong>any other value</strong> is an error returned by  Gestpay Guaranteed Payment.</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">RiskResponseDescription</code></td>
<td>Risk Description of the RiskResponseCode</td>
</tr>
</tbody></table>

<aside class="notice">other fields that are undocumented are unused. This applies also to fields described in the old version of the documentation.</aside>

          <h2 id="callsettles2s">CallSettleS2S</h2>

<p>This is the financial confirmation operation which may follow a positive authorisation.</p>

<p>It exists only for merchants with a <a href="http://docs.gestpay.it/gs/how-gestpay-works.html#moto--what-happens-after-a-transaction">M.O.T.O.</a> configuration when a separation between the authorisation and the settlement phase is anticipated.</p>

<p>Merchants can use this method to settle the transaction. <strong>Since it&rsquo;s possible to settle only a part of the amount, the amount value has to be passed</strong>. </p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callSettleS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>55.00<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransID&gt;</span>MYSHOP-00142<span class="nt">&lt;/shopTransID&gt;</span>
  <span class="nt">&lt;bankTransID&gt;</span>159247522<span class="nt">&lt;/bankTransID&gt;</span>
  <span class="nt">&lt;FullFillment&gt;</span>
    <span class="nt">&lt;FullFillmentlst&gt;</span>
      <span class="nt">&lt;FullfillmentDetail&gt;</span>
        <span class="nt">&lt;Status&gt;</span>success<span class="nt">&lt;/Status&gt;</span>
        <span class="nt">&lt;TrackingCompany&gt;</span>Shippers, Inc.<span class="nt">&lt;/TrackingCompany&gt;</span>
        <span class="nt">&lt;TrackingNumbers&gt;</span>GD-52563-2233-4422<span class="nt">&lt;/TrackingNumbers&gt;</span>
        <span class="nt">&lt;TrackingUrls&gt;</span>www.shippers.com/track?id=GD-52563-2233-4422<span class="nt">&lt;/TrackingUrls&gt;</span>
        <span class="nt">&lt;Message&gt;</span>items in stock<span class="nt">&lt;/Message&gt;</span>
        <span class="nt">&lt;Receipt&gt;</span>s.f. 351<span class="nt">&lt;/Receipt&gt;</span>
        <span class="nt">&lt;ProductDetails&gt;</span>
          <span class="nt">&lt;ProductCode&gt;</span>223311<span class="nt">&lt;/ProductCode&gt;</span>
          <span class="nt">&lt;SKU&gt;</span>ART-244742-1231<span class="nt">&lt;/SKU&gt;</span>
          <span class="nt">&lt;Name&gt;</span>Unicorn<span class="nt">&lt;/Name&gt;</span>
          <span class="nt">&lt;Description&gt;</span>a horse with a horn<span class="nt">&lt;/Description&gt;</span>
          <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span>
          <span class="nt">&lt;Price&gt;</span>3500<span class="nt">&lt;/Price&gt;</span>
          <span class="nt">&lt;UnitPrice&gt;</span>3500<span class="nt">&lt;/UnitPrice&gt;</span>
          <span class="nt">&lt;Type&gt;</span>horse<span class="nt">&lt;/Type&gt;</span>
          <span class="nt">&lt;Vat&gt;</span>22<span class="nt">&lt;/Vat&gt;</span>
          <span class="nt">&lt;Discount&gt;</span>0<span class="nt">&lt;/Discount&gt;</span>
          <span class="nt">&lt;RequiresShipping&gt;</span>true<span class="nt">&lt;/RequiresShipping&gt;</span>
          <span class="nt">&lt;Condition&gt;</span>new<span class="nt">&lt;/Condition&gt;</span>
          <span class="nt">&lt;Seller&gt;</span>Flying Horses<span class="nt">&lt;/Seller&gt;</span>
          <span class="nt">&lt;Category&gt;</span>Horse<span class="nt">&lt;/Category&gt;</span>
          <span class="nt">&lt;SubCategory&gt;</span>Special Horse<span class="nt">&lt;/SubCategory&gt;</span>
          <span class="nt">&lt;Brand&gt;</span>Custom<span class="nt">&lt;/Brand&gt;</span>
          <span class="nt">&lt;DeliveryAt&gt;</span>19/05/2016<span class="nt">&lt;/DeliveryAt&gt;</span>
        <span class="nt">&lt;/ProductDetails&gt;</span>
      <span class="nt">&lt;/FullfillmentDetail&gt;</span>
    <span class="nt">&lt;/FullFillmentlst&gt;</span>
  <span class="nt">&lt;/FullFillment&gt;</span>
<span class="nt">&lt;/callSettleS2S&gt;</span>
</code></pre>
<p>Parameters in <strong>bold</strong> are mandatory.  </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td>amount</td>
<td>  number</td>
<td>9</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td><a href="#currency-codes">currency code</a></td>
<td>number</td>
<td>3</td>
</tr>
<tr>
<td><strong><code class="prettyprint">bankTransID</code></strong></td>
<td>BankTransactionID assigned to the transaction</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransID</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">FullFillment</code></td>
<td>An object describing the final fulfillment status of an order.</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<aside class="active">
A transaction is uniquely identified by <code>shopLogin</code> + <code>bankTransID</code>. However, if the <code>shopTransID</code> is unique, the merchant can send just <code>shopLogin</code> + <code>shopTransID</code>. 
</aside>

<p><code class="prettyprint">FullFillment</code> tag must be filled if you are using <a href="http://docs.gestpay.it/sec/gestpay-guaranteed-payment.html"> Gestpay Guaranteed Payment</a>, an anti fraud evaluating system. If you are not using it, you can skip this. </p>

<p>When you <em>settle</em> a payment, Gestpay Guaranteed Payment wants to be notified that an existing order has been fulfilled, both the success and error case. </p>

<p><code class="prettyprint">FillFillment</code> contains a <code class="prettyprint">FullFillmentlst</code> that contains one or more <code class="prettyprint">FullfillmentDetail</code>, whose fields are: </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Status</code></td>
<td><ul><li><code class="prettyprint">success</code>: the fulfillment was successful.</li><li><code class="prettyprint">cancelled</code>: the fulfillment was cancelled.</li><li><code class="prettyprint">error</code>: there was an error with the fulfillment request.</li><li><code class="prettyprint">failure</code>: the fulfillment request failed.</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">TrackingCompany</code></td>
<td>the name of the shipping company</td>
</tr>
<tr>
<td><code class="prettyprint">TrackingNumbers</code></td>
<td>A list of shipping numbers, provided by the shipping company.</td>
</tr>
<tr>
<td><code class="prettyprint">TrackingUrls</code></td>
<td>The URLs to track the fulfillment.</td>
</tr>
<tr>
<td><code class="prettyprint">Message</code></td>
<td>Additional textual description regarding the fulfillment status.</td>
</tr>
<tr>
<td><code class="prettyprint">Receipt</code> </td>
<td>Information about the Receipt</td>
</tr>
<tr>
<td><code class="prettyprint">ProductDetails</code></td>
<td>container object that contains info about the fulfilled item.</td>
</tr>
</tbody></table>

<p>Here is a description of the children of <code class="prettyprint">ProductDetails</code>: </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProductCode</code></td>
<td>Article’s product Code</td>
</tr>
<tr>
<td><code class="prettyprint">SKU</code></td>
<td>Article’s Stock Keeping Unit</td>
</tr>
<tr>
<td><code class="prettyprint">Name</code></td>
<td>Article’s name</td>
</tr>
<tr>
<td><code class="prettyprint">Description</code></td>
<td>Article’s description</td>
</tr>
<tr>
<td><code class="prettyprint">Quantity</code></td>
<td>The number of products</td>
</tr>
<tr>
<td><code class="prettyprint">Price</code></td>
<td>Article’s price</td>
</tr>
<tr>
<td><code class="prettyprint">UnitPrice</code></td>
<td>Article’s Unit price</td>
</tr>
<tr>
<td><code class="prettyprint">Type</code></td>
<td>The type of article: <code class="prettyprint">digital</code> , <code class="prettyprint">downloadable</code>,  <code class="prettyprint">physical</code>,<code class="prettyprint">composite</code>, <code class="prettyprint">event</code>, <code class="prettyprint">travel</code></td>
</tr>
<tr>
<td><code class="prettyprint">Vat</code></td>
<td>Value-Added Tax (the value of the tax)</td>
</tr>
<tr>
<td><code class="prettyprint">Discount</code></td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">RequiresShipping</code></td>
<td>boolean, States whether or not the fulfillment requires shipping. This field is important for merchants dealing with digital goods.</td>
</tr>
<tr>
<td><code class="prettyprint">Condition</code></td>
<td>Description of the physical condition of the item, mostly relevant for used items.</td>
</tr>
<tr>
<td><code class="prettyprint">Seller</code></td>
<td>Details about the seller of the item, relevant for marketplace orders.</td>
</tr>
<tr>
<td><code class="prettyprint">Category</code></td>
<td>The category of the item. For event tickets: the category of the event.</td>
</tr>
<tr>
<td><code class="prettyprint">SubCategory</code></td>
<td>The sub-category of the item. For event tickets: the sub-category of the event.</td>
</tr>
<tr>
<td><code class="prettyprint">Brand</code></td>
<td>The brand name of the item.</td>
</tr>
<tr>
<td><code class="prettyprint">DeliveryAt</code></td>
<td>The planned delivery date of the product or item.</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callSettleS2SResponse</span> <span class="na">xmlns=</span><span class="s">"https://ecomms2s.sella.it/"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;callSettleS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S&gt;</span>
      <span class="nt">&lt;TransactionType&gt;</span>Settle<span class="nt">&lt;/TransactionType&gt;</span>
      <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
      <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-00142<span class="nt">&lt;/ShopTransactionID&gt;</span>
      <span class="nt">&lt;BankTransactionID&gt;</span>159247522<span class="nt">&lt;/BankTransactionID&gt;</span>
      <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
      <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
  <span class="nt">&lt;/callSettleS2SResult&gt;</span>
<span class="nt">&lt;/callSettleS2SResponse&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">CallSettleS2S</code>, the value will be <code class="prettyprint">Settle</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="calldeletes2s">CallDeleteS2S</h2>

<p>This operation deletes an authorized transaction. </p>

<p>It exists only for merchants with a <a href="http://docs.gestpay.it/gs/how-gestpay-works.html#moto--what-happens-after-a-transaction">M.O.T.O.</a> configuration when a separation between the authorisation and the settlement phase is anticipated.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-4838<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;bankTransactionId&gt;</span>334488931<span class="nt">&lt;/bankTransactionId&gt;</span>
  <span class="nt">&lt;CancelReason&gt;</span>potential fraud<span class="nt">&lt;/CancelReason&gt;</span>
<span class="nt">&lt;/callDeleteS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in bold.</p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">bankTransactionId</code></strong></td>
<td>ID of the transaction assigned by Gestpay</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">CancelReason</code></td>
<td>free text of cancel reason.For  Gestpay Guaranteed Payment users, this field is mandatory.</td>
<td>string</td>
<td>50</td>
</tr>
</tbody></table>

<aside class="active">
A transaction is uniquely identified by <code>shopLogin</code> + <code>bankTransactionId</code>. However, if the <code>shopTransactionId</code> is unique, the merchant can send just <code>shopLogin</code> + <code>shopTransactionId</code>. 
</aside>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteS2SResponse</span> <span class="na">xmlns=</span><span class="s">"https://ecomms2s.sella.it/"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;callDeleteS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S&gt;</span>
      <span class="nt">&lt;TransactionType&gt;</span>Delete<span class="nt">&lt;/TransactionType&gt;</span>
      <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
      <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-00142<span class="nt">&lt;/ShopTransactionID&gt;</span>
      <span class="nt">&lt;BankTransactionID&gt;</span>159247522<span class="nt">&lt;/BankTransactionID&gt;</span>
      <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
      <span class="nt">&lt;ErrorDescription&gt;</span>Transazione ritirata<span class="nt">&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
  <span class="nt">&lt;/callSettleS2SResult&gt;</span>
<span class="nt">&lt;/callSettleS2SResponse&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">CallDeleteS2S</code>, the value will be <code class="prettyprint">Delete</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callrefunds2s">CallRefundS2S</h2>

<p>Merchants can use this method to perform a partial or complete transaction amount refund.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callRefundS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
  <span class="nt">&lt;amount&gt;</span>55.00<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-00142<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;bankTransactionId&gt;</span>159247522<span class="nt">&lt;/bankTransactionId&gt;</span>
  <span class="nt">&lt;RefundReason&gt;</span>item our of stock<span class="nt">&lt;/RefundReason&gt;</span>
  <span class="nt">&lt;chargeBackFraud&gt;</span>N<span class="nt">&lt;/chargeBackFraud&gt;</span>
  <span class="nt">&lt;OrderDetail&gt;</span>
    <span class="nt">&lt;ProductDetails&gt;</span>
      ...
    <span class="nt">&lt;/ProductDetails&gt;</span>
  <span class="nt">&lt;/OrderDetail&gt;</span>
<span class="nt">&lt;/callRefundS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in <strong>bold</strong>.</p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">bankTransactionId</code></strong></td>
<td>ID of the transaction assigned by Gestpay</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td>the amount to refund</td>
<td>number</td>
<td>9</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td><a href="#currency-codes">currency code</a></td>
<td>numeric</td>
<td>3</td>
</tr>
<tr>
<td><code class="prettyprint">RefundReason</code></td>
<td>a free-text reason for the refund. Used with fraud protection.</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">chargeBackFraud</code></td>
<td>Flag for risk: <ul><li><code class="prettyprint">Y</code> - chargeback for fraud</li><li><code class="prettyprint">N</code> - chargeback not for a fraud</li></ul></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">orderDetail.ProductDetails</code></td>
<td>in case you are using <em>Klarna</em>, fill this fields with info about the products that are refunded. A description of this field is in <a href="#orderdetails">OrderDetails</a>.</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<aside class="active">
A transaction is uniquely identified by <code>shopLogin</code> + <code>bankTransactionId</code>. However, if the <code>shopTransactionId</code> is unique, the merchant can send just <code>shopLogin</code> + <code>shopTransactionId</code>. 
</aside>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callRefundS2SResponse</span> <span class="na">xmlns=</span><span class="s">"https://ecomms2s.sella.it/"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;callRefundS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S&gt;</span>
      <span class="nt">&lt;TransactionType&gt;</span>Refund<span class="nt">&lt;/TransactionType&gt;</span>
      <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
      <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-00142<span class="nt">&lt;/ShopTransactionID&gt;</span>
      <span class="nt">&lt;BankTransactionID&gt;</span>159247522<span class="nt">&lt;/BankTransactionID&gt;</span>
      <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
      <span class="nt">&lt;ErrorDescription/&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
  <span class="nt">&lt;/callRefundS2SResult&gt;</span>
<span class="nt">&lt;/callRefundS2SResponse&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">CallRefundS2S</code>, the value will be <code class="prettyprint">Refund</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callreadtrxs2s"> CallReadTrxS2S</h2>

<p>This method will return the transaction status. </p>

<p>This method can be called with a mandatory <code class="prettyprint">shopLogin</code>, then it&rsquo;s possible to pass <code class="prettyprint">shopTransactionId</code> or <code class="prettyprint">bankTransactionId</code> or both. If only <code class="prettyprint">shopLogin</code> and <code class="prettyprint">shopTransactionId</code> are passed, it’s mandatory that the last one is unique.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Example request: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callReadTrxS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-4838<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;bankTransactionId&gt;</span>334488931<span class="nt">&lt;/bankTransactionId&gt;</span>
<span class="nt">&lt;/callReadTrxS2S&gt;</span>
</code></pre>
<p>Parameters in <strong>bold</strong> are mandatory.</p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">bankTransactionId</code></strong></td>
<td>ID of the transaction assigned by Gestpay</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
</tbody></table>

<aside class="active">
A transaction is uniquely identified by <code>shopLogin</code> + <code>bankTransactionId</code>. However, if the <code>shopTransactionId</code> is unique, the merchant can just send <code>shopLogin</code> + <code>shopTransactionId</code>. 
</aside>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callReadTrxS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>QUERYTX<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;TransactionState&gt;</span>CAN<span class="nt">&lt;/TransactionState&gt;</span>
    <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-4838<span class="nt">&lt;/ShopTransactionID&gt;</span>
    <span class="nt">&lt;BankTransactionID&gt;</span>334488931<span class="nt">&lt;/BankTransactionID&gt;</span>
    <span class="nt">&lt;AuthorizationCode&gt;</span>971773<span class="nt">&lt;/AuthorizationCode&gt;</span>
    <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
    <span class="nt">&lt;Country&gt;</span>ITALIA<span class="nt">&lt;/Country&gt;</span>
    <span class="nt">&lt;Company&gt;</span>MASTERCARD SECURECODE<span class="nt">&lt;/Company&gt;</span>
    <span class="nt">&lt;TDLevel&gt;</span>FULL<span class="nt">&lt;/TDLevel&gt;</span>
    <span class="nt">&lt;Events&gt;</span>
      <span class="nt">&lt;event&gt;</span>
        <span class="nt">&lt;eventtype&gt;</span>AUT<span class="nt">&lt;/eventtype&gt;</span>
        <span class="nt">&lt;eventamount&gt;</span>0.10<span class="nt">&lt;/eventamount&gt;</span>
        <span class="nt">&lt;eventdate&gt;</span>19/08/16 16:13:14<span class="nt">&lt;/eventdate&gt;</span>
      <span class="nt">&lt;/event&gt;</span>
      <span class="nt">&lt;event&gt;</span>
        <span class="nt">&lt;eventtype&gt;</span>CAN<span class="nt">&lt;/eventtype&gt;</span>
        <span class="nt">&lt;eventamount&gt;</span>0.10<span class="nt">&lt;/eventamount&gt;</span>
        <span class="nt">&lt;eventdate&gt;</span>20/08/16 00:13:57<span class="nt">&lt;/eventdate&gt;</span>
      <span class="nt">&lt;/event&gt;</span>
    <span class="nt">&lt;/Events&gt;</span>
    <span class="nt">&lt;Buyer&gt;</span>
      <span class="nt">&lt;BuyerName/&gt;</span>
      <span class="nt">&lt;BuyerEmail/&gt;</span>
    <span class="nt">&lt;/Buyer&gt;</span>
    <span class="nt">&lt;RISK&gt;</span>
      <span class="nt">&lt;RiskResponseCode&gt;</span>approved<span class="nt">&lt;RiskResponseCode&gt;</span>
      <span class="nt">&lt;RiskResponseDescription/&gt;</span>
    <span class="nt">&lt;/RISK&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription&gt;</span>Transaction correctly processed<span class="nt">&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;AlertCode/&gt;</span>
    <span class="nt">&lt;AlertDescription/&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callReadTrxS2SResult&gt;</span>
</code></pre>
<blockquote>
<p>Response example for Amazon Pay </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callReadTrxS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
      <span class="nt">&lt;TransactionType&gt;</span>QUERYTX<span class="nt">&lt;/TransactionType&gt;</span>
      <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
      <span class="nt">&lt;TransactionState&gt;</span>MOV<span class="nt">&lt;/TransactionState&gt;</span>
      <span class="nt">&lt;ShopTransactionID&gt;</span>af22<span class="nt">&lt;/ShopTransactionID&gt;</span>
      <span class="nt">&lt;BankTransactionID&gt;</span>117<span class="nt">&lt;/BankTransactionID&gt;</span>
      <span class="nt">&lt;AuthorizationCode&gt;</span>008152<span class="nt">&lt;/AuthorizationCode&gt;</span>
      <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
      <span class="nt">&lt;Country/&gt;</span>
      <span class="nt">&lt;Company&gt;</span>AMAZONPAY<span class="nt">&lt;/Company&gt;</span>
      <span class="nt">&lt;TDLevel/&gt;</span>
      <span class="nt">&lt;Events&gt;</span>
        <span class="nt">&lt;event&gt;</span>
            <span class="nt">&lt;eventtype&gt;</span>AUT<span class="nt">&lt;/eventtype&gt;</span>
            <span class="nt">&lt;eventamount&gt;</span>10.00<span class="nt">&lt;/eventamount&gt;</span>
            <span class="nt">&lt;eventdate&gt;</span>13/11/17 11:32:45<span class="nt">&lt;/eventdate&gt;</span>
        <span class="nt">&lt;/event&gt;</span>
        <span class="nt">&lt;event&gt;</span>
            <span class="nt">&lt;eventtype&gt;</span>MOV<span class="nt">&lt;/eventtype&gt;</span>
            <span class="nt">&lt;eventamount&gt;</span>10.00<span class="nt">&lt;/eventamount&gt;</span>
            <span class="nt">&lt;eventdate&gt;</span>13/11/17 11:32:45<span class="nt">&lt;/eventdate&gt;</span>
        <span class="nt">&lt;/event&gt;</span>
      <span class="nt">&lt;/Events&gt;</span>
      <span class="nt">&lt;Buyer&gt;</span>
        <span class="nt">&lt;BuyerName/&gt;</span>
        <span class="nt">&lt;BuyerEmail/&gt;</span>
      <span class="nt">&lt;/Buyer&gt;</span>
      <span class="nt">&lt;RISK&gt;</span>
        <span class="nt">&lt;RiskResponseCode/&gt;</span>
        <span class="nt">&lt;RiskResponseDescription/&gt;</span>
      <span class="nt">&lt;/RISK&gt;</span>
      <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
      <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
      <span class="nt">&lt;AlertCode/&gt;</span>
      <span class="nt">&lt;AlertDescription/&gt;</span>

      <span class="c">&lt;!-- Here you'll see buyer' 
          shipping and billing address 
          for Amazon Pay --&gt;</span>
      <span class="nt">&lt;OrderReferenceDetails&gt;</span>
        <span class="nt">&lt;OrderReferenceStatus&gt;</span>
            <span class="nt">&lt;State&gt;</span>Draft<span class="nt">&lt;/State&gt;</span>
        <span class="nt">&lt;/OrderReferenceStatus&gt;</span>
        <span class="nt">&lt;OrderLanguage&gt;</span>it-IT<span class="nt">&lt;/OrderLanguage&gt;</span>
        <span class="nt">&lt;Destination&gt;</span>
            <span class="nt">&lt;DestinationType&gt;</span>Physical<span class="nt">&lt;/DestinationType&gt;</span>
            <span class="nt">&lt;PhysicalDestination&gt;</span>
              <span class="nt">&lt;StateOrRegion&gt;</span>BI<span class="nt">&lt;/StateOrRegion&gt;</span>
              <span class="nt">&lt;Phone&gt;</span>33333333<span class="nt">&lt;/Phone&gt;</span>
              <span class="nt">&lt;City&gt;</span>BIELLA<span class="nt">&lt;/City&gt;</span>
              <span class="nt">&lt;CountryCode&gt;</span>IT<span class="nt">&lt;/CountryCode&gt;</span>
              <span class="nt">&lt;PostalCode&gt;</span>13900<span class="nt">&lt;/PostalCode&gt;</span>
              <span class="nt">&lt;Name&gt;</span>Marco Rossi<span class="nt">&lt;/Name&gt;</span>
              <span class="nt">&lt;AddressLine1&gt;</span>via Gobe 15<span class="nt">&lt;/AddressLine1&gt;</span>
            <span class="nt">&lt;/PhysicalDestination&gt;</span>
        <span class="nt">&lt;/Destination&gt;</span>
        <span class="nt">&lt;ExpirationTimestamp&gt;</span>2018-05-13T07:24:02.186Z<span class="nt">&lt;/ExpirationTimestamp&gt;</span>
        <span class="nt">&lt;IdList/&gt;</span>
        <span class="nt">&lt;SellerOrderAttributes&gt;</span>
            <span class="nt">&lt;SellerOrderId&gt;</span>4354395804398dkfjlhsdfk<span class="nt">&lt;/SellerOrderId&gt;</span>
        <span class="nt">&lt;/SellerOrderAttributes&gt;</span>
        <span class="nt">&lt;OrderTotal&gt;</span>
            <span class="nt">&lt;CurrencyCode&gt;</span>EUR<span class="nt">&lt;/CurrencyCode&gt;</span>
            <span class="nt">&lt;Amount&gt;</span>10.00<span class="nt">&lt;/Amount&gt;</span>
        <span class="nt">&lt;/OrderTotal&gt;</span>
        <span class="nt">&lt;Buyer&gt;</span>
            <span class="nt">&lt;Name&gt;</span>Ale<span class="nt">&lt;/Name&gt;</span>
            <span class="nt">&lt;Email&gt;</span>marco.rossi@email.it<span class="nt">&lt;/Email&gt;</span>
        <span class="nt">&lt;/Buyer&gt;</span>
        <span class="nt">&lt;ReleaseEnvironment&gt;</span>Sandbox<span class="nt">&lt;/ReleaseEnvironment&gt;</span>
        <span class="nt">&lt;AmazonOrderReferenceId&gt;</span>S02-0319513-4657042<span class="nt">&lt;/AmazonOrderReferenceId&gt;</span>
        <span class="nt">&lt;CreationTimestamp&gt;</span>2017-11-14T07:24:02.186Z<span class="nt">&lt;/CreationTimestamp&gt;</span>
        <span class="nt">&lt;BillingAddress&gt;</span>
            <span class="nt">&lt;PhysicalAddress&gt;</span>
              <span class="nt">&lt;City&gt;</span>Neunkirchen<span class="nt">&lt;/City&gt;</span>
              <span class="nt">&lt;CountryCode&gt;</span>DE<span class="nt">&lt;/CountryCode&gt;</span>
              <span class="nt">&lt;PostalCode&gt;</span>66538<span class="nt">&lt;/PostalCode&gt;</span>
              <span class="nt">&lt;Name&gt;</span>Liam Barker<span class="nt">&lt;/Name&gt;</span>
              <span class="nt">&lt;AddressLine1/&gt;</span>
              <span class="nt">&lt;AddressLine2&gt;</span>Meininger Strasse 58<span class="nt">&lt;/AddressLine2&gt;</span>
            <span class="nt">&lt;/PhysicalAddress&gt;</span>
            <span class="nt">&lt;AddressType&gt;</span>Physical<span class="nt">&lt;/AddressType&gt;</span>
        <span class="nt">&lt;/BillingAddress&gt;</span>
        <span class="nt">&lt;RequestPaymentAuthorization&gt;</span>false<span class="nt">&lt;/RequestPaymentAuthorization&gt;</span>
      <span class="nt">&lt;/OrderReferenceDetails&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
  <span class="nt">&lt;/callReadTrxS2SResult&gt;</span>

</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint"> CallReadTrxS2S</code>, the value will be <code class="prettyprint">QUERYTX</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCode</code></td>
<td>the authorisation code</td>
</tr>
<tr>
<td><code class="prettyprint">Currency</code></td>
<td>the <a href="#currency-codes">currency code</a></td>
</tr>
<tr>
<td><code class="prettyprint">Country</code></td>
<td>the nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">Company</code></td>
<td>the card company: Visa, Mastercard, etc.</td>
</tr>
<tr>
<td><code class="prettyprint">TransactionState</code></td>
<td>the status of the transaction: one of <code class="prettyprint">AUT</code>, <code class="prettyprint">MOV</code>, <code class="prettyprint">CAN</code>, <code class="prettyprint">STO</code>. Follow the link for a <a href="http://docs.gestpay.it/adv/query-transaction-status.html">detailed explanation of transaction statuses</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">AlertCode</code></td>
<td>the violation code of the risk management criteria. See <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management</a> for an accurate description.</td>
</tr>
<tr>
<td><code class="prettyprint">AlertDescription</code></td>
<td>the description connected to the <code class="prettyprint">AlertCode</code> value. See <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management</a> for an accurate description.</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerName</code></td>
<td>Returns the name of the buyer</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerEmail</code></td>
<td>Returns the email of the buyer</td>
</tr>
<tr>
<td><code class="prettyprint">Events</code></td>
<td>contains <code class="prettyprint">event</code> elements. see the next table for more.</td>
</tr>
<tr>
<td><code class="prettyprint">RiskResponseCode</code></td>
<td>Risk Fraud Score of the transaction, given by <a href="http://docs.gestpay.it/sec/gestpay-guaranteed-payment.html"> Gestpay Guaranteed Payment</a>. Possible values are: <ul><li><code class="prettyprint">created</code>: transaction has been received by the Gestpay Guaranteed Payment</li><li><code class="prettyprint">submitted</code>: transaction is under review</li><li><code class="prettyprint">approved</code>: transaction approved by  Gestpay Guaranteed Payment</li><li><code class="prettyprint">declined</code>: transaction not approved by  Gestpay Guaranteed Payment</li><li><code class="prettyprint">captured</code>: For <em>Select&amp;Submit</em> plan, <code class="prettyprint">caputred</code> is returned for transactions that are not marked for review.</li><li><strong>any other value</strong> is an error returned by  Gestpay Guaranteed Payment.</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">RiskResponseDescription</code></td>
<td>Risk Description of the RiskResponseCode</td>
</tr>
<tr>
<td><code class="prettyprint">OrderReferenceDetails</code></td>
<td>Informations about Shipping and Billing addresses,  returned for some payment methods.</td>
</tr>
</tbody></table>

<p>As said, <code class="prettyprint">&lt;Events&gt;</code> can contain one or more <code class="prettyprint">&lt;event&gt;</code> tags. the <code class="prettyprint">&lt;event&gt;</code> tag is composed of: </p>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">eventtype</code></td>
<td>one of <code class="prettyprint">AUT</code>, <code class="prettyprint">MOV</code>, <code class="prettyprint">PRE</code>, <code class="prettyprint">CAN</code>, <code class="prettyprint">REQ</code>, <code class="prettyprint">STO</code>. There will be a node event for each existing event regarding the transaction. Follow the link for a <a href="http://docs.gestpay.it/adv/query-transaction-status.html">detailed explanation of transaction statuses</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">eventamount</code></td>
<td>Relative value of the event</td>
</tr>
<tr>
<td><code class="prettyprint">eventdate</code></td>
<td>event date</td>
</tr>
</tbody></table>

<h4 id="orderreferencedetails"> OrderReferenceDetails</h4>

<p>here we&rsquo;ll describe the most important fields returned by third-party payments. Not all fields are relevant.  </p>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Destination.PhysicalDestination</code></td>
<td>Represents the <strong>address</strong> selected by the buyer through the AddressBook widget.</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress</code></td>
<td>Represents the billing address that is associated with the payment method selected by the buyer in the Wallet widget.</td>
</tr>
<tr>
<td><code class="prettyprint">OrderReferenceStatus</code></td>
<td>Indicates the current status of the order reference. States can be: <code class="prettyprint">Draft</code>, <code class="prettyprint">Open</code>, <code class="prettyprint">Suspended</code>, <code class="prettyprint">Canceled</code>, <code class="prettyprint">Closed</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">OrderLanguage</code></td>
<td>Represents the Language last used, on the Login or Consent screens, by the buyer.</td>
</tr>
<tr>
<td><code class="prettyprint">ExpirationTimestamp</code></td>
<td>The date and time, in UTC, when the order reference will expire and will no longer be valid for authorization requests. In ISO 8601 format.</td>
</tr>
<tr>
<td><code class="prettyprint">SellerOrderAttributes</code></td>
<td>Provides more context about the order represented by this order reference.</td>
</tr>
<tr>
<td><code class="prettyprint">OrderTotal</code></td>
<td>Represents the total amount for this Order Reference object.</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer</code></td>
<td>Provides details about the buyer.</td>
</tr>
<tr>
<td><code class="prettyprint">ReleaseEnvironment</code></td>
<td>Indicates if the order is for a <em>Live</em> (Production) or <em>Sandbox</em> environment.</td>
</tr>
<tr>
<td><code class="prettyprint">AmazonOrderReferenceId</code></td>
<td>The order reference identifier retrieved from the Amazon Button widget.</td>
</tr>
<tr>
<td><code class="prettyprint">CreationTimestamp</code></td>
<td>The date and time, in UTC, when the order reference was created. In ISO 8601 format.</td>
</tr>
</tbody></table>

          <h2 id="callverifycards2s">CallVerifycardS2S</h2>

<p>Merchants can use this method to check the Credit Card. </p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callVerifycardS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>GEST13578<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MY-SHOP1234<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
  <span class="nt">&lt;expMonth&gt;</span>12<span class="nt">&lt;/expMonth&gt;</span>
  <span class="nt">&lt;expYear&gt;</span>21<span class="nt">&lt;/expYear&gt;</span>
  <span class="nt">&lt;CVV2&gt;</span>931<span class="nt">&lt;/CVV2&gt;</span>
<span class="nt">&lt;/callVerifycardS2S&gt;</span>
</code></pre>
<p>Parameters in <strong>bold</strong> are mandatory. </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">cardNumber</code></strong></td>
<td>credit card number</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expMonth</code></strong></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expYear</code></strong></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">CVV2</code></strong></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callVerifycardS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>VerCard<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;Country&gt;</span>Italia<span class="nt">&lt;/Country&gt;</span>
    <span class="nt">&lt;Company&gt;</span>MasterCard<span class="nt">&lt;/Company&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription&gt;&lt;/ErrorDescription&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callVerifycardS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>TransactionType</td>
<td><code class="prettyprint">VerCard</code></td>
</tr>
<tr>
<td>TransactionResult</td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td>ErrorCode</td>
<td>error code</td>
</tr>
<tr>
<td>ErrorDescription</td>
<td>error description</td>
</tr>
<tr>
<td>Country</td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td>Company</td>
<td>card company</td>
</tr>
</tbody></table>

          <h2 id="callcheckcartas2s">callCheckCartaS2S</h2>

<p>Merchants can use this method to check the Credit Card. </p>

<p>It&rsquo;s possible to check with or without verifying the Authorization, setting the flag <code class="prettyprint">withAuth</code>.</p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callCheckCartaS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>GEST13578<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MY-SHOP1234<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="c">&lt;!-- check a card --&gt;</span> 
  <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
  <span class="nt">&lt;expMonth&gt;</span>12<span class="nt">&lt;/expMonth&gt;</span>
  <span class="nt">&lt;expYear&gt;</span>21<span class="nt">&lt;/expYear&gt;</span>
  <span class="nt">&lt;CVV2&gt;</span>931<span class="nt">&lt;/CVV2&gt;</span>
  <span class="c">&lt;!-- alternatively, you can check a token: 
    &lt;tokenValue&gt;ABCD12345678EFGD&lt;/tokenValue&gt;
    --&gt;</span>
    <span class="nt">&lt;withAuth&gt;</span>Y<span class="nt">&lt;/withAuth&gt;</span>
<span class="nt">&lt;/callCheckCartaS2S&gt;</span>
</code></pre>
<p>Parameters in <strong>bold</strong> are mandatory. </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">withAuth</code></strong></td>
<td>tries to authorize the card. <br> <code class="prettyprint">Y</code> on <code class="prettyprint">N</code></td>
<td>string</td>
<td>1</td>
</tr>
</tbody></table>

<p>If you want to check a credit card by credit card number, month and year of expiration, use these fields: </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">cardNumber</code></td>
<td>credit card number</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><code class="prettyprint">expMonth</code></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">expYear</code></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">CVV2</code></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
</tbody></table>

<p>Alternatively, you can use  <code class="prettyprint">tokenValue</code> to check if a token is still valid: </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">tokenValue</code></td>
<td>String containing the <code class="prettyprint">token</code> value returned by Gestpay. <br/> In case of <code class="prettyprint">PayPalBillingAgreement</code> this token value is the token returned by PayPal during the Billing Agreements.</td>
<td>string</td>
<td>25</td>
</tr>
</tbody></table>

<aside class="notice">You must use <strong>exactly one</strong> among <strong>Credit Card data</strong> and <strong>Token value</strong>.</aside>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callCheckCartaS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>CHECKCARD<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;TransactionErrorCode&gt;</span>0<span class="nt">&lt;/TransactionErrorCode&gt;</span>
    <span class="nt">&lt;TransactionErrorDescription&gt;</span>Transaction correctly processed<span class="nt">&lt;/TransactionErrorDescription&gt;</span>
    <span class="nt">&lt;AuthorizationErrorCode&gt;</span>0<span class="nt">&lt;/AuthorizationErrorCode&gt;</span>
    <span class="nt">&lt;AuthorizationResult&gt;</span>KO<span class="nt">&lt;/AuthorizationResult&gt;</span>
    <span class="nt">&lt;AuthorizationCodeDescription&gt;</span>negative balance<span class="nt">&lt;/AuthorizationCodeDescription&gt;</span>
    <span class="nt">&lt;CardCountry&gt;</span>ITALIA<span class="nt">&lt;/CardCountry&gt;</span>
    <span class="nt">&lt;CardCountryCode&gt;</span>380<span class="nt">&lt;/CardCountryCode&gt;</span>
    <span class="nt">&lt;CheckCVV&gt;</span>OK<span class="nt">&lt;/CheckCVV&gt;</span>
    <span class="nt">&lt;CheckCVVDescription&gt;</span>CVV VALID<span class="nt">&lt;/CheckCVVDescription&gt;</span>
    <span class="nt">&lt;IssuerCountry&gt;</span>ITALIA<span class="nt">&lt;/IssuerCountry&gt;</span>
    <span class="nt">&lt;IssuerCountryCode&gt;</span>380<span class="nt">&lt;/IssuerCountryCode&gt;</span>
    <span class="nt">&lt;CompanyDescription&gt;</span>MASTERCARD<span class="nt">&lt;/CompanyDescription&gt;</span>
    <span class="nt">&lt;CompanyCode&gt;</span>3<span class="nt">&lt;/CompanyCode&gt;</span>
    <span class="nt">&lt;Commercial&gt;</span>N<span class="nt">&lt;/Commercial&gt;</span>
    <span class="nt">&lt;ProductDescription&gt;</span>Standard MasterCard® Card<span class="nt">&lt;/ProductDescription&gt;</span>
    <span class="nt">&lt;ProductType&gt;</span>Credit<span class="nt">&lt;/ProductType&gt;</span>
    <span class="nt">&lt;CheckDigit&gt;</span>OK<span class="nt">&lt;/CheckDigit&gt;</span>
    <span class="nt">&lt;CheckDigitDescription&gt;</span>CheckDigit VALID<span class="nt">&lt;/CheckDigitDescription&gt;</span>
    <span class="nt">&lt;CheckDate&gt;</span>OK<span class="nt">&lt;/CheckDate&gt;</span>
    <span class="nt">&lt;CheckDateDescription&gt;</span>DATE VALID<span class="nt">&lt;/CheckDateDescription&gt;</span>
    <span class="nt">&lt;EnrolledCode&gt;</span>Y<span class="nt">&lt;/EnrolledCode&gt;</span>
    <span class="nt">&lt;EnrolledDescription&gt;</span>ENROLLED<span class="nt">&lt;/EnrolledDescription&gt;</span>
    <span class="nt">&lt;Prepaid&gt;</span>N<span class="nt">&lt;/Prepaid&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callCheckCartaS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">CHECKCARD</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationErrorCode</code></td>
<td>authorisation error code if an error occurred</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationResult</code></td>
<td>authorization result. It can be <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code> or <code class="prettyprint">NULL</code></td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCodeDescription</code></td>
<td>code description</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountry</code></td>
<td>nationality of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountryCode</code></td>
<td>nationality code of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVV</code></td>
<td>result of the check CVV. It can be <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code> or <code class="prettyprint">NULL</code></td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVVDescription</code></td>
<td>description of CVV check results</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountry</code></td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountryCode</code></td>
<td>nationality code of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyDescription</code></td>
<td>Description of the Card company</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyCode</code></td>
<td>Code of the Company</td>
</tr>
<tr>
<td><code class="prettyprint">Commercial</code></td>
<td>Flag that indicates if the Card is commercial or not. <code class="prettyprint">Y</code> or <code class="prettyprint">N</code></td>
</tr>
<tr>
<td><code class="prettyprint">ProductDescription</code></td>
<td>Description of the product linked to the card</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td>type of the product: <code class="prettyprint">Credit</code> or <code class="prettyprint">Debit</code></td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigit</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check digit of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigitDescription</code></td>
<td>description of the check digit response</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDate</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check date of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDateDescription</code></td>
<td>description of the check date response</td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledCode</code></td>
<td>3D Secure enabled: <ul><li><code class="prettyprint">Y</code> enabled </li><li><code class="prettyprint">N</code> not enabled</li><li><code class="prettyprint">E</code> error: could not contact the credit card company</li><li><code class="prettyprint">U</code> could not verify</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledDescription</code></td>
<td>enrolment description</td>
</tr>
<tr>
<td><code class="prettyprint">Prepaid</code></td>
<td>indicates if the card is prepaid of not (<code class="prettyprint">Y</code>, <code class="prettyprint">N</code>, or empty)</td>
</tr>
</tbody></table>

          <h2 id="callrequesttokens2s">CallRequestTokenS2S</h2>

<p>Merchants can use this method to request the token generation for a Credit Card. This token can be generated as Standard Format or Custom Format. Tokens created by merchants belonging to a group will be available to all the merchants of the same group.</p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallRequestTokenS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>GEST13578<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;requestToken&gt;</span>MASKEDPAN<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
  <span class="nt">&lt;expiryMonth&gt;</span>12<span class="nt">&lt;/expiryMonth&gt;</span>
  <span class="nt">&lt;expiryYear&gt;</span>21<span class="nt">&lt;/expiryYear&gt;</span>
  <span class="nt">&lt;withAuth&gt;</span>Y<span class="nt">&lt;/withAuth&gt;</span>
  <span class="nt">&lt;cvv&gt;</span>931<span class="nt">&lt;/cvv&gt;</span><span class="c">&lt;!-- optional --&gt;</span>
<span class="nt">&lt;/callCheckCartaS2S&gt;</span>
</code></pre>
<p>Parameters in <strong>bold</strong> are mandatory. </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">requestToken</code></strong></td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token; any other value for Custom Token</td>
<td>string</td>
<td>24</td>
</tr>
<tr>
<td><strong><code class="prettyprint">cardNumber</code></strong></td>
<td>credit card number</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryMonth</code></strong></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryYear</code></strong></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">cvv</code></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
<tr>
<td><strong><code class="prettyprint">withAuth</code></strong></td>
<td>tries to authorize the card. <br> <code class="prettyprint">Y</code> on <code class="prettyprint">N</code></td>
<td>string</td>
<td>1</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallRequestTokenS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>REQUESTTOKEN<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;TransactionErrorCode&gt;</span>0<span class="nt">&lt;/TransactionErrorCode&gt;</span>
    <span class="nt">&lt;TransactionErrorDescription&gt;</span>Transaction correctly processed<span class="nt">&lt;/TransactionErrorDescription&gt;</span>
    <span class="nt">&lt;AuthorizationErrorCode/&gt;</span>
    <span class="nt">&lt;AuthorizationResult/&gt;</span>
    <span class="nt">&lt;AuthorizationCodeDescription/&gt;</span>
    <span class="nt">&lt;CardCountry&gt;</span>POLONIA<span class="nt">&lt;/CardCountry&gt;</span>
    <span class="nt">&lt;CardCountryCode&gt;</span>616<span class="nt">&lt;/CardCountryCode&gt;</span>
    <span class="nt">&lt;CheckCVV/&gt;</span>
    <span class="nt">&lt;CheckCVVDescription/&gt;</span>
    <span class="nt">&lt;IssuerCountry&gt;</span>POLONIA<span class="nt">&lt;/IssuerCountry&gt;</span>
    <span class="nt">&lt;IssuerCountryCode&gt;</span>616<span class="nt">&lt;/IssuerCountryCode&gt;</span>
    <span class="nt">&lt;CompanyDescription&gt;</span>VISA<span class="nt">&lt;/CompanyDescription&gt;</span>
    <span class="nt">&lt;CompanyCode&gt;</span>1<span class="nt">&lt;/CompanyCode&gt;</span>
    <span class="nt">&lt;Commercial&gt;</span>N<span class="nt">&lt;/Commercial&gt;</span>
    <span class="nt">&lt;ProductDescription&gt;</span>Visa Gold<span class="nt">&lt;/ProductDescription&gt;</span>
    <span class="nt">&lt;ProductType&gt;</span>Credit<span class="nt">&lt;/ProductType&gt;</span>
    <span class="nt">&lt;CheckDigit&gt;</span>OK<span class="nt">&lt;/CheckDigit&gt;</span>
    <span class="nt">&lt;CheckDigitDescription&gt;</span>CheckDigit VALID<span class="nt">&lt;/CheckDigitDescription&gt;</span>
    <span class="nt">&lt;CheckDate&gt;</span>OK<span class="nt">&lt;/CheckDate&gt;</span>
    <span class="nt">&lt;CheckDateDescription&gt;</span>DATE VALID<span class="nt">&lt;/CheckDateDescription&gt;</span>
    <span class="nt">&lt;EnrolledCode&gt;</span>E<span class="nt">&lt;/EnrolledCode&gt;</span>
    <span class="nt">&lt;EnrolledDescription&gt;</span>CREDIT CARD UNVERIFIABLE<span class="nt">&lt;/EnrolledDescription&gt;</span>
    <span class="nt">&lt;Prepaid/&gt;</span>
    <span class="nt">&lt;CardBIN/&gt;</span>
    <span class="nt">&lt;Token&gt;</span>44MRWNA710AC4448<span class="nt">&lt;/Token&gt;</span>
    <span class="nt">&lt;TokenExpiryMonth&gt;</span>12<span class="nt">&lt;/TokenExpiryMonth&gt;</span>
    <span class="nt">&lt;TokenExpiryYear&gt;</span>16<span class="nt">&lt;/TokenExpiryYear&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallRequestTokenS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">REQUESTTOKEN</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationErrorCode</code></td>
<td>authorisation error code if an error occurred</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationResult</code></td>
<td>Authorization result. It can be <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code> or <code class="prettyprint">NULL</code></td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCodeDescription</code></td>
<td>code description</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountry</code></td>
<td>nationality of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountryCode</code></td>
<td>nationality code of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVV</code></td>
<td>result of the check CVV. It can be <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code> or <code class="prettyprint">NULL</code></td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVVDescription</code></td>
<td>description of CVV check results</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountry</code></td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountryCode</code></td>
<td>nationality code of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyDescription</code></td>
<td>Description of the Card company</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyCode</code></td>
<td>Code of the Company</td>
</tr>
<tr>
<td><code class="prettyprint">Commercial</code></td>
<td>Flag that indicates if the Card is commercial or not. <code class="prettyprint">Y</code> or <code class="prettyprint">N</code></td>
</tr>
<tr>
<td><code class="prettyprint">ProductDescription</code></td>
<td>Description of the product linked to the card</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td>type of the product: <code class="prettyprint">Credit</code> or <code class="prettyprint">Debit</code></td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigit</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check digit of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigitDescription</code></td>
<td>description of the check digit response</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDate</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check date of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDateDescription</code></td>
<td>description of the check date response</td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledCode</code></td>
<td>3D Secure enabled: <ul><li><code class="prettyprint">Y</code> enabled </li><li><code class="prettyprint">N</code> not enabled</li><li><code class="prettyprint">U</code> could not verify</li><li><code class="prettyprint">E</code> error: could not contact the credit card company</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledDescription</code></td>
<td>enrolment description</td>
</tr>
<tr>
<td><code class="prettyprint">Prepaid</code></td>
<td>indicates if the card is prepaid of not (<code class="prettyprint">Y</code>, <code class="prettyprint">N</code>, or empty)</td>
</tr>
<tr>
<td><code class="prettyprint">Token</code></td>
<td>the token value</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryMonth</code></td>
<td>the token expiry month</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryYear</code></td>
<td>the token expiry year</td>
</tr>
</tbody></table>

          <h2 id="calldeletetokens2s">callDeleteTokenS2S</h2>

<p>Merchants can use this method to disable a token linked to a Credit Card or to cancel a PayPal Billing Agreement. Merchants belonging to a group are allowed to delete also tokens created by other merchants of the same group.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteTokenS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;tokenValue&gt;</span>1234WJFXABCD5678<span class="nt">&lt;/tokenValue&gt;</span>
<span class="nt">&lt;/callDeleteTokenS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in <strong>bold</strong>. </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">tokenValue</code></strong></td>
<td>Token value to delete</td>
<td>string</td>
<td>25</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteTokenS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>DisableToken<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callDeleteTokenS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">DisableToken</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callupdatetokens2s">CallUpdateTokenS2S</h2>

<p>Merchants can use this method to update the expiry date of a token.</p>

<p>Merchants belonging to a group are allowed to update also tokens created by other merchants of the same group. If a merchant belongs to a group, can update also token created by the other group&rsquo;s merchants.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallUpdateTokenS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;token&gt;</span>1234WJFXABCD5678<span class="nt">&lt;/token&gt;</span>
  <span class="nt">&lt;expiryMonth&gt;</span>12<span class="nt">&lt;/expiryMonth&gt;</span>
  <span class="nt">&lt;expiryYear&gt;</span>21<span class="nt">&lt;/expiryYear&gt;</span>
  <span class="nt">&lt;withAut&gt;</span>Y<span class="nt">&lt;/withAut&gt;</span>
<span class="nt">&lt;/CallUpdateTokenS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in <strong>bold</strong>. </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">token</code></strong></td>
<td>Token value to update</td>
<td>string</td>
<td>25</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryMonth</code></strong></td>
<td>Assigns card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryYear</code></strong></td>
<td>Assigns card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">withAut</code></strong></td>
<td>tries also to authorize the card. <br> <code class="prettyprint">Y</code> on <code class="prettyprint">N</code></td>
<td>string</td>
<td>1</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallUpdateTokenS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>UpdateToken<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallUpdateTokenS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">UpdateToken</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callideallists2s"> CallIdealListS2S</h2>

<p>Merchants can use this method to have the list of the Banks available for their customers for IDeal payment method.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallIdealListS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>900000001<span class="nt">&lt;/shopLogin&gt;</span>
<span class="nt">&lt;/CallIdealListS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in <strong>bold</strong>.</p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallIdealListS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>RequestIdealBankList<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
        <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;BankList&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            <span class="nt">&lt;BankCode&gt;</span>0001<span class="nt">&lt;/BankCode&gt;</span>
            <span class="nt">&lt;BankName&gt;</span>E-Corp<span class="nt">&lt;/BankName&gt;</span>
          <span class="nt">&lt;/Bank&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            ... 
          <span class="nt">&lt;/Bank&gt;</span>
        <span class="nt">&lt;/BankList&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallIdealListS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint"> CallIdealListS2S</code>, the value will be <code class="prettyprint">RequestIdealBankList</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankCode</code> </td>
<td>Returns Ideal Bank List, for each bank returns the Bank Code</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankName</code> </td>
<td>Returns Ideal Bank List, for each bank returns the Bank Name</td>
</tr>
</tbody></table>

          <h2 id="callmybanklists2s">CallMyBankListS2S</h2>

<p>Merchants can use this method to have the list of the Banks available for their customers for MyBank payment method.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallMyBankListS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>900000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;langugeId&gt;</span>1<span class="nt">&lt;/languageId&gt;</span>
<span class="nt">&lt;/CallMyBankListS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in <strong>bold</strong>.</p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">languageId</code></strong></td>
<td>Assigns the response language of the Bank list. Values: <br><ul><li><code class="prettyprint">1</code> Italian</li><li><code class="prettyprint">2</code> English</li><li><code class="prettyprint">3</code> Spanish</li><li><code class="prettyprint">4</code> French</li><li><code class="prettyprint">5</code> German</li></ul></td>
<td>number</td>
<td>2</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallMyBankListS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>MyBank<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
        <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;BankList&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            <span class="nt">&lt;BankCode&gt;</span>0001<span class="nt">&lt;/BankCode&gt;</span>
            <span class="nt">&lt;BankName&gt;</span>E-Corp<span class="nt">&lt;/BankName&gt;</span>
          <span class="nt">&lt;/Bank&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            ... 
          <span class="nt">&lt;/Bank&gt;</span>
        <span class="nt">&lt;/BankList&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallMyBankListS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">callMyBankListS2S</code>, the value will be <code class="prettyprint">MyBank</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankCode</code> </td>
<td>Returns MyBank Bank List, for each bank returns the Bank Code</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankName</code> </td>
<td>Returns MyBank Bank List, for each bank returns the Bank Name</td>
</tr>
</tbody></table>

          <h2 id="callupdateorders2s">CallUpdateOrderS2S</h2>

<aside class="notice">This service is intended to be used only by Gestpay Guaranteed Payment users.</aside>

<p>Merchants can use this method to update the order values for Risk Fraud management. For example, if the buyer changes the Shipping Address, this must be notified to Gestpay Guaranteed Payment in order to review again the Order. Gestpay Guaranteed Payment decides if the Order must be reviewed based on the changed values.</p>

<h3 id="request-parameters"> Request parameters</h3>

<blockquote>
<p>request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallUpdateOrderS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000002<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-0001<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;bankTransactionId&gt;</span>13675333225<span class="nt">&lt;/bankTransactionId&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    ... <span class="c">&lt;!-- the OrderDetails object --&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
<span class="nt">&lt;/CallUpdateOrderS2S&gt;</span>
</code></pre>
<p>Mandatory parameters are in <strong>bold</strong>. The attributes are: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Data Type</th>
<th>max length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong> </td>
<td>shopLogin value</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">bankTransactionId</code></strong></td>
<td>the bank ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">OrderDetails</code></strong></td>
<td>contains every other info needed to evaluate the payment. Refer to <a href="#orderdetails">OrderDetails</a> for a detailed description of its fields.</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<aside class="active">
A transaction is uniquely identified by <code>shopLogin</code> + <code>bankTransactionId</code>. However, if the <code>shopTransactionId</code> is unique, the merchant can just send <code>shopLogin</code> + <code>shopTransactionId</code>. 
</aside>

<h3 id="response-fields">Response fields</h3>

<blockquote>
<p>response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
  <span class="nt">&lt;TransactionType&gt;</span>RiskifiedUpdateOrder<span class="nt">&lt;/TransactionType&gt;</span>
  <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
  <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
  <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
<span class="nt">&lt;/GestPayS2S&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">RiskifiedUpdateOrder</code> in response to <code class="prettyprint">CallUpdateOrderS2S</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td>Returns transaction result with <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>a code related to the transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>the description connected to the ErrorCode value</td>
</tr>
</tbody></table>

          <h2 id="callexchangerates2s">callExchangeRateS2S</h2>

<p>Merchants can use this method to retrieve the exchange rates for a specified currency, in the last 7 days (current day and 6 previous days).</p>

<p>Exchange rates are meant as the conversion rates applied on that day to that currency by the phases that credit that amount on the bank account of the merchant, in order to get the corresponding EUR value. </p>

<p>A more descriptive explanation of <code class="prettyprint">callExchangeRateS2S</code> is <a href="http://docs.gestpay.it/adv/obtaining-the-exchange-rates/">in the docs</a>. </p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example:</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;eco:callExchangeRateS2S&gt;</span>
    <span class="nt">&lt;eco:shopLogin&gt;</span>GESPAY65987<span class="nt">&lt;/eco:shopLogin&gt;</span>
    <span class="nt">&lt;eco:uicCode&gt;</span>1<span class="nt">&lt;/eco:uicCode&gt;</span>
    <span class="nt">&lt;eco:isoCode&gt;</span>USD<span class="nt">&lt;/eco:isoCode&gt;</span>
    <span class="nt">&lt;eco:numericIsoCode&gt;</span>840<span class="nt">&lt;/eco:numericIsoCode&gt;</span>
<span class="nt">&lt;/eco:callExchangeRateS2S&gt;</span>
</code></pre>
<p>Parameters in <strong>bold</strong> are mandatory. </p>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">uicCode</code></td>
<td>the <a href="http://api.gestpay.it/#currency-codes">UIC code</a></td>
<td>string</td>
<td>10</td>
</tr>
<tr>
<td><code class="prettyprint">isoCode</code></td>
<td>the <a href="https://en.wikipedia.org/wiki/ISO_4217#Active_codes">ISO code</a> - see the <code class="prettyprint">Code</code> column.</td>
<td>string</td>
<td>10</td>
</tr>
<tr>
<td><code class="prettyprint">numericIsoCode</code></td>
<td>the <a href="https://en.wikipedia.org/wiki/ISO_4217#Active_codes">ISO code</a> - see the <code class="prettyprint">Num</code> column.</td>
<td>string</td>
<td>10</td>
</tr>
</tbody></table>

<aside class="active">
The three parameters <code>UICCode</code>, <code>ISOCode</code> and <code>NumericISOCode</code> are individually optional, but you must select at least one. 
</aside>
 

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callExchangeRateS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>ExchangeRate<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;ExchangeRates&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0617<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>TODAY_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0602<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>YESTERDAY_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0603<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>MINUS_2_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0599<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>MINUS_3_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0595<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>MINUS_4_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0595<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>MINUS_5_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
        <span class="nt">&lt;ExchangeRate&gt;</span>
            <span class="nt">&lt;UICCode&gt;</span>1<span class="nt">&lt;/UICCode&gt;</span>
            <span class="nt">&lt;ISOCode&gt;</span>USD<span class="nt">&lt;/ISOCode&gt;</span>
            <span class="nt">&lt;NumericISOCode&gt;</span>840<span class="nt">&lt;/NumericISOCode&gt;</span>
            <span class="nt">&lt;ExchangeRate&gt;</span>1,0595<span class="nt">&lt;/ExchangeRate&gt;</span>
            <span class="nt">&lt;CreditDate</span> <span class="na">DateFormat=</span><span class="s">"DD/MM/YYYY"</span><span class="nt">&gt;</span>MINUS_6_CONST<span class="nt">&lt;/CreditDate&gt;</span>
        <span class="nt">&lt;/ExchangeRate&gt;</span>
    <span class="nt">&lt;/ExchangeRates&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
  <span class="nt">&lt;/callExchangeRateS2SResult&gt;</span>
</code></pre>
<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">ExchangeRate</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>error code occurred</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>error description relative to error code</td>
</tr>
<tr>
<td><code class="prettyprint">ExchangeRates</code></td>
<td>Tag for list of exchange rates</td>
</tr>
<tr>
<td><code class="prettyprint">ExchangeRate</code></td>
<td>Tag for exchange rate detail</td>
</tr>
<tr>
<td><code class="prettyprint">UICCode</code></td>
<td>UIC code</td>
</tr>
<tr>
<td><code class="prettyprint">ISOCode</code></td>
<td>ISO code</td>
</tr>
<tr>
<td><code class="prettyprint">NumericISOCode</code></td>
<td>Numeric ISO code</td>
</tr>
<tr>
<td><code class="prettyprint">ExchangeRate</code></td>
<td>Value of exchange rate</td>
</tr>
<tr>
<td><code class="prettyprint">CreditDate</code></td>
<td>Day of validity for this Exchange Rate</td>
</tr>
</tbody></table>

          <h1 id="gestpay-guaranteed-payment">Gestpay Guaranteed Payment</h1>

<p>Gestpay Guaranteed Payment is a fraud detection service, offered in partnership with Riskified. To get more info, visit <a href="http://docs.gestpay.it/sec/gestpay-guaranteed-payment.html">Gestpay Guaranteed Payment documentation</a>. </p>

<aside class="notice">
Gestpay Guaranteed Payment is reserved to users that have signed an agreement with Gestpay.
</aside>

<p>Gestpay Guaranteed Payment can be used both in <a href="#encrypt"><code class="prettyprint">Encrypt</code></a> and in S2S webservices (like <a href="#callpagams2s">callPagamS2S</a> and others).  </p>

<p>All Gestpay Guaranteed Payment data goes inside the tag <a href="#orderdetails"><code class="prettyprint">&lt;OrderDetails&gt;</code></a>. There you will find a detailed description of every field.</p>

          <h1 id="models">Models</h1>

<p>In this section we&rsquo;ll discuss shared objects used in the API.  </p>

          <h2 id="orderdetails">OrderDetails</h2>

<blockquote>
<p><code class="prettyprint">OrderDetails</code> tag example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;OrderDetails&gt;</span>
  <span class="nt">&lt;FraudPrevention&gt;</span>
    <span class="nt">&lt;SubmitForReview&gt;</span>1<span class="nt">&lt;/SubmitForReview&gt;</span>
    <span class="nt">&lt;OrderDateTime&gt;</span>2017-12-26<span class="nt">&lt;/OrderDateTime&gt;</span>
    <span class="nt">&lt;OrderNote&gt;</span>Please send me the blue version<span class="nt">&lt;/OrderNote&gt;</span>
    <span class="nt">&lt;Source&gt;</span>website<span class="nt">&lt;/Source&gt;</span>
    <span class="nt">&lt;SubmissionReason&gt;</span>rule_decision<span class="nt">&lt;/SubmissionReason&gt;</span>
    <span class="nt">&lt;BeaconSessionID&gt;</span>ff1db05b-81db-4ca0-a728-4797bfe796ff<span class="nt">&lt;/BeaconSessionID&gt;</span>
    <span class="nt">&lt;VendorID&gt;</span>9000002<span class="nt">&lt;/VendorID&gt;</span>
    <span class="nt">&lt;VendorName&gt;</span>www.yourdomain.it<span class="nt">&lt;/VendorName&gt;</span>
  <span class="nt">&lt;/FraudPrevention&gt;</span>
  <span class="nt">&lt;CustomerDetail&gt;</span>
    <span class="nt">&lt;ProfileID</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;MerchantCustomerID/&gt;</span>
    <span class="nt">&lt;FirstName&gt;</span>Michael<span class="nt">&lt;/FirstName&gt;</span>
    <span class="nt">&lt;MiddleName&gt;</span>J.<span class="nt">&lt;/MiddleName&gt;</span>
    <span class="nt">&lt;Lastname&gt;</span>Fox<span class="nt">&lt;/Lastname&gt;</span>
    <span class="nt">&lt;PrimaryEmail&gt;</span>martymcfly@backtothefuture.com<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;SecondaryEmail</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;PrimaryPhone&gt;</span>+390298987643<span class="nt">&lt;/PrimaryPhone&gt;</span>
    <span class="nt">&lt;SecondaryPhone&gt;</span>+393351029384<span class="nt">&lt;/SecondaryPhone&gt;</span>
    <span class="nt">&lt;DateOfBirth&gt;</span>29/09/1932<span class="nt">&lt;/DateOfBirth&gt;</span>
    <span class="nt">&lt;SocialSecurityNumber&gt;</span>BRLSLV36P29F205W<span class="nt">&lt;/SocialSecurityNumber&gt;</span>
    <span class="nt">&lt;Company</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;CreatedAtDate&gt;</span>31/12/2017<span class="nt">&lt;/CreatedAtDate&gt;</span>
    <span class="nt">&lt;VerifiedEmail&gt;</span>true<span class="nt">&lt;/VerifiedEmail&gt;</span>
    <span class="nt">&lt;AccountType&gt;</span>premium<span class="nt">&lt;/AccountType&gt;</span>
  <span class="nt">&lt;/CustomerDetail&gt;</span>
  <span class="nt">&lt;CustomerSocial&gt;</span>
    <span class="nt">&lt;Network&gt;</span>Facebook<span class="nt">&lt;/Network&gt;</span>
    <span class="nt">&lt;PublicUserName&gt;</span>Marty McFly<span class="nt">&lt;/PublicUserName&gt;</span>
    <span class="nt">&lt;CommunityScore&gt;</span>100<span class="nt">&lt;/CommunityScore&gt;</span>
    <span class="nt">&lt;ProfilePicture&gt;</span>https://external-mxp1-1.xx.fbcdn.net/safe_image.php?d=AQCSnRebJp1o3AR9<span class="err">&amp;</span>w=264<span class="err">&amp;</span>h=264<span class="err">&amp;</span>url=http%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fit%2Fthumb%2F1%2F1d%2FMartyMcFly.JPG%2F720px-MartyMcFly.JPG<span class="err">&amp;</span>colorbox<span class="err">&amp;</span>f<span class="nt">&lt;/ProfilePicture&gt;</span>
    <span class="nt">&lt;Email&gt;</span>martymcfly@backtothefuture.com<span class="nt">&lt;/Email&gt;</span>
    <span class="nt">&lt;Bio&gt;</span>Martin Seamus "Marty" McFly is a fictional character in the Back to the Future trilogy. He is portrayed by actor Michael J. Fox.<span class="nt">&lt;/Bio&gt;</span>
    <span class="nt">&lt;AccountUrl&gt;</span>https://www.facebook.com/pages/Marty-McFly/103151259725141?fref=ts<span class="err">&amp;</span>rf=105623692803833<span class="nt">&lt;/AccountUrl&gt;</span>
    <span class="nt">&lt;Following&gt;</span>0<span class="nt">&lt;/Following&gt;</span>
    <span class="nt">&lt;Followed&gt;</span>1157<span class="nt">&lt;/Followed&gt;</span>
    <span class="nt">&lt;Id&gt;</span>103151259725141<span class="nt">&lt;/Id&gt;</span>
    <span class="nt">&lt;AuthToken&gt;</span>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...<span class="nt">&lt;/AuthToken&gt;</span>
    <span class="nt">&lt;SocialData</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/CustomerSocial&gt;</span>
  <span class="nt">&lt;ShippingAddress&gt;</span>
    <span class="nt">&lt;ProfileID</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;FirstName&gt;</span>Michael<span class="nt">&lt;/FirstName&gt;</span>
    <span class="nt">&lt;MiddleName&gt;</span>J.<span class="nt">&lt;/MiddleName&gt;</span>
    <span class="nt">&lt;Lastname&gt;</span>Fox<span class="nt">&lt;/Lastname&gt;</span>
    <span class="nt">&lt;Company&gt;</span>Universal Studios<span class="nt">&lt;/Company&gt;</span>
    <span class="nt">&lt;StreetName&gt;</span>Holliwood Boulevard<span class="nt">&lt;/StreetName&gt;</span>
    <span class="nt">&lt;StreetName2</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;HouseNumber&gt;</span>1432<span class="nt">&lt;/HouseNumber&gt;</span>
    <span class="nt">&lt;HouseExtention</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;City&gt;</span>Los Angeles<span class="nt">&lt;/City&gt;</span>
    <span class="nt">&lt;ZipCode&gt;</span>90213<span class="nt">&lt;/ZipCode&gt;</span>
    <span class="nt">&lt;State&gt;</span>California<span class="nt">&lt;/State&gt;</span>
    <span class="nt">&lt;CountryCode&gt;</span>US<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;Email&gt;</span>martymcfly@backtothefuture.com<span class="nt">&lt;/Email&gt;</span>
    <span class="nt">&lt;PrimaryPhone&gt;</span>+0199332285321<span class="nt">&lt;/PrimaryPhone&gt;</span>
    <span class="nt">&lt;SecondaryPhone</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ShippingAddress&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
    <span class="nt">&lt;ProfileID</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;FirstName&gt;</span>Michael<span class="nt">&lt;/FirstName&gt;</span>
    <span class="nt">&lt;MiddleName&gt;</span>J.<span class="nt">&lt;/MiddleName&gt;</span>
    <span class="nt">&lt;Lastname&gt;</span>Fox<span class="nt">&lt;/Lastname&gt;</span>
    <span class="nt">&lt;Company&gt;</span>Universal Studios<span class="nt">&lt;/Company&gt;</span>
    <span class="nt">&lt;StreetName&gt;</span>Holliwood Boulevard<span class="nt">&lt;/StreetName&gt;</span>
    <span class="nt">&lt;StreetName2</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;HouseNumber&gt;</span>1432<span class="nt">&lt;/HouseNumber&gt;</span>
    <span class="nt">&lt;HouseExtention</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;City&gt;</span>Los Angeles<span class="nt">&lt;/City&gt;</span>
    <span class="nt">&lt;ZipCode&gt;</span>90213<span class="nt">&lt;/ZipCode&gt;</span>
    <span class="nt">&lt;State&gt;</span>California<span class="nt">&lt;/State&gt;</span>
    <span class="nt">&lt;CountryCode&gt;</span>US<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;Email&gt;</span>martymcfly@backtothefuture.com<span class="nt">&lt;/Email&gt;</span>
    <span class="nt">&lt;PrimaryPhone&gt;</span>+0199332285321<span class="nt">&lt;/PrimaryPhone&gt;</span>
    <span class="nt">&lt;SecondaryPhone</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/BillingAddress&gt;</span>
  <span class="nt">&lt;ProductDetails&gt;</span>
    <span class="nt">&lt;ProductDetail&gt;</span><span class="c">&lt;!-- first of 1...N products --&gt;</span>
      <span class="nt">&lt;ProductCode&gt;</span>135798642<span class="nt">&lt;/ProductCode&gt;</span>
      <span class="nt">&lt;SKU&gt;</span>AB-333222-WFG-4<span class="nt">&lt;/SKU&gt;</span>
      <span class="nt">&lt;Name&gt;</span>Porche Carrera scale model<span class="nt">&lt;/Name&gt;</span>
      <span class="nt">&lt;Description&gt;</span>Porche Carrera scale model<span class="nt">&lt;/Description&gt;</span>
      <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span>
      <span class="nt">&lt;Price&gt;</span>50.5<span class="nt">&lt;/Price&gt;</span>
      <span class="nt">&lt;UnitPrice&gt;</span>50.5<span class="nt">&lt;/UnitPrice&gt;</span>
      <span class="nt">&lt;Type&gt;</span>1<span class="nt">&lt;/Type&gt;</span><span class="c">&lt;!-- 1: product --&gt;</span>
      <span class="nt">&lt;Vat&gt;</span>22%<span class="nt">&lt;/Vat&gt;</span>
      <span class="nt">&lt;Discount</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;Category&gt;</span>Scale Models<span class="nt">&lt;/Category&gt;</span>
      <span class="nt">&lt;Subcategory&gt;</span>cars<span class="nt">&lt;/Subcategory&gt;</span>
      <span class="nt">&lt;Brand&gt;</span>LittleCars<span class="nt">&lt;/Brand&gt;</span>
      <span class="nt">&lt;RequiresShipping&gt;</span>true<span class="nt">&lt;/RequiresShipping&gt;</span>
      <span class="nt">&lt;DeliveryAt&gt;</span>2017-12-29<span class="nt">&lt;/DeliveryAt&gt;</span>
      <span class="nt">&lt;Condition&gt;</span>new<span class="nt">&lt;/Condition&gt;</span>
      <span class="nt">&lt;Seller</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- relevant for marketplace orders --&gt;</span> 
    <span class="nt">&lt;/ProductDetail&gt;</span>
    <span class="nt">&lt;ProductDetail&gt;</span>
      <span class="nt">&lt;ProductCode&gt;</span>135798642<span class="nt">&lt;/ProductCode&gt;</span>
      <span class="nt">&lt;SKU&gt;</span>AB-333222-WFG-5<span class="nt">&lt;/SKU&gt;</span>
      <span class="nt">&lt;Name&gt;</span>Ferrari scale model<span class="nt">&lt;/Name&gt;</span>
      <span class="nt">&lt;Description&gt;</span>Ferrari scale model<span class="nt">&lt;/Description&gt;</span>
      <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span>
      <span class="nt">&lt;Price&gt;</span>50.5<span class="nt">&lt;/Price&gt;</span>
      <span class="nt">&lt;UnitPrice&gt;</span>50.5<span class="nt">&lt;/UnitPrice&gt;</span>
      <span class="nt">&lt;Type&gt;</span>1<span class="nt">&lt;/Type&gt;</span><span class="c">&lt;!-- 1: product --&gt;</span>
      <span class="nt">&lt;Vat&gt;</span>22%<span class="nt">&lt;/Vat&gt;</span>
      <span class="nt">&lt;Discount</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;Category&gt;</span>Scale Models<span class="nt">&lt;/Category&gt;</span>
      <span class="nt">&lt;Subcategory&gt;</span>cars<span class="nt">&lt;/Subcategory&gt;</span>
      <span class="nt">&lt;Brand&gt;</span>LittleCars<span class="nt">&lt;/Brand&gt;</span>
      <span class="nt">&lt;RequiresShipping&gt;</span>true<span class="nt">&lt;/RequiresShipping&gt;</span>
      <span class="nt">&lt;DeliveryAt&gt;</span>2017-12-29<span class="nt">&lt;/DeliveryAt&gt;</span>
      <span class="nt">&lt;Condition&gt;</span>new<span class="nt">&lt;/Condition&gt;</span>
      <span class="nt">&lt;Seller</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- relevant for marketplace orders --&gt;</span>
    <span class="nt">&lt;/ProductDetail&gt;</span><span class="c">&lt;!-- last of 1...N products --&gt;</span>
  <span class="nt">&lt;/ProductDetails&gt;</span>
  <span class="nt">&lt;DiscountCodes&gt;</span>
    <span class="nt">&lt;DiscountCode&gt;</span><span class="c">&lt;!-- one or more --&gt;</span>
      <span class="nt">&lt;Amount&gt;</span>10<span class="nt">&lt;/Amount&gt;</span>
      <span class="nt">&lt;Code&gt;</span>53232<span class="nt">&lt;/Code&gt;</span>
    <span class="nt">&lt;/DiscountCode&gt;</span>
  <span class="nt">&lt;/DiscountCodes&gt;</span>
  <span class="nt">&lt;ShippingLines&gt;</span>
    <span class="nt">&lt;ShippingLine&gt;</span>
      <span class="nt">&lt;Price&gt;</span>20<span class="nt">&lt;/Price&gt;</span>
      <span class="nt">&lt;Title&gt;</span>FedEx<span class="nt">&lt;/Title&gt;</span>
      <span class="nt">&lt;Code&gt;</span>72-B03<span class="nt">&lt;/Code&gt;</span>
    <span class="nt">&lt;/ShippingLine&gt;</span>
  <span class="nt">&lt;/ShippingLines&gt;</span>
  <span class="nt">&lt;AccommodationDetails&gt;</span>
    <span class="c">&lt;!-- First accomodation --&gt;</span>
    <span class="nt">&lt;AccommodationDetail&gt;</span>
      <span class="nt">&lt;City&gt;</span>Eindhoven<span class="nt">&lt;/City&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>NL<span class="nt">&lt;/CountryCode&gt;</span>
      <span class="nt">&lt;Title&gt;</span>Tulip Inn Eindhoven Airport<span class="nt">&lt;/Title&gt;</span>
      <span class="nt">&lt;CheckInDate&gt;</span>2018-01-20T00:00+0000<span class="nt">&lt;/CheckInDate&gt;</span>
      <span class="nt">&lt;CheckOutDate&gt;</span>2018-01-22T00:00+0000<span class="nt">&lt;/CheckOutDate&gt;</span>
      <span class="nt">&lt;ProductId&gt;</span>NL2133<span class="nt">&lt;/ProductId&gt;</span>
      <span class="nt">&lt;Rating&gt;</span>3<span class="nt">&lt;/Rating&gt;</span>
      <span class="nt">&lt;NumberOfGuests&gt;</span>3<span class="nt">&lt;/NumberOfGuests&gt;</span>
      <span class="nt">&lt;AccommodationType&gt;</span>Hotel<span class="nt">&lt;/AccommodationType&gt;</span>
      <span class="nt">&lt;RoomType&gt;</span>Deluxe Triple<span class="nt">&lt;/RoomType&gt;</span>
      <span class="nt">&lt;Price&gt;</span>370<span class="nt">&lt;/Price&gt;</span>
      <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span>
      <span class="nt">&lt;CancellationPolicy&gt;</span>Non-Refundable<span class="nt">&lt;/CancellationPolicy&gt;</span>
    <span class="nt">&lt;/AccommodationDetail&gt;</span>
    <span class="c">&lt;!-- Second accomodation --&gt;</span>
    <span class="nt">&lt;AccommodationDetail&gt;</span>
    ...
    <span class="nt">&lt;/AccommodationDetail&gt;</span>
  <span class="nt">&lt;/AccommodationDetails&gt;</span>
  <span class="nt">&lt;PassengerDetails&gt;</span>
    <span class="c">&lt;!-- First passenger --&gt;</span>
    <span class="nt">&lt;PassengerDetail&gt;</span>
      <span class="nt">&lt;FirstName&gt;</span>Antonio<span class="nt">&lt;/FirstName&gt;</span>
      <span class="nt">&lt;LastName&gt;</span>Esposito<span class="nt">&lt;/LastName&gt;</span>
      <span class="nt">&lt;DateOfBirth&gt;</span>1970-05-03<span class="nt">&lt;/DateOfBirth&gt;</span>
      <span class="nt">&lt;NationalityCode&gt;</span>IT<span class="nt">&lt;/NationalityCode&gt;</span>
      <span class="nt">&lt;InsuranceType&gt;</span>ERV<span class="nt">&lt;/InsuranceType&gt;</span>
      <span class="nt">&lt;InsurancePrice&gt;</span>17<span class="nt">&lt;/InsurancePrice&gt;</span>
      <span class="nt">&lt;DocumentNumber&gt;</span>AO1234567<span class="nt">&lt;/DocumentNumber&gt;</span>
      <span class="nt">&lt;DocumentType&gt;</span>Identity Card<span class="nt">&lt;/DocumentType&gt;</span>
      <span class="nt">&lt;DocumentIssueDate&gt;</span>Comune di Salerno<span class="nt">&lt;/DocumentIssueDate&gt;</span>
      <span class="nt">&lt;DocumentExpirationDate&gt;</span>2020-10-02<span class="nt">&lt;/DocumentExpirationDate&gt;</span>
      <span class="nt">&lt;PassengerType&gt;</span>adult<span class="nt">&lt;/PassengerType&gt;</span>
    <span class="nt">&lt;/PassengerDetail&gt;</span>
    <span class="c">&lt;!-- Second passenger --&gt;</span>
    <span class="nt">&lt;PassengerDetail&gt;</span>
    ...
    <span class="nt">&lt;/PassengerDetail&gt;</span>
  <span class="nt">&lt;/PassengerDetails&gt;</span>
<span class="nt">&lt;/OrderDetails&gt;</span>
</code></pre>
<p><code class="prettyprint">OrderDetails</code> tag contains all the info that can be sent together with a transaction. The more data you sent, the better is for Gestpay to analyze your request. </p>

<p>Many external systems, like the one presented in the next sections, use <code class="prettyprint">OrderDetails</code> fields to work. <a href="#gestpay-guaranteed-payment">Gestpay Guaranteed Payment</a> (an antifraud system) massively uses <code class="prettyprint">OrderDetails</code> to get the job done. </p>

<p>In this section we will analyze indipendently all the fields. </p>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">FraudPrevention</code></td>
<td></td>
<td>container</td>
<td>Contains fields related to fraud prevention.</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail</code></td>
<td></td>
<td>container</td>
<td>Contains customer data</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerSocial</code></td>
<td></td>
<td>container</td>
<td>if you have access to a customer&rsquo; social profile, you can also send this data</td>
</tr>
<tr>
<td><code class="prettyprint">ShippingAddress</code></td>
<td></td>
<td>container</td>
<td>Contains shipping address</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress</code></td>
<td></td>
<td>container</td>
<td>contains the billing address</td>
</tr>
<tr>
<td><code class="prettyprint">ProductDetails</code></td>
<td></td>
<td>container</td>
<td>contains one or more <code class="prettyprint">ProductDetail</code>s items buyed</td>
</tr>
<tr>
<td><code class="prettyprint">DiscountCodes</code></td>
<td></td>
<td>container</td>
<td>contains one or more <code class="prettyprint">DiscountCode</code>s, if discounts are applicable</td>
</tr>
<tr>
<td><code class="prettyprint">ShippingLines</code></td>
<td></td>
<td>container</td>
<td>contains one or more <code class="prettyprint">ShippingLine</code>s, that contain the price and the shipping courier.</td>
</tr>
</tbody></table>

<h4 id="children-of-fraudprevention">Children of <code class="prettyprint">FraudPrevention</code></h4>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">SubmitForReview</code></td>
<td>1</td>
<td>Flag to activate review over Gestpay Guaranteed Payment.  <br><ul><li><code class="prettyprint">0</code> no submit</li><li><code class="prettyprint">1</code> submit</li></ul>If your active plan is <strong>Select&amp;Submit</strong> you can decide which transaction must be submitted to Gestpay Guaranteed Payment setting the flag to <code class="prettyprint">1</code>. With <strong>Shop Protection</strong> all transactions are submitted for review by default.</td>
</tr>
<tr>
<td><code class="prettyprint">OrderDateTime</code></td>
<td>10</td>
<td>Order date time. Format: YYYY-MM-DD</td>
</tr>
<tr>
<td><code class="prettyprint">OrderNote</code></td>
<td>50</td>
<td>Buyer&rsquo;s order note</td>
</tr>
<tr>
<td><code class="prettyprint">Source</code></td>
<td>10</td>
<td><code class="prettyprint">website</code>, <code class="prettyprint">mobile</code></td>
</tr>
<tr>
<td><code class="prettyprint">SubmissionReason</code></td>
<td>20</td>
<td>the underlying reason for submitting the order to review. It must be one of the following values: <ul><li><code class="prettyprint">failed_verification</code>: order failed (phone, email) verification.</li><li><code class="prettyprint">rule_decision</code>: Order was flagged by an automatic rule. </li><li><code class="prettyprint">third_party</code>: Order was flagged by a third-party service.</li><li><code class="prettyprint">manual_decision</code>: Order was flagged after manual review.</li><li><code class="prettyprint">policy_decision</code>: order was flagged by a non-fraud related rule.</li></ul> This field must be sent either if the shop adheres to <em>Shop Protection</em> or <em>Selct &amp; Submit</em> plan; if the plan is <em>Shop Protection</em>, the default is <code class="prettyprint">rule_decision</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">BeaconSessionID</code></td>
<td>100</td>
<td>Session ID of the Beacon for this transaction. This value must be collected when the user first connects to your website and be sent to  Gestpay Guaranteed Payment to analyze it. With this field,  Gestpay Guaranteed Payment knows what actions the user did on your website.</td>
</tr>
<tr>
<td><code class="prettyprint">VendorID</code></td>
<td>10</td>
<td>A unique ID representing the selling vendor; commonly the Gestpay <code class="prettyprint">shopLogin</code>. <strong>Mandatory in case of different domain use</strong>.</td>
</tr>
<tr>
<td><code class="prettyprint">VendorName</code></td>
<td>100</td>
<td>In case of multiple selling domains, this is the name of the selling vendor. <strong>Mandatory in case of different domain use</strong>.</td>
</tr>
</tbody></table>

<h4 id="children-of-customerdetail">Children of <code class="prettyprint">CustomerDetail</code></h4>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProfileID</code></td>
<td>12</td>
<td>Customer profile ID (reserved for future use)</td>
</tr>
<tr>
<td><code class="prettyprint">MerchantCustomerID</code></td>
<td>50</td>
<td>Merchant customer ID (reserved for future use)</td>
</tr>
<tr>
<td><code class="prettyprint">FirstName</code></td>
<td>65</td>
<td>Customer First Name</td>
</tr>
<tr>
<td><code class="prettyprint">MiddleName</code></td>
<td>65</td>
<td>Customer Middle Name</td>
</tr>
<tr>
<td><code class="prettyprint">Lastname</code></td>
<td>65</td>
<td>Customer Last name</td>
</tr>
<tr>
<td><code class="prettyprint">PrimaryEmail</code></td>
<td>100</td>
<td>Customer primary email</td>
</tr>
<tr>
<td><code class="prettyprint">SecondaryEmail</code></td>
<td>100</td>
<td>Customer secondary email</td>
</tr>
<tr>
<td><code class="prettyprint">PrimaryPhone</code></td>
<td>20</td>
<td>Customer&rsquo;s phone including prefix</td>
</tr>
<tr>
<td><code class="prettyprint">SecondaryPhone</code></td>
<td>20</td>
<td>Customer&rsquo;s phone including prefix</td>
</tr>
<tr>
<td><code class="prettyprint">DateOfBirth</code></td>
<td>10</td>
<td>Customer Date of Birth (dd/mm/yyyy)</td>
</tr>
<tr>
<td><code class="prettyprint">Gender</code></td>
<td>1</td>
<td>Customer Gender (<code class="prettyprint">0</code>=Male <code class="prettyprint">1</code>=Female)</td>
</tr>
<tr>
<td><code class="prettyprint">SocialSecurityNumber</code></td>
<td>20</td>
<td>Customer&rsquo;s social or fiscal identifier (KlarnaUse)</td>
</tr>
<tr>
<td><code class="prettyprint">Company</code></td>
<td>255</td>
<td>Customer Company</td>
</tr>
<tr>
<td><code class="prettyprint">CreatedAtDate</code></td>
<td>10</td>
<td>Date of Customer creation on merchant site</td>
</tr>
<tr>
<td><code class="prettyprint">VerifiedEmail</code></td>
<td>5</td>
<td>Email is verified? <code class="prettyprint">true</code>/<code class="prettyprint">false</code></td>
</tr>
<tr>
<td><code class="prettyprint">AccountType</code></td>
<td>20</td>
<td><code class="prettyprint">free</code>/<code class="prettyprint">premium</code> etc</td>
</tr>
</tbody></table>

<h4 id="customersocial-field"><code class="prettyprint">CustomerSocial</code> field</h4>

<p>If you have access to socal data of your customers, you can send them along with the other data.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Network</code></td>
<td>12</td>
<td>The name of the social network.</td>
</tr>
<tr>
<td><code class="prettyprint">PublicUserName</code></td>
<td>50</td>
<td>The customer&rsquo;s public username.</td>
</tr>
<tr>
<td><code class="prettyprint">CommunityScore</code></td>
<td>65</td>
<td>holds the score for networks where its relevant</td>
</tr>
<tr>
<td><code class="prettyprint">ProfilePicture</code></td>
<td>65</td>
<td>URL of the customer&rsquo;s profile picture</td>
</tr>
<tr>
<td><code class="prettyprint">Email</code></td>
<td>65</td>
<td>Customer&rsquo;s email address registered on the social network.</td>
</tr>
<tr>
<td><code class="prettyprint">Bio</code></td>
<td>100</td>
<td>Short biography of the customer on the social network</td>
</tr>
<tr>
<td><code class="prettyprint">AccountUrl</code></td>
<td>100</td>
<td>Direct URL to the customer&rsquo;s profile page on the social network</td>
</tr>
<tr>
<td><code class="prettyprint">Following</code></td>
<td>20</td>
<td>Direct URL to the customer&rsquo;s profile page on the social network</td>
</tr>
<tr>
<td><code class="prettyprint">Followed</code></td>
<td>20</td>
<td>Number of users followed by the customer on the social network.</td>
</tr>
<tr>
<td><code class="prettyprint">Id</code></td>
<td>10</td>
<td>The customer&rsquo;s profile id.</td>
</tr>
<tr>
<td><code class="prettyprint">AuthToken</code></td>
<td>1</td>
<td>The authentication token of the user.</td>
</tr>
<tr>
<td><code class="prettyprint">SocialData</code></td>
<td>20</td>
<td>Open field for additional data from the social network.</td>
</tr>
</tbody></table>

<h4 id="shippingaddress-and-billingaddress-field"><code class="prettyprint">ShippingAddress</code> and <code class="prettyprint">BillingAddress</code> field</h4>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProfileID</code></td>
<td>12</td>
<td>Profile ID (reserved for future use)</td>
</tr>
<tr>
<td><code class="prettyprint">FirstName</code></td>
<td>65</td>
<td>First Name</td>
</tr>
<tr>
<td><code class="prettyprint">MiddleName</code></td>
<td>65</td>
<td>Middle Name</td>
</tr>
<tr>
<td><code class="prettyprint">Lastname</code></td>
<td>65</td>
<td>Last name</td>
</tr>
<tr>
<td><code class="prettyprint">Company</code></td>
<td>255</td>
<td>Company Name</td>
</tr>
<tr>
<td><code class="prettyprint">StreetName</code></td>
<td>100</td>
<td>Shipping Street</td>
</tr>
<tr>
<td><code class="prettyprint">Streetname2</code></td>
<td>100</td>
<td>Shipping Street second line</td>
</tr>
<tr>
<td><code class="prettyprint">HouseNumber</code></td>
<td>5</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">HouseExtention</code></td>
<td>5</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">City</code></td>
<td>50</td>
<td>Shipping City</td>
</tr>
<tr>
<td><code class="prettyprint">ZipCode</code></td>
<td>50</td>
<td>Shipping Zip Code</td>
</tr>
<tr>
<td><code class="prettyprint">State</code></td>
<td>50</td>
<td>Shipping State</td>
</tr>
<tr>
<td><code class="prettyprint">CountryCode</code></td>
<td>2</td>
<td>Alpha-2 code; for example, United States is &ldquo;US&rdquo;</td>
</tr>
<tr>
<td><code class="prettyprint">Email</code></td>
<td>100</td>
<td>Shipping Contact Email</td>
</tr>
<tr>
<td><code class="prettyprint">PrimaryPhone</code></td>
<td>20</td>
<td>Shipping Primary Phone</td>
</tr>
<tr>
<td><code class="prettyprint">SecondaryPhone</code></td>
<td>20</td>
<td>Shipping Secondary Phone</td>
</tr>
</tbody></table>

<h4 id="productdetails-and-productdetail-field"> <code class="prettyprint">ProductDetails</code> and <code class="prettyprint">ProductDetail</code> field</h4>

<p><code class="prettyprint">ProductDetails</code> will contain one or more <code class="prettyprint">ProductDetail</code>. </p>

<p><code class="prettyprint">ProductDetail</code> describes a bought item.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProductCode</code></td>
<td>12</td>
<td>Article’s product Code</td>
</tr>
<tr>
<td><code class="prettyprint">SKU</code></td>
<td>50</td>
<td>Article’s Stock Keeping Unit</td>
</tr>
<tr>
<td><code class="prettyprint">Name</code></td>
<td>100</td>
<td>Article’s name</td>
</tr>
<tr>
<td><code class="prettyprint">Description</code></td>
<td>255</td>
<td>Article’s description</td>
</tr>
<tr>
<td><code class="prettyprint">Quantity</code></td>
<td>3</td>
<td>The number of products</td>
</tr>
<tr>
<td><code class="prettyprint">Price</code></td>
<td>12</td>
<td>Article’s price</td>
</tr>
<tr>
<td><code class="prettyprint">UnitPrice</code></td>
<td>12</td>
<td>Article’s Unit Price</td>
</tr>
<tr>
<td><code class="prettyprint">Type</code></td>
<td>2</td>
<td>The type of article: 1-product, 2-shipping, 3-handling</td>
</tr>
<tr>
<td><code class="prettyprint">Vat</code></td>
<td>2</td>
<td>Value-Added Tax (the value of the tax)</td>
</tr>
<tr>
<td><code class="prettyprint">Discount</code></td>
<td>2</td>
<td>The amount offered by you as discount</td>
</tr>
<tr>
<td><code class="prettyprint">Category</code></td>
<td></td>
<td>Product Category</td>
</tr>
<tr>
<td><code class="prettyprint">Subcategory</code></td>
<td></td>
<td>Product Sub Category</td>
</tr>
<tr>
<td><code class="prettyprint">Brand</code></td>
<td></td>
<td>Product Brand</td>
</tr>
<tr>
<td><code class="prettyprint">RequiresShipping</code></td>
<td></td>
<td><code class="prettyprint">true</code>/<code class="prettyprint">false</code> States whether or not the fulfillment requires shipping. This field is important for merchants dealing with digital goods.</td>
</tr>
<tr>
<td><code class="prettyprint">DeliveryAt</code></td>
<td>10</td>
<td>The planned delivery date of the product or item.</td>
</tr>
<tr>
<td><code class="prettyprint">Condition</code></td>
<td>100</td>
<td>Description of the physical condition of the item, mostly relevant for used items</td>
</tr>
<tr>
<td><code class="prettyprint">Seller</code></td>
<td></td>
<td><code class="prettyprint">public_username</code> Details about the seller of the item, relevant for marketplace orders.</td>
</tr>
</tbody></table>

<h4 id="discountcodes-and-discountcode-fields"><code class="prettyprint">DiscountCodes</code> and <code class="prettyprint">DiscountCode</code> fields</h4>

<p>If you apply discounts for your products you should add discount info.</p>

<p>in <code class="prettyprint">DiscountCodes</code> you may have one or more <code class="prettyprint">DiscountCode</code>, that contain these fields: </p>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Amount</code></td>
<td>12</td>
<td>The amount of the discount.</td>
</tr>
<tr>
<td><code class="prettyprint">Code</code></td>
<td>50</td>
<td>The code of the discount.</td>
</tr>
</tbody></table>

<h4 id="shippinglines-and-shippingline-fields"> <code class="prettyprint">ShippingLines</code> and <code class="prettyprint">ShippingLine</code> fields</h4>

<p>With this fields you can define the price and the kind of shipping that you use for your products, if applicable. </p>

<table><thead>
<tr>
<th>Field</th>
<th>Max Size</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Price</code></td>
<td>12</td>
<td>The price of the shipping method.</td>
</tr>
<tr>
<td><code class="prettyprint">Title</code></td>
<td>100</td>
<td>The title of the shipping method.</td>
</tr>
<tr>
<td><code class="prettyprint">Code</code></td>
<td>50</td>
<td>Code of the shipping method.</td>
</tr>
</tbody></table>

<h4 id="accomodationdetails-and-accomodationdetail-fields"><code class="prettyprint">AccomodationDetails</code> and <code class="prettyprint">AccomodationDetail</code> fields</h4>

<p>These tags are useful for Hotel and Acomodation companies. You can put as many <code class="prettyprint">AccomodationDetail</code> you need inside one <code class="prettyprint">AccomodationDetails</code> group tag. </p>

<table><thead>
<tr>
<th>Field</th>
<th>type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">City</code></td>
<td>string</td>
<td>Accomodation City</td>
</tr>
<tr>
<td><code class="prettyprint">CountryCode</code></td>
<td>string</td>
<td>Accomodation country</td>
</tr>
<tr>
<td><code class="prettyprint">Title</code></td>
<td>string</td>
<td>Accomodation name</td>
</tr>
<tr>
<td><code class="prettyprint">CheckInDate</code></td>
<td>string</td>
<td>Date-Time of arrival in ISO standard</td>
</tr>
<tr>
<td><code class="prettyprint">CheckOutDate</code></td>
<td>string</td>
<td>Date-Time of departure in ISO standard</td>
</tr>
<tr>
<td><code class="prettyprint">ProductId</code></td>
<td>string</td>
<td>Booking.com unique identifier of the offer, skip if irrelevant</td>
</tr>
<tr>
<td><code class="prettyprint">Rating</code></td>
<td>string</td>
<td>Star rating of the accomodation</td>
</tr>
<tr>
<td><code class="prettyprint">NumberOfGuests</code></td>
<td>string</td>
<td>Number of guests</td>
</tr>
<tr>
<td><code class="prettyprint">AccommodationType</code></td>
<td>string</td>
<td>Accomodation type: Hotel, Room, &hellip;</td>
</tr>
<tr>
<td><code class="prettyprint">RoomType</code></td>
<td>string</td>
<td>Advertised room name</td>
</tr>
<tr>
<td><code class="prettyprint">Price</code></td>
<td>string</td>
<td>price of one room of this kind for the period</td>
</tr>
<tr>
<td><code class="prettyprint">Quantity</code></td>
<td>string</td>
<td>how many rooms of this kind in the order</td>
</tr>
<tr>
<td><code class="prettyprint">CancellationPolicy</code></td>
<td>string</td>
<td>Write here your cancellation policy, e.g. <code class="prettyprint">Non-Refundable</code></td>
</tr>
</tbody></table>

<h4 id="passengerdetails-and-passengerdetail-fields"><code class="prettyprint">PassengerDetails</code> and <code class="prettyprint">PassengerDetail</code> fields</h4>

<p>These tags are useful for travel agencies - flights, ships, etc. You can put as many <code class="prettyprint">PassengerDetail</code> you need inside one <code class="prettyprint">PassengerDetails</code> group tag. </p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">FirstName</code></td>
<td>Name of the passenger</td>
</tr>
<tr>
<td><code class="prettyprint">LastName</code></td>
<td>Last name of the passenger</td>
</tr>
<tr>
<td><code class="prettyprint">DateOfBirth</code></td>
<td>Date of birth, ISO format</td>
</tr>
<tr>
<td><code class="prettyprint">NationalityCode</code></td>
<td>Nationality code</td>
</tr>
<tr>
<td><code class="prettyprint">InsuranceType</code></td>
<td>Insurance title if was chosen by the end customer</td>
</tr>
<tr>
<td><code class="prettyprint">InsurancePrice</code></td>
<td>Insurance price if was chosen by the end customer</td>
</tr>
<tr>
<td><code class="prettyprint">DocumentNumber</code></td>
<td>A valid identification document number</td>
</tr>
<tr>
<td><code class="prettyprint">DocumentType</code></td>
<td>The type of the identification document</td>
</tr>
<tr>
<td><code class="prettyprint">DocumentIssueDate</code></td>
<td>The identification document issue date</td>
</tr>
<tr>
<td><code class="prettyprint">DocumentExpirationDate</code></td>
<td>The identification document expiration date</td>
</tr>
<tr>
<td><code class="prettyprint">PassengerType</code></td>
<td><code class="prettyprint">adult</code> or <code class="prettyprint">child</code></td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<aside class="notice">The error codes returned by GestPay are constantly updated.</aside>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>Transaction correctly processed</td>
</tr>
<tr>
<td>10</td>
<td>Payment page correctly loaded</td>
</tr>
<tr>
<td>57</td>
<td>Blocked credit card</td>
</tr>
<tr>
<td>58</td>
<td>Confirmed amount exceeds authorized amount</td>
</tr>
<tr>
<td>63</td>
<td>Demand for settlement of one nonexistent transaction</td>
</tr>
<tr>
<td>64</td>
<td>Expired preauthorization</td>
</tr>
<tr>
<td>65</td>
<td>Wrong currency</td>
</tr>
<tr>
<td>66</td>
<td>Preauthorization already notified</td>
</tr>
<tr>
<td>74</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>97</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>100</td>
<td>Transaction interrupted by bank authorizative system</td>
</tr>
<tr>
<td>150</td>
<td>Wrong merchant configuration in bank authorizative system</td>
</tr>
<tr>
<td>208</td>
<td>Wrong expiry date</td>
</tr>
<tr>
<td>212</td>
<td>Bank authorizative system not available</td>
</tr>
<tr>
<td>251</td>
<td>Insufficient credit</td>
</tr>
<tr>
<td>401</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>402</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>403</td>
<td>Technical error</td>
</tr>
<tr>
<td>404</td>
<td>Collect card</td>
</tr>
<tr>
<td>405</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>406</td>
<td>Technical error</td>
</tr>
<tr>
<td>409</td>
<td>Technical error</td>
</tr>
<tr>
<td>412</td>
<td>Technical error</td>
</tr>
<tr>
<td>413</td>
<td>Technical error</td>
</tr>
<tr>
<td>414</td>
<td>Card not recognized</td>
</tr>
<tr>
<td>415</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>416</td>
<td>Pin errato</td>
</tr>
<tr>
<td>417</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>418</td>
<td>Network not available</td>
</tr>
<tr>
<td>419</td>
<td>Wrong transaction date</td>
</tr>
<tr>
<td>420</td>
<td>Wrong card date</td>
</tr>
<tr>
<td>430</td>
<td>Technical error</td>
</tr>
<tr>
<td>431</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>433</td>
<td>Card expired</td>
</tr>
<tr>
<td>434</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>435</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>436</td>
<td>Card not qualified</td>
</tr>
<tr>
<td>437</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>438</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>439</td>
<td>Card not recognized</td>
</tr>
<tr>
<td>441</td>
<td>Blocked credit card</td>
</tr>
<tr>
<td>443</td>
<td>Blocked credit card</td>
</tr>
<tr>
<td>451</td>
<td>Amount not available</td>
</tr>
<tr>
<td>454</td>
<td>Card expired</td>
</tr>
<tr>
<td>455</td>
<td>Operation not performed</td>
</tr>
<tr>
<td>456</td>
<td>Card not recognized</td>
</tr>
<tr>
<td>457</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>458</td>
<td>Wrong merchant configuration in bank authorizative system</td>
</tr>
<tr>
<td>461</td>
<td>Amount not available</td>
</tr>
<tr>
<td>462</td>
<td>Blocked credit card</td>
</tr>
<tr>
<td>468</td>
<td>Bank authorizative system not available</td>
</tr>
<tr>
<td>475</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>490</td>
<td>Technical error</td>
</tr>
<tr>
<td>491</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>492</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>494</td>
<td>Technical error</td>
</tr>
<tr>
<td>516</td>
<td>Operation canceled by the buyer</td>
</tr>
<tr>
<td>551</td>
<td>Unauthorized bank transfer</td>
</tr>
<tr>
<td>552</td>
<td>MyBank payment not completed</td>
</tr>
<tr>
<td>553</td>
<td>MyBank payment abbandoned by buyer</td>
</tr>
<tr>
<td>600</td>
<td>Technical error</td>
</tr>
<tr>
<td>613</td>
<td>Technical error</td>
</tr>
<tr>
<td>614</td>
<td>Technical error</td>
</tr>
<tr>
<td>615</td>
<td>Technical error</td>
</tr>
<tr>
<td>810</td>
<td>Bank authorizative system not available</td>
</tr>
<tr>
<td>811</td>
<td>Wrong merchant configuration in bank authorizative system</td>
</tr>
<tr>
<td>901</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>902</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>903</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>904</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>905</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>906</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>907</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>908</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>910</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>911</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>913</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>914</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>915</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>916</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>917</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>918</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>919</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>920</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>950</td>
<td>Not qualified credit card</td>
</tr>
<tr>
<td>951</td>
<td>Wrong merchant configuration in bank authorizative system</td>
</tr>
<tr>
<td>998</td>
<td>Credit card with wrong check-digit</td>
</tr>
<tr>
<td>999</td>
<td>Operation not performed</td>
</tr>
<tr>
<td>1100</td>
<td>Empty parameter string</td>
</tr>
<tr>
<td>1101</td>
<td>Invalid format of parameter string</td>
</tr>
<tr>
<td>1102</td>
<td>No parameter name precedes = symbol</td>
</tr>
<tr>
<td>1103</td>
<td>Parameter string ending with a separator</td>
</tr>
<tr>
<td>1104</td>
<td>Invalid parameter name</td>
</tr>
<tr>
<td>1105</td>
<td>Invalid parameter value</td>
</tr>
<tr>
<td>1106</td>
<td>Repeated parameter name</td>
</tr>
<tr>
<td>1107</td>
<td>Unexpected parameter name. Please double check Fields and Parameters configuration in Back Office.</td>
</tr>
<tr>
<td>1108</td>
<td>Compulsory parameter not set</td>
</tr>
<tr>
<td>1109</td>
<td>Missing parameter</td>
</tr>
<tr>
<td>1110</td>
<td>Missing PAY1_UICCODE parameter</td>
</tr>
<tr>
<td>1111</td>
<td>Invalid currency code</td>
</tr>
<tr>
<td>1112</td>
<td>Missing PAY1_AMOUNT parameter</td>
</tr>
<tr>
<td>1113</td>
<td>Not numeric amount</td>
</tr>
<tr>
<td>1114</td>
<td>Amount with a wrong number of decimal digits</td>
</tr>
<tr>
<td>1115</td>
<td>Missing P A Y1_SHOPTRANSACTIONID parameter</td>
</tr>
<tr>
<td>1116</td>
<td>Too long P A Y1_SHOPTRANSACTIONID parameter</td>
</tr>
<tr>
<td>1117</td>
<td>Invalid language identifier</td>
</tr>
<tr>
<td>1118</td>
<td>Not numeric characters in credit card number</td>
</tr>
<tr>
<td>1119</td>
<td>Credit card number with wrong length</td>
</tr>
<tr>
<td>1120</td>
<td>Credit card with wrong check-digit</td>
</tr>
<tr>
<td>1121</td>
<td>Credit card belongs to a Company not enabled</td>
</tr>
<tr>
<td>1122</td>
<td>Expiry year without expiry month</td>
</tr>
<tr>
<td>1123</td>
<td>Expiry month without expiry year</td>
</tr>
<tr>
<td>1124</td>
<td>Invalid expiry month</td>
</tr>
<tr>
<td>1125</td>
<td>Invalid expiry year</td>
</tr>
<tr>
<td>1126</td>
<td>Expired expiry date</td>
</tr>
<tr>
<td>1127</td>
<td>Invalid cardholder email address</td>
</tr>
<tr>
<td>1128</td>
<td>Too long parameter string</td>
</tr>
<tr>
<td>1129</td>
<td>Too long parameter value</td>
</tr>
<tr>
<td>1130</td>
<td>Not accepted call: missing parameter A</td>
</tr>
<tr>
<td>1131</td>
<td>Not accepted call: Shop not recognized</td>
</tr>
<tr>
<td>1132</td>
<td>Not accepted call: shop is not in active state</td>
</tr>
<tr>
<td>1133</td>
<td>Not accepted call: missing parameter B</td>
</tr>
<tr>
<td>1134</td>
<td>Not accepted call: empty parameter B</td>
</tr>
<tr>
<td>1135</td>
<td>Not accepted call: other parameters beside A and B are present</td>
</tr>
<tr>
<td>1136</td>
<td>Not accepted call: transaction did not begin with a call to server-server cryptography system</td>
</tr>
<tr>
<td>1137</td>
<td>Not accepted call: transaction already processed before</td>
</tr>
<tr>
<td>1138</td>
<td>Not accepted call: card number or expiry date are missing</td>
</tr>
<tr>
<td>1139</td>
<td>Not accepted call: missing published payment page</td>
</tr>
<tr>
<td>1140</td>
<td>Transaction cancelled by buyer</td>
</tr>
<tr>
<td>1141</td>
<td>Not accepted call: input parameter string not acceptable</td>
</tr>
<tr>
<td>1142</td>
<td>Not accepted call: invalid IP Address</td>
</tr>
<tr>
<td>1143</td>
<td>Transaction abandoned by buyer</td>
</tr>
<tr>
<td>1144</td>
<td>Compulsory field not set</td>
</tr>
<tr>
<td>1145</td>
<td>Invalid OTP</td>
</tr>
<tr>
<td>1146</td>
<td>Too small amount</td>
</tr>
<tr>
<td>1147</td>
<td>Too big amount</td>
</tr>
<tr>
<td>1148</td>
<td>Invalid cardholder name</td>
</tr>
<tr>
<td>1149</td>
<td>Missing or wrong CVV2</td>
</tr>
<tr>
<td>1150</td>
<td>IPIN must be set</td>
</tr>
<tr>
<td>1151</td>
<td>Parameters error</td>
</tr>
<tr>
<td>1153</td>
<td>GestPay failed to verify if the card is enrolled to VBV service</td>
</tr>
<tr>
<td>1154</td>
<td>Not accepterd call: missing parameter TransKey</td>
</tr>
<tr>
<td>1160</td>
<td>Wrong CustomToken length</td>
</tr>
<tr>
<td>1161</td>
<td>Wrong CustomToken digits number</td>
</tr>
<tr>
<td>1162</td>
<td>CustomToken with illegal characters</td>
</tr>
<tr>
<td>1163</td>
<td>CustomToken used for another card</td>
</tr>
<tr>
<td>1164</td>
<td>Expired Token</td>
</tr>
<tr>
<td>1165</td>
<td>Token not found</td>
</tr>
<tr>
<td>1200</td>
<td>No match between ABI code and BankPass Banks</td>
</tr>
<tr>
<td>1201</td>
<td>BankPass Transaction abandoned by buyer</td>
</tr>
<tr>
<td>1202</td>
<td>BankPass - Buyer login failed</td>
</tr>
<tr>
<td>1203</td>
<td>BankPass - no payment methods available</td>
</tr>
<tr>
<td>1204</td>
<td>BankPass - technical error</td>
</tr>
<tr>
<td>1205</td>
<td>BankPass Server-Server: URL Return must be set</td>
</tr>
<tr>
<td>1206</td>
<td>BankPass Server-Server: too long URL Return (max 250 char)</td>
</tr>
<tr>
<td>1207</td>
<td>BankPass Server-Server: invalid URL Return (it must begin with http:// or https://)</td>
</tr>
<tr>
<td>1208</td>
<td>BankPass Server-Server: URL Return parameter missing</td>
</tr>
<tr>
<td>1209</td>
<td>BankPass Server-Server: IDBankPass must be set</td>
</tr>
<tr>
<td>1210</td>
<td>BankPass Server-Server: invalid IDBankPass</td>
</tr>
<tr>
<td>1300</td>
<td>Shipping Address Country Error</td>
</tr>
<tr>
<td>1301</td>
<td>Shipping Address1 Empty</td>
</tr>
<tr>
<td>1302</td>
<td>Shipping Address City Empty</td>
</tr>
<tr>
<td>1303</td>
<td>Shipping Address State Empty</td>
</tr>
<tr>
<td>1304</td>
<td>Shipping Address Postal Code Empty</td>
</tr>
<tr>
<td>1305</td>
<td>Shipping Address Country Empty</td>
</tr>
<tr>
<td>1306</td>
<td>Shipping Address Invalid City State Postal Code</td>
</tr>
<tr>
<td>1987</td>
<td>Technical error</td>
</tr>
<tr>
<td>1999</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>2000</td>
<td>Transaction exceeds maximum operations number in time period</td>
</tr>
<tr>
<td>2001</td>
<td>Transaction exceeds maximum number of operations performed by the same buyer in time period</td>
</tr>
<tr>
<td>2002</td>
<td>Transaction exceeds maximum amount in time period</td>
</tr>
<tr>
<td>2003</td>
<td>Transaction exceeds maximum amount payable by same buyer in time period</td>
</tr>
<tr>
<td>2004</td>
<td>Transaction contains a field value that had been declared not acceptable</td>
</tr>
<tr>
<td>2005</td>
<td>Buyer abandoned the transaction because it was double</td>
</tr>
<tr>
<td>2006</td>
<td>Wrong line length</td>
</tr>
<tr>
<td>2007</td>
<td>Wrong value in SHOPTRANSACTIONID field</td>
</tr>
<tr>
<td>2008</td>
<td>Wrong value in CURRENCY field</td>
</tr>
<tr>
<td>2009</td>
<td>Wrong value in AMOUNT field</td>
</tr>
<tr>
<td>2010</td>
<td>Wrong value in AUTHORIZATION DATE field</td>
</tr>
<tr>
<td>2011</td>
<td>Transaction not found</td>
</tr>
<tr>
<td>2012</td>
<td>Transaction ambiguous</td>
</tr>
<tr>
<td>2013</td>
<td>Text file contains more rows related to the same transaction</td>
</tr>
<tr>
<td>2014</td>
<td>You requested a refund operation with an amount exceeding transaction balance</td>
</tr>
<tr>
<td>2015</td>
<td>Wrong value in BANKTRANSACTIONID field</td>
</tr>
<tr>
<td>2016</td>
<td>Fields BANKTRANSACTIONID and SHOPTRANSACTIONID are empty</td>
</tr>
<tr>
<td>2017</td>
<td>Transaction can not be deleted</td>
</tr>
<tr>
<td>2018</td>
<td>Transaction can not be refunded</td>
</tr>
<tr>
<td>2019</td>
<td>Transaction can not be settled</td>
</tr>
<tr>
<td>2020</td>
<td>Transaction can not be renounced</td>
</tr>
<tr>
<td>2030</td>
<td>Due to RED configuration, transaction is sent to credit card companies, even if 3d-Secure authentication is failed</td>
</tr>
<tr>
<td>2500</td>
<td>payment abbandoned by buyer</td>
</tr>
<tr>
<td>2501</td>
<td>payment not completed</td>
</tr>
<tr>
<td>4001</td>
<td>Unexpected parameter value</td>
</tr>
<tr>
<td>4002</td>
<td>Not numeric parameter value</td>
</tr>
<tr>
<td>4100</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4101</td>
<td>Credit card number with wrong length</td>
</tr>
<tr>
<td>4102</td>
<td>Amount not available</td>
</tr>
<tr>
<td>4103</td>
<td>Technical error</td>
</tr>
<tr>
<td>4104</td>
<td>Technical error</td>
</tr>
<tr>
<td>4105</td>
<td>Technical</td>
</tr>
<tr>
<td>4106</td>
<td>Technical</td>
</tr>
<tr>
<td>4108</td>
<td>Technical error in connection with Credit Card Company network error</td>
</tr>
<tr>
<td>4109</td>
<td>Technical error</td>
</tr>
<tr>
<td>4200</td>
<td>Technical error</td>
</tr>
<tr>
<td>4201</td>
<td>Technical error</td>
</tr>
<tr>
<td>4202</td>
<td>Technical error</td>
</tr>
<tr>
<td>4203</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>4204</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4205</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4206</td>
<td>Credit card with wrong check-digit. Please double-check the credit card number typed in.</td>
</tr>
<tr>
<td>4207</td>
<td>Technical error</td>
</tr>
<tr>
<td>4208</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4209</td>
<td>Technical error</td>
</tr>
<tr>
<td>4300</td>
<td>Technical error</td>
</tr>
<tr>
<td>4301</td>
<td>Too big amount</td>
</tr>
<tr>
<td>4302</td>
<td>Technical error</td>
</tr>
<tr>
<td>4303</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4304</td>
<td>Technical error</td>
</tr>
<tr>
<td>4305</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>4306</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4307</td>
<td>Technical error</td>
</tr>
<tr>
<td>4308</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4309</td>
<td>Too big amount</td>
</tr>
<tr>
<td>4400</td>
<td>Wrong transaction date</td>
</tr>
<tr>
<td>4401</td>
<td>Wrong expiry date</td>
</tr>
<tr>
<td>4402</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>4403</td>
<td>Technical error</td>
</tr>
<tr>
<td>4404</td>
<td>Technical error</td>
</tr>
<tr>
<td>4405</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4406</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4407</td>
<td>Amount not available</td>
</tr>
<tr>
<td>4408</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4409</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4500</td>
<td>Technical error</td>
</tr>
<tr>
<td>4501</td>
<td>Technical error</td>
</tr>
<tr>
<td>4502</td>
<td>Technical error</td>
</tr>
<tr>
<td>4503</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4504</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4505</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4506</td>
<td>Technical error</td>
</tr>
<tr>
<td>4507</td>
<td>Technical error</td>
</tr>
<tr>
<td>4508</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4604</td>
<td>Technical error</td>
</tr>
<tr>
<td>4701</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4702</td>
<td>Wrong expiry date</td>
</tr>
<tr>
<td>4703</td>
<td>Card not qualified</td>
</tr>
<tr>
<td>4704</td>
<td>Amount not available</td>
</tr>
<tr>
<td>4705</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>4706</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>4707</td>
<td>Transaction already processed</td>
</tr>
<tr>
<td>4708</td>
<td>MyBank: communication with the buyer&rsquo;s Bank failed</td>
</tr>
<tr>
<td>4709</td>
<td>Ideal: communication with the buyer&rsquo;s Bank failed</td>
</tr>
<tr>
<td>4710</td>
<td>PayPal Error</td>
</tr>
<tr>
<td>4720</td>
<td>Rate in Rete: communication with Consel failed</td>
</tr>
<tr>
<td>4730</td>
<td>C-pay: communication with Compass failed</td>
</tr>
<tr>
<td>4731</td>
<td>Not authorized transaction by Compass</td>
</tr>
<tr>
<td>4732</td>
<td>Transazione non autorizzata da Consel</td>
</tr>
<tr>
<td>4733</td>
<td>Apple Pay: unable to decrypt the PKPaymentToken  - please check the Payment Processing Certificate</td>
</tr>
<tr>
<td>4734</td>
<td>Apple Pay: PKPaymentToken expired</td>
</tr>
<tr>
<td>4800</td>
<td>Expired session</td>
</tr>
<tr>
<td>4801</td>
<td>Invalid ShopTransactionID value</td>
</tr>
<tr>
<td>4802</td>
<td>Currency or Amount don&rsquo;t match the original transaction</td>
</tr>
<tr>
<td>7400</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>7401</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>7402</td>
<td>Card not qualified</td>
</tr>
<tr>
<td>7403</td>
<td>Card not recognized</td>
</tr>
<tr>
<td>7404</td>
<td>Card expired</td>
</tr>
<tr>
<td>7405</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>7406</td>
<td>Wrong card date</td>
</tr>
<tr>
<td>7407</td>
<td>Wrong transaction date</td>
</tr>
<tr>
<td>7408</td>
<td>System error</td>
</tr>
<tr>
<td>7409</td>
<td>Merchant not recognized</td>
</tr>
<tr>
<td>7410</td>
<td>Invalid format</td>
</tr>
<tr>
<td>7411</td>
<td>Amount not available</td>
</tr>
<tr>
<td>7412</td>
<td>Not settled</td>
</tr>
<tr>
<td>7413</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>7414</td>
<td>Network not available</td>
</tr>
<tr>
<td>7415</td>
<td>Collect card</td>
</tr>
<tr>
<td>7416</td>
<td>PIN attempts exhausted</td>
</tr>
<tr>
<td>7417</td>
<td>Blocked terminal</td>
</tr>
<tr>
<td>7418</td>
<td>Forcedly Closed terminal</td>
</tr>
<tr>
<td>7419</td>
<td>Not permitted transaction</td>
</tr>
<tr>
<td>7420</td>
<td>Not authorized transaction</td>
</tr>
<tr>
<td>7421</td>
<td>Service interrupted at 01/01/2002</td>
</tr>
<tr>
<td>7500</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>7600</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>8000</td>
<td>File correctly processed</td>
</tr>
<tr>
<td>8001</td>
<td>Header/bottom record not found</td>
</tr>
<tr>
<td>8002</td>
<td>Merchant code not set</td>
</tr>
<tr>
<td>8003</td>
<td>Incorrect row number</td>
</tr>
<tr>
<td>8004</td>
<td>Incorrect file format</td>
</tr>
<tr>
<td>8005</td>
<td>Merchant not enabled</td>
</tr>
<tr>
<td>8006</td>
<td>Verify By Visa</td>
</tr>
<tr>
<td>8007</td>
<td>Feature disabled for VISA credit card</td>
</tr>
<tr>
<td>8008</td>
<td>Feature disabled</td>
</tr>
<tr>
<td>8009</td>
<td>Payment interrupted</td>
</tr>
<tr>
<td>8010</td>
<td>Wrong credit card number for this transaction</td>
</tr>
<tr>
<td>8011</td>
<td>Transaction correctly received</td>
</tr>
<tr>
<td>8012</td>
<td>Authorization not found</td>
</tr>
<tr>
<td>8013</td>
<td>Settlement not found</td>
</tr>
<tr>
<td>8014</td>
<td>Settlement amount &gt; Authorization amount</td>
</tr>
<tr>
<td>8015</td>
<td>Refund amount &gt; balance</td>
</tr>
<tr>
<td>8016</td>
<td>Transaction without settlement</td>
</tr>
<tr>
<td>8017</td>
<td>File waiting to be processed</td>
</tr>
<tr>
<td>8018</td>
<td>File correctly processed</td>
</tr>
<tr>
<td>8021</td>
<td>Feature disable for MASTERCARD credit card</td>
</tr>
<tr>
<td>8022</td>
<td>Feature disable for JCB credit card</td>
</tr>
<tr>
<td>8023</td>
<td>Feature disabled for MAESTRO cards</td>
</tr>
<tr>
<td>8888</td>
<td>UP Mobile Payment</td>
</tr>
<tr>
<td>9991</td>
<td>Browser not supported</td>
</tr>
<tr>
<td>9992</td>
<td>Error creating iFrame</td>
</tr>
<tr>
<td>9997</td>
<td>Phase with error</td>
</tr>
<tr>
<td>9998</td>
<td>Phase correctly ended</td>
</tr>
<tr>
<td>9999</td>
<td>System Error</td>
</tr>
</tbody></table>

          <h1 id="payment-type-codes">Payment Type Codes</h1>

<table><thead>
<tr>
<th>Description</th>
<th>PaymentType</th>
</tr>
</thead><tbody>
<tr>
<td>ALIPAY</td>
<td><code class="prettyprint">S2PALI</code></td>
</tr>
<tr>
<td>APPLEPAY</td>
<td><code class="prettyprint">APPLEPAY</code></td>
</tr>
<tr>
<td>BANCONTACT</td>
<td><code class="prettyprint">BANCONTACT</code></td>
</tr>
<tr>
<td>BITCOIN</td>
<td><code class="prettyprint">S2PBIT</code></td>
</tr>
<tr>
<td>CARDSRUSSIA</td>
<td><code class="prettyprint">S2PCRU</code></td>
</tr>
<tr>
<td>CASHU</td>
<td><code class="prettyprint">CASHU</code></td>
</tr>
<tr>
<td>COMPASS C-PAY</td>
<td><code class="prettyprint">COMPASS</code></td>
</tr>
<tr>
<td>CONSEL RATE IN RETE</td>
<td><code class="prettyprint">CONSEL</code></td>
</tr>
<tr>
<td>CREDIT CARDS</td>
<td><code class="prettyprint">CREDITCARD</code></td>
</tr>
<tr>
<td>EPS</td>
<td><code class="prettyprint">S2PEPS</code></td>
</tr>
<tr>
<td>GIROPAY</td>
<td><code class="prettyprint">S2PGIR</code></td>
</tr>
<tr>
<td>HYPE</td>
<td><code class="prettyprint">HYPE</code></td>
</tr>
<tr>
<td>IDEAL</td>
<td><code class="prettyprint">S2PIDE</code></td>
</tr>
<tr>
<td>IDEAL (Direct)</td>
<td><code class="prettyprint">IDEAL</code></td>
</tr>
<tr>
<td>KLARNA</td>
<td><code class="prettyprint">S2PKLA</code></td>
</tr>
<tr>
<td>KONBINI</td>
<td><code class="prettyprint">S2PKON</code></td>
</tr>
<tr>
<td>MASTERPASS</td>
<td><code class="prettyprint">MASTERPASS</code></td>
</tr>
<tr>
<td>MERCADOPAGO</td>
<td><code class="prettyprint">S2PMER</code></td>
</tr>
<tr>
<td>MULTIBANCO</td>
<td><code class="prettyprint">S2PMUL</code></td>
</tr>
<tr>
<td>MYBANK</td>
<td><code class="prettyprint">MYBANK</code></td>
</tr>
<tr>
<td>ONECARD</td>
<td><code class="prettyprint">ONECARD</code></td>
</tr>
<tr>
<td>PAYPAL</td>
<td><code class="prettyprint">PAYPAL</code></td>
</tr>
<tr>
<td>PAYSAFECARD</td>
<td><code class="prettyprint">S2PPSC</code></td>
</tr>
<tr>
<td>QIWI</td>
<td><code class="prettyprint">S2PQIW</code></td>
</tr>
<tr>
<td>SOFORT</td>
<td><code class="prettyprint">S2PSOF</code></td>
</tr>
<tr>
<td>SOFORT (Direct)</td>
<td><code class="prettyprint">SOFORT</code></td>
</tr>
<tr>
<td>TRUSTPAY</td>
<td><code class="prettyprint">TRUSTPAY</code></td>
</tr>
<tr>
<td>UNIONPAY</td>
<td><code class="prettyprint">S2PUNI</code></td>
</tr>
<tr>
<td>WEBMONEY</td>
<td><code class="prettyprint">S2PWMO</code></td>
</tr>
<tr>
<td>YANDEX</td>
<td><code class="prettyprint">S2PYAN</code></td>
</tr>
</tbody></table>

<p>For more informations about payment types, read <a href="http://docs.gestpay.it/oth/what-does-it-mean-that-gestpay-is-a-payment-gateway.html">the docs</a>.</p>

          <h1 id="currency-codes">Currency Codes</h1>

<p>Currency codes are handled by GestPay using the currency attribute.</p>

<table><thead>
<tr>
<th style="text-align: right">UIC code</th>
<th style="text-align: center">ISO code</th>
<th style="text-align: right">ISO number</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">187</td>
<td style="text-align: center">AED</td>
<td style="text-align: right">784</td>
<td>United Arab Emirates dirham</td>
</tr>
<tr>
<td style="text-align: right">109</td>
<td style="text-align: center">AUD</td>
<td style="text-align: right">36</td>
<td>Australian dollar</td>
</tr>
<tr>
<td style="text-align: right">262</td>
<td style="text-align: center">BGN</td>
<td style="text-align: right">975</td>
<td>Bulgarian lev</td>
</tr>
<tr>
<td style="text-align: right">234</td>
<td style="text-align: center">BRL</td>
<td style="text-align: right">986</td>
<td>Brazilian real</td>
</tr>
<tr>
<td style="text-align: right">12</td>
<td style="text-align: center">CAD</td>
<td style="text-align: right">124</td>
<td>Canadian dollar</td>
</tr>
<tr>
<td style="text-align: right">3</td>
<td style="text-align: center">CHF</td>
<td style="text-align: right">756</td>
<td>Swiss franc</td>
</tr>
<tr>
<td style="text-align: right">144</td>
<td style="text-align: center">CNY</td>
<td style="text-align: right">156</td>
<td>Chinese yuan</td>
</tr>
<tr>
<td style="text-align: right">223</td>
<td style="text-align: center">CZK</td>
<td style="text-align: right">203</td>
<td>Czech koruna</td>
</tr>
<tr>
<td style="text-align: right">7</td>
<td style="text-align: center">DKK</td>
<td style="text-align: right">208</td>
<td>Danish krone</td>
</tr>
<tr>
<td style="text-align: right">242</td>
<td style="text-align: center">EUR</td>
<td style="text-align: right">978</td>
<td>Euro</td>
</tr>
<tr>
<td style="text-align: right">2</td>
<td style="text-align: center">GBP</td>
<td style="text-align: right">826</td>
<td>Pound sterling</td>
</tr>
<tr>
<td style="text-align: right">103</td>
<td style="text-align: center">HKD</td>
<td style="text-align: right">344</td>
<td>Hong Kong dollar</td>
</tr>
<tr>
<td style="text-align: right">229</td>
<td style="text-align: center">HRK</td>
<td style="text-align: right">191</td>
<td>Croatian kuna</td>
</tr>
<tr>
<td style="text-align: right">153</td>
<td style="text-align: center">HUF</td>
<td style="text-align: right">348</td>
<td>Hungarian forint</td>
</tr>
<tr>
<td style="text-align: right">123</td>
<td style="text-align: center">IDR</td>
<td style="text-align: right">360</td>
<td>Indonesian rupiah</td>
</tr>
<tr>
<td style="text-align: right">203</td>
<td style="text-align: center">ILS</td>
<td style="text-align: right">376</td>
<td>Israeli new shekel</td>
</tr>
<tr>
<td style="text-align: right">31</td>
<td style="text-align: center">INR</td>
<td style="text-align: right">356</td>
<td>Indian rupee</td>
</tr>
<tr>
<td style="text-align: right">62</td>
<td style="text-align: center">ISK</td>
<td style="text-align: right">352</td>
<td>Icelandic króna</td>
</tr>
<tr>
<td style="text-align: right">71</td>
<td style="text-align: center">JPY</td>
<td style="text-align: right">392</td>
<td>Japanese yen</td>
</tr>
<tr>
<td style="text-align: right">119</td>
<td style="text-align: center">KRW</td>
<td style="text-align: right">410</td>
<td>South Korean won</td>
</tr>
<tr>
<td style="text-align: right">55</td>
<td style="text-align: center">MYR</td>
<td style="text-align: right">458</td>
<td>Malaysian ringgit</td>
</tr>
<tr>
<td style="text-align: right">81</td>
<td style="text-align: center">NGN</td>
<td style="text-align: right">566</td>
<td>Nigerian naira</td>
</tr>
<tr>
<td style="text-align: right">8</td>
<td style="text-align: center">NOK</td>
<td style="text-align: right">578</td>
<td>Norwegian krone</td>
</tr>
<tr>
<td style="text-align: right">113</td>
<td style="text-align: center">NZD</td>
<td style="text-align: right">554</td>
<td>New Zealand dollar</td>
</tr>
<tr>
<td style="text-align: right">66</td>
<td style="text-align: center">PHP</td>
<td style="text-align: right">608</td>
<td>Philippine peso</td>
</tr>
<tr>
<td style="text-align: right">26</td>
<td style="text-align: center">PKR</td>
<td style="text-align: right">586</td>
<td>Pakistani rupee</td>
</tr>
<tr>
<td style="text-align: right">237</td>
<td style="text-align: center">PLN</td>
<td style="text-align: right">985</td>
<td>Polish złoty</td>
</tr>
<tr>
<td style="text-align: right">270</td>
<td style="text-align: center">RON</td>
<td style="text-align: right">946</td>
<td>Romanian leu</td>
</tr>
<tr>
<td style="text-align: right">244</td>
<td style="text-align: center">RUB</td>
<td style="text-align: right">643</td>
<td>Russian ruble</td>
</tr>
<tr>
<td style="text-align: right">75</td>
<td style="text-align: center">SAR</td>
<td style="text-align: right">682</td>
<td>Saudi riyal</td>
</tr>
<tr>
<td style="text-align: right">9</td>
<td style="text-align: center">SEK</td>
<td style="text-align: right">752</td>
<td>Swedish krona/kronor</td>
</tr>
<tr>
<td style="text-align: right">124</td>
<td style="text-align: center">SGD</td>
<td style="text-align: right">702</td>
<td>Singapore dollar</td>
</tr>
<tr>
<td style="text-align: right">73</td>
<td style="text-align: center">THB</td>
<td style="text-align: right">764</td>
<td>Thai baht</td>
</tr>
<tr>
<td style="text-align: right">267</td>
<td style="text-align: center">TRY</td>
<td style="text-align: right">949</td>
<td>Turkish lira</td>
</tr>
<tr>
<td style="text-align: right">143</td>
<td style="text-align: center">TWD</td>
<td style="text-align: right">901</td>
<td>New Taiwan dollar</td>
</tr>
<tr>
<td style="text-align: right">241</td>
<td style="text-align: center">UAH</td>
<td style="text-align: right">980</td>
<td>Ukrainian hryvnia</td>
</tr>
<tr>
<td style="text-align: right">1</td>
<td style="text-align: center">USD</td>
<td style="text-align: right">840</td>
<td>United States dollar</td>
</tr>
<tr>
<td style="text-align: right">145</td>
<td style="text-align: center">VND</td>
<td style="text-align: right">704</td>
<td>Vietnamese đồng</td>
</tr>
<tr>
<td style="text-align: right">82</td>
<td style="text-align: center">ZAR</td>
<td style="text-align: right">710</td>
<td>South African rand</td>
</tr>
</tbody></table>

          <h1 id="paypal-country-codes">Paypal Country Codes</h1>

<p>You can find all the Country Codes that are supported by Paypal at <a href="https://developer.paypal.com/docs/classic/api/country_codes/">this link</a> and are also reported here for simplicity.</p>

<table><thead>
<tr>
<th>Country or Region Supported</th>
<th>Country or Region Code</th>
</tr>
</thead><tbody>
<tr>
<td>ALBANIA</td>
<td>AL</td>
</tr>
<tr>
<td>ALGERIA</td>
<td>DZ</td>
</tr>
<tr>
<td>ANDORRA</td>
<td>AD</td>
</tr>
<tr>
<td>ANGOLA</td>
<td>AO</td>
</tr>
<tr>
<td>ANGUILLA</td>
<td>AI</td>
</tr>
<tr>
<td>ANTIGUA &amp; BARBUDA</td>
<td>AG</td>
</tr>
<tr>
<td>ARGENTINA</td>
<td>AR</td>
</tr>
<tr>
<td>ARMENIA</td>
<td>AM</td>
</tr>
<tr>
<td>ARUBA</td>
<td>AW</td>
</tr>
<tr>
<td>AUSTRALIA</td>
<td>AU</td>
</tr>
<tr>
<td>AUSTRIA</td>
<td>AT</td>
</tr>
<tr>
<td>AZERBAIJAN</td>
<td>AZ</td>
</tr>
<tr>
<td>BAHAMAS</td>
<td>BS</td>
</tr>
<tr>
<td>BAHRAIN</td>
<td>BH</td>
</tr>
<tr>
<td>BARBADOS</td>
<td>BB</td>
</tr>
<tr>
<td>BELARUS</td>
<td>BY</td>
</tr>
<tr>
<td>BELGIUM</td>
<td>BE</td>
</tr>
<tr>
<td>BELIZE</td>
<td>BZ</td>
</tr>
<tr>
<td>BENIN</td>
<td>BJ</td>
</tr>
<tr>
<td>BERMUDA</td>
<td>BM</td>
</tr>
<tr>
<td>BHUTAN</td>
<td>BT</td>
</tr>
<tr>
<td>BOLIVIA</td>
<td>BO</td>
</tr>
<tr>
<td>BOSNIA &amp; HERZEGOVINA</td>
<td>BA</td>
</tr>
<tr>
<td>BOTSWANA</td>
<td>BW</td>
</tr>
<tr>
<td>BRAZIL</td>
<td>BR</td>
</tr>
<tr>
<td>BRITISH VIRGIN ISLANDS</td>
<td>VG</td>
</tr>
<tr>
<td>BRUNEI</td>
<td>BN</td>
</tr>
<tr>
<td>BULGARIA</td>
<td>BG</td>
</tr>
<tr>
<td>BURKINA FASO</td>
<td>BF</td>
</tr>
<tr>
<td>BURUNDI</td>
<td>BI</td>
</tr>
<tr>
<td>CAMBODIA</td>
<td>KH</td>
</tr>
<tr>
<td>CAMEROON</td>
<td>CM</td>
</tr>
<tr>
<td>CANADA</td>
<td>CA</td>
</tr>
<tr>
<td>CAPE VERDE</td>
<td>CV</td>
</tr>
<tr>
<td>CAYMAN ISLANDS</td>
<td>KY</td>
</tr>
<tr>
<td>CHAD</td>
<td>TD</td>
</tr>
<tr>
<td>CHILE</td>
<td>CL</td>
</tr>
<tr>
<td>CHINA</td>
<td>CN (For domestic Chinese bank transactions only)</td>
</tr>
<tr>
<td>CHINA WORLDWIDE</td>
<td>C2 (For CUP, bank card and cross-border transactions)</td>
</tr>
<tr>
<td>COLOMBIA</td>
<td>CO</td>
</tr>
<tr>
<td>COMOROS</td>
<td>KM</td>
</tr>
<tr>
<td>CONGO - BRAZZAVILLE</td>
<td>CG</td>
</tr>
<tr>
<td>CONGO - KINSHASA</td>
<td>CD</td>
</tr>
<tr>
<td>COOK ISLANDS</td>
<td>CK</td>
</tr>
<tr>
<td>COSTA RICA</td>
<td>CR</td>
</tr>
<tr>
<td>CÔTE D’IVOIRE</td>
<td>CI</td>
</tr>
<tr>
<td>CROATIA</td>
<td>HR</td>
</tr>
<tr>
<td>CYPRUS</td>
<td>CY</td>
</tr>
<tr>
<td>CZECH REPUBLIC</td>
<td>CZ</td>
</tr>
<tr>
<td>DENMARK</td>
<td>DK</td>
</tr>
<tr>
<td>DJIBOUTI</td>
<td>DJ</td>
</tr>
<tr>
<td>DOMINICA</td>
<td>DM</td>
</tr>
<tr>
<td>DOMINICAN REPUBLIC</td>
<td>DO</td>
</tr>
<tr>
<td>ECUADOR</td>
<td>EC</td>
</tr>
<tr>
<td>EGYPT</td>
<td>EG</td>
</tr>
<tr>
<td>EL SALVADOR</td>
<td>SV</td>
</tr>
<tr>
<td>ERITREA</td>
<td>ER</td>
</tr>
<tr>
<td>ESTONIA</td>
<td>EE</td>
</tr>
<tr>
<td>ETHIOPIA</td>
<td>ET</td>
</tr>
<tr>
<td>FALKLAND ISLANDS</td>
<td>FK</td>
</tr>
<tr>
<td>FAROE ISLANDS</td>
<td>FO</td>
</tr>
<tr>
<td>FIJI</td>
<td>FJ</td>
</tr>
<tr>
<td>FINLAND</td>
<td>FI</td>
</tr>
<tr>
<td>FRANCE</td>
<td>FR</td>
</tr>
<tr>
<td>FRENCH GUIANA</td>
<td>GF</td>
</tr>
<tr>
<td>FRENCH POLYNESIA</td>
<td>PF</td>
</tr>
<tr>
<td>GABON</td>
<td>GA</td>
</tr>
<tr>
<td>GAMBIA</td>
<td>GM</td>
</tr>
<tr>
<td>GEORGIA</td>
<td>GE</td>
</tr>
<tr>
<td>GERMANY</td>
<td>DE</td>
</tr>
<tr>
<td>GIBRALTAR</td>
<td>GI</td>
</tr>
<tr>
<td>GREECE</td>
<td>GR</td>
</tr>
<tr>
<td>GREENLAND</td>
<td>GL</td>
</tr>
<tr>
<td>GRENADA</td>
<td>GD</td>
</tr>
<tr>
<td>GUADELOUPE</td>
<td>GP</td>
</tr>
<tr>
<td>GUATEMALA</td>
<td>GT</td>
</tr>
<tr>
<td>GUINEA</td>
<td>GN</td>
</tr>
<tr>
<td>GUINEA-BISSAU</td>
<td>GW</td>
</tr>
<tr>
<td>GUYANA</td>
<td>GY</td>
</tr>
<tr>
<td>HONDURAS</td>
<td>HN</td>
</tr>
<tr>
<td>HONG KONG SAR CHINA</td>
<td>HK</td>
</tr>
<tr>
<td>HUNGARY</td>
<td>HU</td>
</tr>
<tr>
<td>ICELAND</td>
<td>IS</td>
</tr>
<tr>
<td>INDIA</td>
<td>IN</td>
</tr>
<tr>
<td>INDONESIA</td>
<td>ID</td>
</tr>
<tr>
<td>IRELAND</td>
<td>IE</td>
</tr>
<tr>
<td>ISRAEL</td>
<td>IL</td>
</tr>
<tr>
<td>ITALY</td>
<td>IT</td>
</tr>
<tr>
<td>JAMAICA</td>
<td>JM</td>
</tr>
<tr>
<td>JAPAN</td>
<td>JP</td>
</tr>
<tr>
<td>JORDAN</td>
<td>JO</td>
</tr>
<tr>
<td>KAZAKHSTAN</td>
<td>KZ</td>
</tr>
<tr>
<td>KENYA</td>
<td>KE</td>
</tr>
<tr>
<td>KIRIBATI</td>
<td>KI</td>
</tr>
<tr>
<td>KUWAIT</td>
<td>KW</td>
</tr>
<tr>
<td>KYRGYZSTAN</td>
<td>KG</td>
</tr>
<tr>
<td>LAOS</td>
<td>LA</td>
</tr>
<tr>
<td>LATVIA</td>
<td>LV</td>
</tr>
<tr>
<td>LESOTHO</td>
<td>LS</td>
</tr>
<tr>
<td>LIECHTENSTEIN</td>
<td>LI</td>
</tr>
<tr>
<td>LITHUANIA</td>
<td>LT</td>
</tr>
<tr>
<td>LUXEMBOURG</td>
<td>LU</td>
</tr>
<tr>
<td>MACEDONIA</td>
<td>MK</td>
</tr>
<tr>
<td>MADAGASCAR</td>
<td>MG</td>
</tr>
<tr>
<td>MALAWI</td>
<td>MW</td>
</tr>
<tr>
<td>MALAYSIA</td>
<td>MY</td>
</tr>
<tr>
<td>MALDIVES</td>
<td>MV</td>
</tr>
<tr>
<td>MALI</td>
<td>ML</td>
</tr>
<tr>
<td>MALTA</td>
<td>MT</td>
</tr>
<tr>
<td>MARSHALL ISLANDS</td>
<td>MH</td>
</tr>
<tr>
<td>MARTINIQUE</td>
<td>MQ</td>
</tr>
<tr>
<td>MAURITANIA</td>
<td>MR</td>
</tr>
<tr>
<td>MAURITIUS</td>
<td>MU</td>
</tr>
<tr>
<td>MAYOTTE</td>
<td>YT</td>
</tr>
<tr>
<td>MEXICO</td>
<td>MX</td>
</tr>
<tr>
<td>MICRONESIA</td>
<td>FM</td>
</tr>
<tr>
<td>MOLDOVA</td>
<td>MD</td>
</tr>
<tr>
<td>MONACO</td>
<td>MC</td>
</tr>
<tr>
<td>MONGOLIA</td>
<td>MN</td>
</tr>
<tr>
<td>MONTENEGRO</td>
<td>ME</td>
</tr>
<tr>
<td>MONTSERRAT</td>
<td>MS</td>
</tr>
<tr>
<td>MOROCCO</td>
<td>MA</td>
</tr>
<tr>
<td>MOZAMBIQUE</td>
<td>MZ</td>
</tr>
<tr>
<td>NAMIBIA</td>
<td>NA</td>
</tr>
<tr>
<td>NAURU</td>
<td>NR</td>
</tr>
<tr>
<td>NEPAL</td>
<td>NP</td>
</tr>
<tr>
<td>NETHERLANDS</td>
<td>NL</td>
</tr>
<tr>
<td>NEW CALEDONIA</td>
<td>NC</td>
</tr>
<tr>
<td>NEW ZEALAND</td>
<td>NZ</td>
</tr>
<tr>
<td>NICARAGUA</td>
<td>NI</td>
</tr>
<tr>
<td>NIGER</td>
<td>NE</td>
</tr>
<tr>
<td>NIGERIA</td>
<td>NG</td>
</tr>
<tr>
<td>NIUE</td>
<td>NU</td>
</tr>
<tr>
<td>NORFOLK ISLAND</td>
<td>NF</td>
</tr>
<tr>
<td>NORWAY</td>
<td>NO</td>
</tr>
<tr>
<td>OMAN</td>
<td>OM</td>
</tr>
<tr>
<td>PALAU</td>
<td>PW</td>
</tr>
<tr>
<td>PANAMA</td>
<td>PA</td>
</tr>
<tr>
<td>PAPUA NEW GUINEA</td>
<td>PG</td>
</tr>
<tr>
<td>PARAGUAY</td>
<td>PY</td>
</tr>
<tr>
<td>PERU</td>
<td>PE</td>
</tr>
<tr>
<td>PHILIPPINES</td>
<td>PH</td>
</tr>
<tr>
<td>PITCAIRN ISLANDS</td>
<td>PN</td>
</tr>
<tr>
<td>POLAND</td>
<td>PL</td>
</tr>
<tr>
<td>PORTUGAL</td>
<td>PT</td>
</tr>
<tr>
<td>QATAR</td>
<td>QA</td>
</tr>
<tr>
<td>RÉUNION</td>
<td>RE</td>
</tr>
<tr>
<td>ROMANIA</td>
<td>RO</td>
</tr>
<tr>
<td>RUSSIA</td>
<td>RU</td>
</tr>
<tr>
<td>RWANDA</td>
<td>RW</td>
</tr>
<tr>
<td>SAMOA</td>
<td>WS</td>
</tr>
<tr>
<td>SAN MARINO</td>
<td>SM</td>
</tr>
<tr>
<td>SÃO TOMÉ &amp; PRÍNCIPE</td>
<td>ST</td>
</tr>
<tr>
<td>SAUDI ARABIA</td>
<td>SA</td>
</tr>
<tr>
<td>SENEGAL</td>
<td>SN</td>
</tr>
<tr>
<td>SERBIA</td>
<td>RS</td>
</tr>
<tr>
<td>SEYCHELLES</td>
<td>SC</td>
</tr>
<tr>
<td>SIERRA LEONE</td>
<td>SL</td>
</tr>
<tr>
<td>SINGAPORE</td>
<td>SG</td>
</tr>
<tr>
<td>SLOVAKIA</td>
<td>SK</td>
</tr>
<tr>
<td>SLOVENIA</td>
<td>SI</td>
</tr>
<tr>
<td>SOLOMON ISLANDS</td>
<td>SB</td>
</tr>
<tr>
<td>SOMALIA</td>
<td>SO</td>
</tr>
<tr>
<td>SOUTH AFRICA</td>
<td>ZA</td>
</tr>
<tr>
<td>SOUTH KOREA</td>
<td>KR</td>
</tr>
<tr>
<td>SPAIN</td>
<td>ES</td>
</tr>
<tr>
<td>SRI LANKA</td>
<td>LK</td>
</tr>
<tr>
<td>ST. HELENA</td>
<td>SH</td>
</tr>
<tr>
<td>ST. KITTS &amp; NEVIS</td>
<td>KN</td>
</tr>
<tr>
<td>ST. LUCIA</td>
<td>LC</td>
</tr>
<tr>
<td>ST. PIERRE &amp; MIQUELON</td>
<td>PM</td>
</tr>
<tr>
<td>ST. VINCENT &amp; GRENADINES</td>
<td>VC</td>
</tr>
<tr>
<td>SURINAME</td>
<td>SR</td>
</tr>
<tr>
<td>SVALBARD &amp; JAN MAYEN</td>
<td>SJ</td>
</tr>
<tr>
<td>SWAZILAND</td>
<td>SZ</td>
</tr>
<tr>
<td>SWEDEN</td>
<td>SE</td>
</tr>
<tr>
<td>SWITZERLAND</td>
<td>CH</td>
</tr>
<tr>
<td>TAIWAN</td>
<td>TW</td>
</tr>
<tr>
<td>TAJIKISTAN</td>
<td>TJ</td>
</tr>
<tr>
<td>TANZANIA</td>
<td>TZ</td>
</tr>
<tr>
<td>THAILAND</td>
<td>TH</td>
</tr>
<tr>
<td>TOGO</td>
<td>TG</td>
</tr>
<tr>
<td>TONGA</td>
<td>TO</td>
</tr>
<tr>
<td>TRINIDAD &amp; TOBAGO</td>
<td>TT</td>
</tr>
<tr>
<td>TUNISIA</td>
<td>TN</td>
</tr>
<tr>
<td>TURKMENISTAN</td>
<td>TM</td>
</tr>
<tr>
<td>TURKS &amp; CAICOS ISLANDS</td>
<td>TC</td>
</tr>
<tr>
<td>TUVALU</td>
<td>TV</td>
</tr>
<tr>
<td>UGANDA</td>
<td>UG</td>
</tr>
<tr>
<td>UKRAINE</td>
<td>UA</td>
</tr>
<tr>
<td>UNITED ARAB EMIRATES</td>
<td>AE</td>
</tr>
<tr>
<td>UNITED KINGDOM</td>
<td>GB</td>
</tr>
<tr>
<td>UNITED STATES</td>
<td>US</td>
</tr>
<tr>
<td>URUGUAY</td>
<td>UY</td>
</tr>
<tr>
<td>VANUATU</td>
<td>VU</td>
</tr>
<tr>
<td>VATICAN CITY</td>
<td>VA</td>
</tr>
<tr>
<td>VENEZUELA</td>
<td>VE</td>
</tr>
<tr>
<td>VIETNAM</td>
<td>VN</td>
</tr>
<tr>
<td>WALLIS &amp; FUTUNA</td>
<td>WF</td>
</tr>
<tr>
<td>YEMEN</td>
<td>YE</td>
</tr>
<tr>
<td>ZAMBIA</td>
<td>ZM</td>
</tr>
<tr>
<td>ZIMBABWE</td>
<td>ZW</td>
</tr>
</tbody></table>

          <h1 id="paypal-state-amp-province-codes">Paypal State &amp; Province Codes</h1>

<p>Paypal state codes can be found at <a href="https://developer.paypal.com/docs/classic/api/state_codes/">this link</a>. </p>

<p>Here are reported for simplicity. </p>

<blockquote>
<p>Note: Some of the following tables list only the State or Province name and do not include a <code class="prettyprint">State</code> or <code class="prettyprint">Province</code> code. For these countries, use the spelling of the State or Province name exactly as it is written in the table.</p>
</blockquote>

<p>Countries that use State Codes:</p>

<ul>
<li><a href="#argentina">Argentina</a></li>
<li><a href="#brazil">Brazil</a></li>
<li><a href="#canada">Canada</a></li>
<li><a href="#india">India</a></li>
<li><a href="#italy">Italy</a></li>
<li><a href="#japan">Japan</a></li>
<li><a href="#mexico">Mexico</a></li>
<li><a href="#thailand">Thailand</a></li>
<li><a href="#united-states">United States</a> </li>
</ul>

<h2 id="argentina">Argentina</h2>

<table><thead>
<tr>
<th>Province Name</th>
<th>Province Code</th>
</tr>
</thead><tbody>
<tr>
<td>Buenos Aires (Ciudad)</td>
<td>CIUDAD AUTÓNOMA DE BUENOS AIRES</td>
</tr>
<tr>
<td>Buenos Aires (Provincia)</td>
<td>BUENOS AIRES</td>
</tr>
<tr>
<td>Catamarca</td>
<td>CATAMARCA</td>
</tr>
<tr>
<td>Chaco</td>
<td>CHACO</td>
</tr>
<tr>
<td>Chubut</td>
<td>CHUBUT</td>
</tr>
<tr>
<td>Corrientes</td>
<td>CORRIENTES</td>
</tr>
<tr>
<td>Córdoba</td>
<td>CÓRDOBA</td>
</tr>
<tr>
<td>Entre Ríos</td>
<td>ENTRE RÍOS</td>
</tr>
<tr>
<td>Formosa</td>
<td>FORMOSA</td>
</tr>
<tr>
<td>Jujuy</td>
<td>JUJUY</td>
</tr>
<tr>
<td>La Pampa</td>
<td>LA PAMPA</td>
</tr>
<tr>
<td>La Rioja</td>
<td>LA RIOJA</td>
</tr>
<tr>
<td>Mendoza</td>
<td>MENDOZA</td>
</tr>
<tr>
<td>Misiones</td>
<td>MISIONES</td>
</tr>
<tr>
<td>Neuquén</td>
<td>NEUQUÉN</td>
</tr>
<tr>
<td>Río Negro</td>
<td>RÍO NEGRO</td>
</tr>
<tr>
<td>Salta</td>
<td>SALTA</td>
</tr>
<tr>
<td>San Juan</td>
<td>SAN JUAN</td>
</tr>
<tr>
<td>San Luis</td>
<td>SAN LUIS</td>
</tr>
<tr>
<td>Santa Cruz</td>
<td>SANTA CRUZ</td>
</tr>
<tr>
<td>Santa Fe</td>
<td>SANTA FE</td>
</tr>
<tr>
<td>Santiago del Estero</td>
<td>SANTIAGO DEL ESTERO</td>
</tr>
<tr>
<td>Tierra del Fuego</td>
<td>TIERRA DEL FUEGO</td>
</tr>
<tr>
<td>Tucumán</td>
<td>TUCUMÁN</td>
</tr>
</tbody></table>

<h2 id="brazil">Brazil</h2>

<table><thead>
<tr>
<th>State Name</th>
<th>State Code</th>
</tr>
</thead><tbody>
<tr>
<td>Acre</td>
<td>AC</td>
</tr>
<tr>
<td>Alagoas</td>
<td>AL</td>
</tr>
<tr>
<td>Amapá</td>
<td>AP</td>
</tr>
<tr>
<td>Amazonas</td>
<td>AM</td>
</tr>
<tr>
<td>Bahia</td>
<td>BA</td>
</tr>
<tr>
<td>Ceará</td>
<td>CE</td>
</tr>
<tr>
<td>Distrito Federal</td>
<td>DF</td>
</tr>
<tr>
<td>Espírito Santo</td>
<td>ES</td>
</tr>
<tr>
<td>Goiás</td>
<td>GO</td>
</tr>
<tr>
<td>Maranhão</td>
<td>MA</td>
</tr>
<tr>
<td>Mato Grosso</td>
<td>MT</td>
</tr>
<tr>
<td>Mato Grosso do Sul</td>
<td>MS</td>
</tr>
<tr>
<td>Minas Gerais</td>
<td>MG</td>
</tr>
<tr>
<td>Paraná</td>
<td>PR</td>
</tr>
<tr>
<td>Paraíba</td>
<td>PB</td>
</tr>
<tr>
<td>Pará</td>
<td>PA</td>
</tr>
<tr>
<td>Pernambuco</td>
<td>PE</td>
</tr>
<tr>
<td>Piauí</td>
<td>PI</td>
</tr>
<tr>
<td>Rio Grande do Norte</td>
<td>RN</td>
</tr>
<tr>
<td>Rio Grande do Sul</td>
<td>RS</td>
</tr>
<tr>
<td>Rio de Janeiro</td>
<td>RJ</td>
</tr>
<tr>
<td>Rondônia</td>
<td>RO</td>
</tr>
<tr>
<td>Roraima</td>
<td>RR</td>
</tr>
<tr>
<td>Santa Catarina</td>
<td>SC</td>
</tr>
<tr>
<td>Sergipe</td>
<td>SE</td>
</tr>
<tr>
<td>São Paulo</td>
<td>SP</td>
</tr>
<tr>
<td>Tocantins</td>
<td>TO</td>
</tr>
</tbody></table>

<h2 id="canada">Canada</h2>

<table><thead>
<tr>
<th>Province Name</th>
<th>Province Code</th>
</tr>
</thead><tbody>
<tr>
<td>Alberta</td>
<td>AB</td>
</tr>
<tr>
<td>British Columbia</td>
<td>BC</td>
</tr>
<tr>
<td>Manitoba</td>
<td>MB</td>
</tr>
<tr>
<td>New Brunswick</td>
<td>NB</td>
</tr>
<tr>
<td>Newfoundland and Labrador</td>
<td>NL</td>
</tr>
<tr>
<td>Northwest Territories</td>
<td>NT</td>
</tr>
<tr>
<td>Nova Scotia</td>
<td>NS</td>
</tr>
<tr>
<td>Nunavut</td>
<td>NU</td>
</tr>
<tr>
<td>Ontario</td>
<td>ON</td>
</tr>
<tr>
<td>Prince Edward Island</td>
<td>PE</td>
</tr>
<tr>
<td>Quebec</td>
<td>QC</td>
</tr>
<tr>
<td>Saskatchewan</td>
<td>SK</td>
</tr>
<tr>
<td>Yukon</td>
<td>YT</td>
</tr>
</tbody></table>

<h2 id="india">India</h2>

<table><thead>
<tr>
<th>State Name</th>
<th>State Code</th>
</tr>
</thead><tbody>
<tr>
<td>Andaman and Nicobar Islands</td>
<td>Andaman and Nicobar Islands</td>
</tr>
<tr>
<td>Andhra Pradesh</td>
<td>Andhra Pradesh</td>
</tr>
<tr>
<td>Army Post Office</td>
<td>APO</td>
</tr>
<tr>
<td>Arunachal Pradesh</td>
<td>Arunachal Pradesh</td>
</tr>
<tr>
<td>Assam</td>
<td>Assam</td>
</tr>
<tr>
<td>Bihar</td>
<td>Bihar</td>
</tr>
<tr>
<td>Chandigarh</td>
<td>Chandigarh</td>
</tr>
<tr>
<td>Chhattisgarh</td>
<td>Chhattisgarh</td>
</tr>
<tr>
<td>Dadra and Nagar Haveli</td>
<td>Dadra and Nagar Haveli</td>
</tr>
<tr>
<td>Daman and Diu</td>
<td>Daman and Diu</td>
</tr>
<tr>
<td>Goa</td>
<td>Goa</td>
</tr>
<tr>
<td>Gujarat</td>
<td>Gujarat</td>
</tr>
<tr>
<td>Haryana</td>
<td>Haryana</td>
</tr>
<tr>
<td>Himachal Pradesh</td>
<td>Himachal Pradesh</td>
</tr>
<tr>
<td>Jammu and Kashmir</td>
<td>Jammu and Kashmir</td>
</tr>
<tr>
<td>Jharkhand</td>
<td>Jharkhand</td>
</tr>
<tr>
<td>Karnataka</td>
<td>Karnataka</td>
</tr>
<tr>
<td>Kerala</td>
<td>Kerala</td>
</tr>
<tr>
<td>Lakshadweep</td>
<td>Lakshadweep</td>
</tr>
<tr>
<td>Madhya Pradesh</td>
<td>Madhya Pradesh</td>
</tr>
<tr>
<td>Maharashtra</td>
<td>Maharashtra</td>
</tr>
<tr>
<td>Manipur</td>
<td>Manipur</td>
</tr>
<tr>
<td>Meghalaya</td>
<td>Meghalaya</td>
</tr>
<tr>
<td>Mizoram</td>
<td>Mizoram</td>
</tr>
<tr>
<td>Nagaland</td>
<td>Nagaland</td>
</tr>
<tr>
<td>National Capital Territory of Delhi</td>
<td>Delhi (NCT)</td>
</tr>
<tr>
<td>Odisha</td>
<td>Odisha</td>
</tr>
<tr>
<td>Puducherry</td>
<td>Puducherry</td>
</tr>
<tr>
<td>Punjab</td>
<td>Punjab</td>
</tr>
<tr>
<td>Rajasthan</td>
<td>Rajasthan</td>
</tr>
<tr>
<td>Sikkim</td>
<td>Sikkim</td>
</tr>
<tr>
<td>Tamil Nadu</td>
<td>Tamil Nadu</td>
</tr>
<tr>
<td>Telangana</td>
<td>Telangana</td>
</tr>
<tr>
<td>Tripura</td>
<td>Tripura</td>
</tr>
<tr>
<td>Uttar Pradesh</td>
<td>Uttar Pradesh</td>
</tr>
<tr>
<td>Uttarakhand</td>
<td>Uttarakhand</td>
</tr>
<tr>
<td>West Bengal</td>
<td>West Bengal</td>
</tr>
</tbody></table>

<h2 id="italy">Italy</h2>

<table><thead>
<tr>
<th>Province Name</th>
<th>Province Code</th>
</tr>
</thead><tbody>
<tr>
<td>Agrigento</td>
<td>AG</td>
</tr>
<tr>
<td>Alessandria</td>
<td>AL</td>
</tr>
<tr>
<td>Ancona</td>
<td>AN</td>
</tr>
<tr>
<td>Aosta</td>
<td>AO</td>
</tr>
<tr>
<td>Arezzo</td>
<td>AR</td>
</tr>
<tr>
<td>Ascoli Piceno</td>
<td>AP</td>
</tr>
<tr>
<td>Asti</td>
<td>AT</td>
</tr>
<tr>
<td>Avellino</td>
<td>AV</td>
</tr>
<tr>
<td>Bari</td>
<td>BA</td>
</tr>
<tr>
<td>Barletta-Andria-Trani</td>
<td>BT</td>
</tr>
<tr>
<td>Belluno</td>
<td>BL</td>
</tr>
<tr>
<td>Benevento</td>
<td>BN</td>
</tr>
<tr>
<td>Bergamo</td>
<td>BG</td>
</tr>
<tr>
<td>Biella</td>
<td>BI</td>
</tr>
<tr>
<td>Bologna</td>
<td>BO</td>
</tr>
<tr>
<td>Bolzano</td>
<td>BZ</td>
</tr>
<tr>
<td>Brescia</td>
<td>BS</td>
</tr>
<tr>
<td>Brindisi</td>
<td>BR</td>
</tr>
<tr>
<td>Cagliari</td>
<td>CA</td>
</tr>
<tr>
<td>Caltanissetta</td>
<td>CL</td>
</tr>
<tr>
<td>Campobasso</td>
<td>CB</td>
</tr>
<tr>
<td>Carbonia-Iglesias</td>
<td>CI</td>
</tr>
<tr>
<td>Caserta</td>
<td>CE</td>
</tr>
<tr>
<td>Catania</td>
<td>CT</td>
</tr>
<tr>
<td>Catanzaro</td>
<td>CZ</td>
</tr>
<tr>
<td>Chieti</td>
<td>CH</td>
</tr>
<tr>
<td>Como</td>
<td>CO</td>
</tr>
<tr>
<td>Cosenza</td>
<td>CS</td>
</tr>
<tr>
<td>Cremona</td>
<td>CR</td>
</tr>
<tr>
<td>Crotone</td>
<td>KR</td>
</tr>
<tr>
<td>Cuneo</td>
<td>CN</td>
</tr>
<tr>
<td>Enna</td>
<td>EN</td>
</tr>
<tr>
<td>Fermo</td>
<td>FM</td>
</tr>
<tr>
<td>Ferrara</td>
<td>FE</td>
</tr>
<tr>
<td>Firenze</td>
<td>FI</td>
</tr>
<tr>
<td>Foggia</td>
<td>FG</td>
</tr>
<tr>
<td>Forlì-Cesena</td>
<td>FC</td>
</tr>
<tr>
<td>Frosinone</td>
<td>FR</td>
</tr>
<tr>
<td>Genova</td>
<td>GE</td>
</tr>
<tr>
<td>Gorizia</td>
<td>GO</td>
</tr>
<tr>
<td>Grosseto</td>
<td>GR</td>
</tr>
<tr>
<td>Imperia</td>
<td>IM</td>
</tr>
<tr>
<td>Isernia</td>
<td>IS</td>
</tr>
<tr>
<td>L&#39;Aquila</td>
<td>AQ</td>
</tr>
<tr>
<td>La Spezia</td>
<td>SP</td>
</tr>
<tr>
<td>Latina</td>
<td>LT</td>
</tr>
<tr>
<td>Lecce</td>
<td>LE</td>
</tr>
<tr>
<td>Lecco</td>
<td>LC</td>
</tr>
<tr>
<td>Livorno</td>
<td>LI</td>
</tr>
<tr>
<td>Lodi</td>
<td>LO</td>
</tr>
<tr>
<td>Lucca</td>
<td>LU</td>
</tr>
<tr>
<td>Macerata</td>
<td>MC</td>
</tr>
<tr>
<td>Mantova</td>
<td>MN</td>
</tr>
<tr>
<td>Massa-Carrara</td>
<td>MS</td>
</tr>
<tr>
<td>Matera</td>
<td>MT</td>
</tr>
<tr>
<td>Medio Campidano</td>
<td>VS</td>
</tr>
<tr>
<td>Messina</td>
<td>ME</td>
</tr>
<tr>
<td>Milano</td>
<td>MI</td>
</tr>
<tr>
<td>Modena</td>
<td>MO</td>
</tr>
<tr>
<td>Monza e della Brianza</td>
<td>MB</td>
</tr>
<tr>
<td>Napoli</td>
<td>NA</td>
</tr>
<tr>
<td>Novara</td>
<td>NO</td>
</tr>
<tr>
<td>Nuoro</td>
<td>NU</td>
</tr>
<tr>
<td>Ogliastra</td>
<td>OG</td>
</tr>
<tr>
<td>Olbia-Tempio</td>
<td>OT</td>
</tr>
<tr>
<td>Oristano</td>
<td>OR</td>
</tr>
<tr>
<td>Padova</td>
<td>PD</td>
</tr>
<tr>
<td>Palermo</td>
<td>PA</td>
</tr>
<tr>
<td>Parma</td>
<td>PR</td>
</tr>
<tr>
<td>Pavia</td>
<td>PV</td>
</tr>
<tr>
<td>Perugia</td>
<td>PG</td>
</tr>
<tr>
<td>Pesaro e Urbino</td>
<td>PU</td>
</tr>
<tr>
<td>Pescara</td>
<td>PE</td>
</tr>
<tr>
<td>Piacenza</td>
<td>PC</td>
</tr>
<tr>
<td>Pisa</td>
<td>PI</td>
</tr>
<tr>
<td>Pistoia</td>
<td>PT</td>
</tr>
<tr>
<td>Pordenone</td>
<td>PN</td>
</tr>
<tr>
<td>Potenza</td>
<td>PZ</td>
</tr>
<tr>
<td>Prato</td>
<td>PO</td>
</tr>
<tr>
<td>Ragusa</td>
<td>RG</td>
</tr>
<tr>
<td>Ravenna</td>
<td>RA</td>
</tr>
<tr>
<td>Reggio Calabria</td>
<td>RC</td>
</tr>
<tr>
<td>Reggio Emilia</td>
<td>RE</td>
</tr>
<tr>
<td>Rieti</td>
<td>RI</td>
</tr>
<tr>
<td>Rimini</td>
<td>RN</td>
</tr>
<tr>
<td>Roma</td>
<td>RM</td>
</tr>
<tr>
<td>Rovigo</td>
<td>RO</td>
</tr>
<tr>
<td>Salerno</td>
<td>SA</td>
</tr>
<tr>
<td>Sassari</td>
<td>SS</td>
</tr>
<tr>
<td>Savona</td>
<td>SV</td>
</tr>
<tr>
<td>Siena</td>
<td>SI</td>
</tr>
<tr>
<td>Siracusa</td>
<td>SR</td>
</tr>
<tr>
<td>Sondrio</td>
<td>SO</td>
</tr>
<tr>
<td>Taranto</td>
<td>TA</td>
</tr>
<tr>
<td>Teramo</td>
<td>TE</td>
</tr>
<tr>
<td>Terni</td>
<td>TR</td>
</tr>
<tr>
<td>Torino</td>
<td>TO</td>
</tr>
<tr>
<td>Trapani</td>
<td>TP</td>
</tr>
<tr>
<td>Trento</td>
<td>TN</td>
</tr>
<tr>
<td>Treviso</td>
<td>TV</td>
</tr>
<tr>
<td>Trieste</td>
<td>TS</td>
</tr>
<tr>
<td>Udine</td>
<td>UD</td>
</tr>
<tr>
<td>Varese</td>
<td>VA</td>
</tr>
<tr>
<td>Venezia</td>
<td>VE</td>
</tr>
<tr>
<td>Verbano-Cusio-Ossola</td>
<td>VB</td>
</tr>
<tr>
<td>Vercelli</td>
<td>VC</td>
</tr>
<tr>
<td>Verona</td>
<td>VR</td>
</tr>
<tr>
<td>Vibo Valentia</td>
<td>VV</td>
</tr>
<tr>
<td>Vicenza</td>
<td>VI</td>
</tr>
<tr>
<td>Viterbo</td>
<td>VT</td>
</tr>
</tbody></table>

<h2 id="japan">Japan</h2>

<table><thead>
<tr>
<th>Prefecture Name</th>
<th>Prefecture Code</th>
</tr>
</thead><tbody>
<tr>
<td>Aichi</td>
<td>AICHI-KEN</td>
</tr>
<tr>
<td>Akita</td>
<td>AKITA-KEN</td>
</tr>
<tr>
<td>Aomori</td>
<td>AOMORI-KEN</td>
</tr>
<tr>
<td>Chiba</td>
<td>CHIBA-KEN</td>
</tr>
<tr>
<td>Ehime</td>
<td>EHIME-KEN</td>
</tr>
<tr>
<td>Fukui</td>
<td>FUKUI-KEN</td>
</tr>
<tr>
<td>Fukuoka</td>
<td>FUKUOKA-KEN</td>
</tr>
<tr>
<td>Fukushima</td>
<td>FUKUSHIMA-KEN</td>
</tr>
<tr>
<td>Gifu</td>
<td>GIFU-KEN</td>
</tr>
<tr>
<td>Gunma</td>
<td>GUNMA-KEN</td>
</tr>
<tr>
<td>Hiroshima</td>
<td>HIROSHIMA-KEN</td>
</tr>
<tr>
<td>Hokkaido</td>
<td>HOKKAIDO</td>
</tr>
<tr>
<td>Hyogo</td>
<td>HYOGO-KEN</td>
</tr>
<tr>
<td>Ibaraki</td>
<td>IBARAKI-KEN</td>
</tr>
<tr>
<td>Ishikawa</td>
<td>ISHIKAWA-KEN</td>
</tr>
<tr>
<td>Iwate</td>
<td>IWATE-KEN</td>
</tr>
<tr>
<td>Kagawa</td>
<td>KAGAWA-KEN</td>
</tr>
<tr>
<td>Kagoshima</td>
<td>KAGOSHIMA-KEN</td>
</tr>
<tr>
<td>Kanagawa</td>
<td>KANAGAWA-KEN</td>
</tr>
<tr>
<td>Kochi</td>
<td>KOCHI-KEN</td>
</tr>
<tr>
<td>Kumamoto</td>
<td>KUMAMOTO-KEN</td>
</tr>
<tr>
<td>Kyoto</td>
<td>KYOTO-FU</td>
</tr>
<tr>
<td>Mie</td>
<td>MIE-KEN</td>
</tr>
<tr>
<td>Miyagi</td>
<td>MIYAGI-KEN</td>
</tr>
<tr>
<td>Miyazaki</td>
<td>MIYAZAKI-KEN</td>
</tr>
<tr>
<td>Nagano</td>
<td>NAGANO-KEN</td>
</tr>
<tr>
<td>Nagasaki</td>
<td>NAGASAKI-KEN</td>
</tr>
<tr>
<td>Nara</td>
<td>NARA-KEN</td>
</tr>
<tr>
<td>Niigata</td>
<td>NIIGATA-KEN</td>
</tr>
<tr>
<td>Oita</td>
<td>OITA-KEN</td>
</tr>
<tr>
<td>Okayama</td>
<td>OKAYAMA-KEN</td>
</tr>
<tr>
<td>Okinawa</td>
<td>OKINAWA-KEN</td>
</tr>
<tr>
<td>Osaka</td>
<td>OSAKA-FU</td>
</tr>
<tr>
<td>Saga</td>
<td>SAGA-KEN</td>
</tr>
<tr>
<td>Saitama</td>
<td>SAITAMA-KEN</td>
</tr>
<tr>
<td>Shiga</td>
<td>SHIGA-KEN</td>
</tr>
<tr>
<td>Shimane</td>
<td>SHIMANE-KEN</td>
</tr>
<tr>
<td>Shizuoka</td>
<td>SHIZUOKA-KEN</td>
</tr>
<tr>
<td>Tochigi</td>
<td>TOCHIGI-KEN</td>
</tr>
<tr>
<td>Tokushima</td>
<td>TOKUSHIMA-KEN</td>
</tr>
<tr>
<td>Tokyo</td>
<td>TOKYO-TO</td>
</tr>
<tr>
<td>Tottori</td>
<td>TOTTORI-KEN</td>
</tr>
<tr>
<td>Toyama</td>
<td>TOYAMA-KEN</td>
</tr>
<tr>
<td>Wakayama</td>
<td>WAKAYAMA-KEN</td>
</tr>
<tr>
<td>Yamagata</td>
<td>YAMAGATA-KEN</td>
</tr>
<tr>
<td>Yamaguchi</td>
<td>YAMAGUCHI-KEN</td>
</tr>
<tr>
<td>Yamanashi</td>
<td>YAMANASHI-KEN</td>
</tr>
</tbody></table>

<h2 id="mexico">Mexico</h2>

<table><thead>
<tr>
<th>State Name</th>
<th>State Code</th>
</tr>
</thead><tbody>
<tr>
<td>Aguascalientes</td>
<td>AGS</td>
</tr>
<tr>
<td>Baja California</td>
<td>BC</td>
</tr>
<tr>
<td>Baja California Sur</td>
<td>BCS</td>
</tr>
<tr>
<td>Campeche</td>
<td>CAMP</td>
</tr>
<tr>
<td>Chiapas</td>
<td>CHIS</td>
</tr>
<tr>
<td>Chihuahua</td>
<td>CHIH</td>
</tr>
<tr>
<td>Coahuila</td>
<td>COAH</td>
</tr>
<tr>
<td>Colima</td>
<td>COL</td>
</tr>
<tr>
<td>Distrito Federal</td>
<td>DF</td>
</tr>
<tr>
<td>Durango</td>
<td>DGO</td>
</tr>
<tr>
<td>Estado de México</td>
<td>MEX</td>
</tr>
<tr>
<td>Guanajuato</td>
<td>GTO</td>
</tr>
<tr>
<td>Guerrero</td>
<td>GRO</td>
</tr>
<tr>
<td>Hidalgo</td>
<td>HGO</td>
</tr>
<tr>
<td>Jalisco</td>
<td>JAL</td>
</tr>
<tr>
<td>Michoacán</td>
<td>MICH</td>
</tr>
<tr>
<td>Morelos</td>
<td>MOR</td>
</tr>
<tr>
<td>Nayarit</td>
<td>NAY</td>
</tr>
<tr>
<td>Nuevo León</td>
<td>NL</td>
</tr>
<tr>
<td>Oaxaca</td>
<td>OAX</td>
</tr>
<tr>
<td>Puebla</td>
<td>PUE</td>
</tr>
<tr>
<td>Querétaro</td>
<td>QRO</td>
</tr>
<tr>
<td>Quintana Roo</td>
<td>Q ROO</td>
</tr>
<tr>
<td>San Luis Potosí</td>
<td>SLP</td>
</tr>
<tr>
<td>Sinaloa</td>
<td>SIN</td>
</tr>
<tr>
<td>Sonora</td>
<td>SON</td>
</tr>
<tr>
<td>Tabasco</td>
<td>TAB</td>
</tr>
<tr>
<td>Tamaulipas</td>
<td>TAMPS</td>
</tr>
<tr>
<td>Tlaxcala</td>
<td>TLAX</td>
</tr>
<tr>
<td>Veracruz</td>
<td>VER</td>
</tr>
<tr>
<td>Yucatán</td>
<td>YUC</td>
</tr>
<tr>
<td>Zacatecas</td>
<td>ZAC</td>
</tr>
</tbody></table>

<h2 id="thailand">Thailand</h2>

<table><thead>
<tr>
<th>Province Name</th>
</tr>
</thead><tbody>
<tr>
<td>Amnat Charoen</td>
</tr>
<tr>
<td>Ang Thong</td>
</tr>
<tr>
<td>Bangkok</td>
</tr>
<tr>
<td>Bueng Kan</td>
</tr>
<tr>
<td>Buri Ram</td>
</tr>
<tr>
<td>Chachoengsao</td>
</tr>
<tr>
<td>Chai Nat</td>
</tr>
<tr>
<td>Chaiyaphum</td>
</tr>
<tr>
<td>Chanthaburi</td>
</tr>
<tr>
<td>Chiang Mai</td>
</tr>
<tr>
<td>Chiang Rai</td>
</tr>
<tr>
<td>Chon Buri</td>
</tr>
<tr>
<td>Chumphon</td>
</tr>
<tr>
<td>Kalasin</td>
</tr>
<tr>
<td>Kamphaeng Phet</td>
</tr>
<tr>
<td>Kanchanaburi</td>
</tr>
<tr>
<td>Khon Kaen</td>
</tr>
<tr>
<td>Krabi</td>
</tr>
<tr>
<td>Lampang</td>
</tr>
<tr>
<td>Lamphun</td>
</tr>
<tr>
<td>Loei</td>
</tr>
<tr>
<td>Lop Buri</td>
</tr>
<tr>
<td>Mae Hong Son</td>
</tr>
<tr>
<td>Maha Sarakham</td>
</tr>
<tr>
<td>Mukdahan</td>
</tr>
<tr>
<td>Nakhon Nayok</td>
</tr>
<tr>
<td>Nakhon Pathom</td>
</tr>
<tr>
<td>Nakhon Phanom</td>
</tr>
<tr>
<td>Nakhon Ratchasima</td>
</tr>
<tr>
<td>Nakhon Sawan</td>
</tr>
<tr>
<td>Nakhon Si Thammarat</td>
</tr>
<tr>
<td>Nan</td>
</tr>
<tr>
<td>Narathiwat</td>
</tr>
<tr>
<td>Nong Bua Lamphu</td>
</tr>
<tr>
<td>Nong Khai</td>
</tr>
<tr>
<td>Nonthaburi</td>
</tr>
<tr>
<td>Pathum Thani</td>
</tr>
<tr>
<td>Pattani</td>
</tr>
<tr>
<td>Phang Nga</td>
</tr>
<tr>
<td>Phatthalung</td>
</tr>
<tr>
<td>Phatthaya</td>
</tr>
<tr>
<td>Phayao</td>
</tr>
<tr>
<td>Phetchabun</td>
</tr>
<tr>
<td>Phetchaburi</td>
</tr>
<tr>
<td>Phichit</td>
</tr>
<tr>
<td>Phitsanulok</td>
</tr>
<tr>
<td>Phra Nakhon Si Ayutthaya</td>
</tr>
<tr>
<td>Phrae</td>
</tr>
<tr>
<td>Phuket</td>
</tr>
<tr>
<td>Prachin Buri</td>
</tr>
<tr>
<td>Prachuap Khiri Khan</td>
</tr>
<tr>
<td>Ranong</td>
</tr>
<tr>
<td>Ratchaburi</td>
</tr>
<tr>
<td>Rayong</td>
</tr>
<tr>
<td>Roi Et</td>
</tr>
<tr>
<td>Sa Kaeo</td>
</tr>
<tr>
<td>Sakon Nakhon</td>
</tr>
<tr>
<td>Samut Prakan</td>
</tr>
<tr>
<td>Samut Sakhon</td>
</tr>
<tr>
<td>Samut Songkhram</td>
</tr>
<tr>
<td>Saraburi</td>
</tr>
<tr>
<td>Satun</td>
</tr>
<tr>
<td>Si Sa Ket</td>
</tr>
<tr>
<td>Sing Buri</td>
</tr>
<tr>
<td>Songkhla</td>
</tr>
<tr>
<td>Sukhothai</td>
</tr>
<tr>
<td>Suphan Buri</td>
</tr>
<tr>
<td>Surat Thani</td>
</tr>
<tr>
<td>Surin</td>
</tr>
<tr>
<td>Tak</td>
</tr>
<tr>
<td>Trang</td>
</tr>
<tr>
<td>Trat</td>
</tr>
<tr>
<td>Ubon Ratchathani</td>
</tr>
<tr>
<td>Udon Thani</td>
</tr>
<tr>
<td>Uthai Thani</td>
</tr>
<tr>
<td>Uttaradit</td>
</tr>
<tr>
<td>Yala</td>
</tr>
<tr>
<td>Yasothon</td>
</tr>
</tbody></table>

<h2 id="united-states">United States</h2>

<table><thead>
<tr>
<th>State Name</th>
<th>State Code</th>
</tr>
</thead><tbody>
<tr>
<td>Alabama</td>
<td>AL</td>
</tr>
<tr>
<td>Alaska</td>
<td>AK</td>
</tr>
<tr>
<td>Arizona</td>
<td>AZ</td>
</tr>
<tr>
<td>Arkansas</td>
<td>AR</td>
</tr>
<tr>
<td>California</td>
<td>CA</td>
</tr>
<tr>
<td>Colorado</td>
<td>CO</td>
</tr>
<tr>
<td>Connecticut</td>
<td>CT</td>
</tr>
<tr>
<td>Delaware</td>
<td>DE</td>
</tr>
<tr>
<td>District of Columbia</td>
<td>DC</td>
</tr>
<tr>
<td>Florida</td>
<td>FL</td>
</tr>
<tr>
<td>Georgia</td>
<td>GA</td>
</tr>
<tr>
<td>Hawaii</td>
<td>HI</td>
</tr>
<tr>
<td>Idaho</td>
<td>ID</td>
</tr>
<tr>
<td>Illinois</td>
<td>IL</td>
</tr>
<tr>
<td>Indiana</td>
<td>IN</td>
</tr>
<tr>
<td>Iowa</td>
<td>IA</td>
</tr>
<tr>
<td>Kansas</td>
<td>KS</td>
</tr>
<tr>
<td>Kentucky</td>
<td>KY</td>
</tr>
<tr>
<td>Louisiana</td>
<td>LA</td>
</tr>
<tr>
<td>Maine</td>
<td>ME</td>
</tr>
<tr>
<td>Maryland</td>
<td>MD</td>
</tr>
<tr>
<td>Massachusetts</td>
<td>MA</td>
</tr>
<tr>
<td>Michigan</td>
<td>MI</td>
</tr>
<tr>
<td>Minnesota</td>
<td>MN</td>
</tr>
<tr>
<td>Mississippi</td>
<td>MS</td>
</tr>
<tr>
<td>Missouri</td>
<td>MO</td>
</tr>
<tr>
<td>Montana</td>
<td>MT</td>
</tr>
<tr>
<td>Nebraska</td>
<td>NE</td>
</tr>
<tr>
<td>Nevada</td>
<td>NV</td>
</tr>
<tr>
<td>New Hampshire</td>
<td>NH</td>
</tr>
<tr>
<td>New Jersey</td>
<td>NJ</td>
</tr>
<tr>
<td>New Mexico</td>
<td>NM</td>
</tr>
<tr>
<td>New York</td>
<td>NY</td>
</tr>
<tr>
<td>North Carolina</td>
<td>NC</td>
</tr>
<tr>
<td>North Dakota</td>
<td>ND</td>
</tr>
<tr>
<td>Ohio</td>
<td>OH</td>
</tr>
<tr>
<td>Oklahoma</td>
<td>OK</td>
</tr>
<tr>
<td>Oregon</td>
<td>OR</td>
</tr>
<tr>
<td>Pennsylvania</td>
<td>PA</td>
</tr>
<tr>
<td>Puerto Rico</td>
<td>PR</td>
</tr>
<tr>
<td>Rhode Island</td>
<td>RI</td>
</tr>
<tr>
<td>South Carolina</td>
<td>SC</td>
</tr>
<tr>
<td>South Dakota</td>
<td>SD</td>
</tr>
<tr>
<td>Tennessee</td>
<td>TN</td>
</tr>
<tr>
<td>Texas</td>
<td>TX</td>
</tr>
<tr>
<td>Utah</td>
<td>UT</td>
</tr>
<tr>
<td>Vermont</td>
<td>VT</td>
</tr>
<tr>
<td>Virginia</td>
<td>VA</td>
</tr>
<tr>
<td>Washington</td>
<td>WA</td>
</tr>
<tr>
<td>West Virginia</td>
<td>WV</td>
</tr>
<tr>
<td>Wisconsin</td>
<td>WI</td>
</tr>
<tr>
<td>Wyoming</td>
<td>WY</td>
</tr>
</tbody></table>

<h3 id="armed-forces-apo">Armed Forces APO</h3>

<table><thead>
<tr>
<th>State Name</th>
<th>State Code</th>
</tr>
</thead><tbody>
<tr>
<td>Armed Forces Americas</td>
<td>AA</td>
</tr>
<tr>
<td>Armed Forces Europe</td>
<td>AE</td>
</tr>
<tr>
<td>Armed Forces Pacific</td>
<td>AP</td>
</tr>
</tbody></table>

<h3 id="outlying-areas">Outlying Areas</h3>

<table><thead>
<tr>
<th>State Name</th>
<th>State Code</th>
</tr>
</thead><tbody>
<tr>
<td>American Samoa</td>
<td>AS</td>
</tr>
<tr>
<td>Federated States of Micronesia</td>
<td>FM</td>
</tr>
<tr>
<td>Guam</td>
<td>GU</td>
</tr>
<tr>
<td>Marshall Islands</td>
<td>MH</td>
</tr>
<tr>
<td>Northern Mariana Islands</td>
<td>MP</td>
</tr>
<tr>
<td>Palau</td>
<td>PW</td>
</tr>
<tr>
<td>Virgin Islands</td>
<td>VI</td>
</tr>
</tbody></table>

          <h1 id="language-codes">Language Codes</h1>

<p>The language code is handled by GestPay using the Language attribute. </p>

<table><thead>
<tr>
<th style="text-align: center">Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><code class="prettyprint">1</code></td>
<td>Italian</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">2</code></td>
<td>English</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">3</code></td>
<td>Spanish</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">4</code></td>
<td>Franch</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">5</code></td>
<td>German</td>
</tr>
</tbody></table>

          <h1 id="alert-codes">Alert Codes</h1>

<p>Alert Codes are described at <a href="http://docs.gestpay.it/sec/better-risk-management-reacting-to-suspicious-activity.html">Better Risk Management: reacting to suspicious activity</a>.</p>

<table><thead>
<tr>
<th style="text-align: center">Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><code class="prettyprint">2000</code></td>
<td>Transaction exceeds maximum operations number in time period</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">2001</code></td>
<td>Transaction exceeds maximum number of operations performed by the same buyer in time period</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">2002</code></td>
<td>Transaction exceeds maximum amount in time period</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">2003</code></td>
<td>Transaction exceeds maximum amount payable by same buyer in time period</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">2004</code></td>
<td>Transaction contains a field value that had been declared not acceptable</td>
</tr>
</tbody></table>

<p><code class="prettyprint">AlertDescrption</code>s is also available in other languages.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>

    <!-- Doorbell.io -->
    <script type="text/javascript">
        window.doorbellOptions = {
            appKey: 'jb0OFGp525TQRM5hUxdJJtHEsTQcjwgA9DI3Z4PoveRFSxcLPZfbcKajDBOc2Fod'
        };
        (function(w, d, t) {
            var hasLoaded = false;
            function l() { if (hasLoaded) { return; } hasLoaded = true; window.doorbellOptions.windowLoaded = true; var g = d.createElement(t);g.id = 'doorbellScript';g.type = 'text/javascript';g.async = true;g.src = 'https://embed.doorbell.io/button/4374?t='+(new Date().getTime());(d.getElementsByTagName('head')[0]||d.getElementsByTagName('body')[0]).appendChild(g); }
            if (w.attachEvent) { w.attachEvent('onload', l); } else if (w.addEventListener) { w.addEventListener('load', l, false); } else { l(); }
            if (d.readyState == 'complete') { l(); }
        }(window, document, 'script'));
    </script><!-- End Doorbell.io -->
      <script src="javascripts/all.js"></script>
    <script src="http://localhost:35729/livereload.js"></script>
    <script>
    //This is Google's default GA code
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-52228534-5', 'auto');
    ga('send', 'pageview');
    //This does hash-click tracking (inspired by http://stackoverflow.com/a/4813223)
    $(document).ready(function() {
      $('.tocify-item a').on('click', function(){
        ga('send', 'pageview', {'page': location.pathname + location.search  + location.hash});
      });
    });
    </script>
  </body>
</html>
