<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <script src="http://localhost:35729/livereload.js"></script>
    <script>
    //This is Google's default GA code
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-52228534-5', 'auto');
    ga('send', 'pageview');
    //This does hash-click tracking (inspired by http://stackoverflow.com/a/4813223)
    $(document).ready(function() {
      $('.tocify-item a').on('click', function(){
        ga('send', 'pageview', {'page': location.pathname + location.search  + location.hash});
      });
    });
    </script>
  </head>

  <body class="index" data-languages="[&quot;java&quot;,&quot;php&quot;,&quot;net&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="net">net</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>
<pre class="highlight xml"><code>   _____           _                     
  / ____|         | |                    
 | |  __  ___  ___| |_ _ __   __ _ _   _ 
 | | |_ |/ _ \/ __| __| '_ \ / _` | | | |
 | |__| |  __/\__ \ |_| |_) | (_| | |_| |
  \_____|\___||___/\__| .__/ \__,_|\__, |
                      | |           __/ |
                      |_|          |___/ 
</code></pre>

<p>Gestpay API documentation aims to be a comprehensive and living catalog of Gestpay services.</p>

<p>Our API is SOAP-based, so you must encode your requests in XML to communicate with Gestpay.</p>

<p>For every service, we will present both the test and the production endpoints.   </p>

<p>Our services are: </p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><a href="/?xml#wscryptdecrypt"><code class="prettyprint">WSCryptDecrypt</code></a></td>
<td>used to start (and end) the payment process.</td>
</tr>
<tr>
<td><a href="/?xml#js_gestpay"><code class="prettyprint">js_GestPay.js</code></a></td>
<td>Mainly used to build a customized payment page.</td>
</tr>
<tr>
<td><a href="/?xml#wss2s"><code class="prettyprint">WSs2s</code></a></td>
<td>To control every aspect of your transactions and your shop.</td>
</tr>
</tbody></table>

          <h1 id="wscryptdecrypt-api">WSCryptDecrypt API</h1>

<p>GestPay <code class="prettyprint">WsCryptDecrypt</code> web service is exposed by GestPay at following URLs: </p>

<table><thead>
<tr>
<th>environment</th>
<th>URL</th>
</tr>
</thead><tbody>
<tr>
<td>test</td>
<td><code class="prettyprint">https://testecomm.sella.it/gestpay/GestPayWS/WsCryptDecrypt.asmx?wsdl</code></td>
</tr>
<tr>
<td>production</td>
<td><code class="prettyprint">https://ecommS2S.sella.it/gestpay/GestPayWS/WsCryptDecrypt.asmx?wsdl</code></td>
</tr>
</tbody></table>

<p>WSCryptDecrypt web service is available on production and test servers and does not require any installation on the merchant’s server.</p>

<p>The merchant must implement – in the page(s) of the virtual store configured to handle payments – a call to the webservice which handles requests to use the GestPay encryption service.</p>

<p>To request the encryption service it is necessary to call the Encrypt method.</p>

<p>If the encryption operation is concluded correctly (<code class="prettyprint">TransactionResult</code> tag value with OK), the encrypted data string returned by GestPay will be available by reading the value of the <code class="prettyprint">CryptDecryptString</code> tag.</p>

<p>If not, the values of the <code class="prettyprint">ErrorCode</code> and <code class="prettyprint">ErrorDescription</code> tag will make it possible to identify the reasons that prevented the encryption operation. To request the decryption service it is necessary to call the <code class="prettyprint">Decrypt</code> method, passing the <code class="prettyprint">shopLogin</code> and <code class="prettyprint">CryptedString</code> tags with the values communicated by GestPay.</p>

<p>The information containing the transaction result will be available by reading the information in the XML response file corresponding to the result of the transaction.</p>

          <h2 id="encrypt">Encrypt</h2>

<blockquote>
<p>A valid <code class="prettyprint">Encrypt</code> can be called with just these fields - very easy: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985.21<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p><code class="prettyprint">Encrypt</code> is the main entrypoint for Gestpay. You must call <code class="prettyprint">Encrypt</code> either if you want to use the standard payment page, or the custom iframe solution. </p>

<p>These are the <strong>mandatory</strong> fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong></td>
<td style="text-align: center">30</td>
<td>shopLogin (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong></td>
<td style="text-align: center">3</td>
<td>Code identifying currency in which transaction amount is denominated - see <a href="#currency-codes">Currency Codes table</a> - (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td style="text-align: center">9</td>
<td>Transaction amount. Do not insert thousands separator. Decimals, max. 2 numbers, are optional and separator is the point (Mandatory)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionID</code></strong></td>
<td style="text-align: center">50</td>
<td>Identifier attributed to merchant’s transaction (Mandatory)</td>
</tr>
</tbody></table>

<blockquote>
<p>Here is an example where we use <code class="prettyprint">customInfo</code> and other non-mandatory fields. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>1245.6<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;buyerName&gt;</span>Mario Bianchi<span class="nt">&lt;/buyerName&gt;</span>
  <span class="nt">&lt;buyerEmail&gt;</span>mario.bianchi@isp.it<span class="nt">&lt;/buyerEmail&gt;</span>
  <span class="nt">&lt;customInfo&gt;</span>BV_CODCLIENTE=12*P1*BV_SESSIONID=398<span class="nt">&lt;/customInfo&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<blockquote>
<p>The information included in <code class="prettyprint">customInfo</code> will follow this form:</p>
</blockquote>
<pre class="highlight plaintext"><code>datum1=value1*P1*datum2=value2*P1* ... *P1*datumN=valueN
</code></pre>

<blockquote>
<p>The separator between logically different information is the reserved sequence of characters <code class="prettyprint">*P1*</code>. </p>

<p>Other characters that must not be used within the parameters encoded by GestPay and in customised information are: </p>
</blockquote>
<pre class="highlight plaintext"><code>&amp;  (space)  §     (     )     * 
&lt;     &gt;     ,     ;     :    *P1* 
/     [     ]     ?     =     -- 
/*    %     //
</code></pre>

<p>These are non-mandatory fields, but are direct children of the <code class="prettyprint">Encrypt</code> root.  </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td style="text-align: center">2</td>
<td>Code identifying language used in communication with buyer</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code><sup><a href="#fn1" id="ref1">1</a></sup></td>
<td style="text-align: center">1000</td>
<td>String containing specific information as configured in the merchant’s profile</td>
</tr>
</tbody></table>

<p><sup id="fn1">1. Each field can be up to a maximum of 300 characters in length.<a href="#ref1" title="Jump back to footnote 1 in the text.">↩</a></sup></p>

<p>Information included in the <code class="prettyprint">customInfo</code> attribute is defined in the Back Office environment in the <strong>&ldquo;Fields &amp; Parameters&rdquo;</strong> section.</p>

<h3 id="requesttoken">RequestToken</h3>

<blockquote>
<p><code class="prettyprint">RequestToken</code> example we are requesting a token to store the payment data.</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;requestToken&gt;</span>MASKEDPAN<span class="nt">&lt;/requestToken&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>You can request a token that will represent the credit card for your website. You can use it later to handle recurring payments, or to avoid your customer to insert again his credit card data. This behaviour is compliant with PCI. Read more <a href="https://hype-app.github.io/gestpay-doc/rec/handling-subscriptions.html">here</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">requestToken</code> <sup><a href="#fn2" id="ref2">2</a></sup></td>
<td style="text-align: center">25</td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token any other value for Custom Token. Using <code class="prettyprint">:FORCED:</code> before the token, it&rsquo; s possible to have the token even if the transaction is not authorized.</td>
</tr>
</tbody></table>

<p><sup id="fn2">2. Required only when a Token is needed within the transaction response. <br> In order to be able to request, obtain and use a Token, merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office.<a href="#ref2" title="Jump back to footnote 2 in the text.">↩</a></sup></p>

<h3 id="paymenttypes">PaymentTypes</h3>

<blockquote>
<p>If you want to enable only Credit Card or Masterpass for this payment, you can send the request like this: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>CREDITCARD<span class="nt">&lt;/paymentType&gt;</span> 
    <span class="nt">&lt;paymentType&gt;</span>MASTERPASS<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>

<blockquote>
<p>If you only specify one payment type, Gestpay won&rsquo;t show the payment page but will redirect directly to the third party payment page: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>PAYPAL<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>

<p>GestPay provides a way for merchants to dinamically define which payment methods must be displayed for each transaction.</p>

<p>In order to do that, merchants must properly set the tag <code class="prettyprint">paymentType</code> that can be repeated as many times as needed, inside the tag <code class="prettyprint">paymentTypes</code> (with a final “s”).</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">paymentTypes</code></td>
<td style="text-align: center"></td>
<td>container of one or more <code class="prettyprint">paymentType</code></td>
</tr>
<tr>
<td><code class="prettyprint">paymentType</code><sup><a href="#fn4" id="ref4">4</a></sup></td>
<td style="text-align: center">25</td>
<td>Set of tags to set the visibility of payment systems on payment page (see <a href="#payment-type-codes">Payment Type Codes table</a>)</td>
</tr>
</tbody></table>

<p><sup id="fn4">4. <strong>Payment Systems Visibility</strong>. In order to be able to activate the Payment Systems Visibility the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The Payment System Visibility can be configured in the specific interface in the Back Office Merchant.<a href="#ref4" title="Jump back to footnote 4 in the text.">↩</a></sup></p>

          <h2 id="encrypt-result">Encrypt result</h2>

<blockquote>
<p>A succesful <code class="prettyprint">Encrypt</code> call would be like this: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;EncryptResult&gt;</span>
  <span class="nt">&lt;GestPayCryptDecrypt&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>ENCRYPT<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;CryptDecryptString&gt;</span>897543..<span class="nt">&lt;/CryptDecryptString&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription/&gt;</span>
  <span class="nt">&lt;/GestPayCryptDecrypt&gt;</span>
<span class="nt">&lt;/EncryptResult&gt;</span>
</code></pre>

<p><code class="prettyprint">Encrypt</code> web service returns back the following information in xml: </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td style="text-align: center">7</td>
<td>Decode the transaction type request (<code class="prettyprint">DECRYPT</code>, <code class="prettyprint">ENCRYPT</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td style="text-align: center">2</td>
<td>Transaction result (<code class="prettyprint">OK</code>/ <code class="prettyprint">KO</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">CryptDecryptString</code></td>
<td style="text-align: center">&hellip;..</td>
<td>Encrypted string get by parameter set in the xml request</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code> </td>
<td style="text-align: center">9</td>
<td>Error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td style="text-align: center">255</td>
<td>Error description</td>
</tr>
</tbody></table>

          <h2 id="encrypt-example-paypal">Encrypt example: Paypal</h2>

<h3 id="enabling-paypal">Enabling Paypal</h3>

<p>See <code class="prettyprint">PaymentTypes</code> example. </p>

<h3 id="show-product-info-at-paypal-39-s-buying-page">Show product info at paypal&rsquo;s buying page</h3>

<blockquote>
<p>User will see a <code class="prettyprint">Television</code> in his paypal checkout. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>PAYPAL<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;ProductDetails&gt;</span><span class="c">&lt;!-- if present, will be shown in paypal checkout --&gt;</span>
      <span class="nt">&lt;ProductDetail&gt;</span><span class="c">&lt;!-- one or more --&gt;</span>
        <span class="nt">&lt;ProductCode&gt;</span>1<span class="nt">&lt;/ProductCode&gt;</span>
        <span class="nt">&lt;SKU&gt;</span>AK-7<span class="nt">&lt;/SKU&gt;</span> 
        <span class="nt">&lt;Name&gt;</span>TV2000<span class="nt">&lt;/Name&gt;</span> 
        <span class="nt">&lt;Description&gt;</span>Television<span class="nt">&lt;/Description&gt;</span> 
        <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span> 
        <span class="nt">&lt;Price&gt;</span>100<span class="nt">&lt;/Price&gt;</span> 
        <span class="nt">&lt;UnitPrice&gt;</span>100<span class="nt">&lt;/UnitPrice&gt;</span> 
        <span class="nt">&lt;Type&gt;</span>1<span class="nt">&lt;/Type&gt;</span> 
        <span class="nt">&lt;Vat&gt;</span>10<span class="nt">&lt;/Vat&gt;</span> 
        <span class="nt">&lt;Discount&gt;</span>0<span class="nt">&lt;/Discount&gt;</span>
      <span class="nt">&lt;/ProductDetail&gt;</span> 
    <span class="nt">&lt;/ProductDetails&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>

<p>If you populate these fields accordingly, you can show your user the list of products: </p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProductCode</code></td>
<td style="text-align: center">12</td>
<td>Article’s product Code</td>
</tr>
<tr>
<td><code class="prettyprint">SKU</code></td>
<td style="text-align: center">50</td>
<td>Article’s Stock Keeping Unit</td>
</tr>
<tr>
<td><code class="prettyprint">Name</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">100</td>
<td>Article’s name</td>
</tr>
<tr>
<td><code class="prettyprint">Description</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">255</td>
<td>Article’s description</td>
</tr>
<tr>
<td><code class="prettyprint">Quantity</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">3</td>
<td>The number of products</td>
</tr>
<tr>
<td><code class="prettyprint">Price</code></td>
<td style="text-align: center">12</td>
<td>Article’s price</td>
</tr>
<tr>
<td><code class="prettyprint">UnitPrice</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">12</td>
<td>Article’s Unit Price</td>
</tr>
<tr>
<td><code class="prettyprint">Type</code></td>
<td style="text-align: center">2</td>
<td>The type of article: 1-product, 2-shipping, 3-handling</td>
</tr>
<tr>
<td><code class="prettyprint">Vat</code></td>
<td style="text-align: center">2</td>
<td>Value-Added Tax (the value of the tax)</td>
</tr>
<tr>
<td><code class="prettyprint">Discount</code></td>
<td style="text-align: center">2</td>
<td>The amount offered by you as discount</td>
</tr>
</tbody></table>

<h3 id="paypal-seller-protection">Paypal Seller Protection</h3>

<blockquote>
<p>Paypal Seller Protection example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;ppSellerProtection&gt;</span>1<span class="nt">&lt;/ppSellerProtection&gt;</span>
  <span class="nt">&lt;shippingDetails&gt;</span>
    <span class="nt">&lt;shipToName&gt;</span>Marco Bianchi<span class="nt">&lt;/shipToName&gt;</span>
    <span class="nt">&lt;shipToStreet&gt;</span>Via Milano 1<span class="nt">&lt;/shipToStreet&gt;</span>
    <span class="nt">&lt;shipToCity&gt;</span>Torino<span class="nt">&lt;/shipToCity&gt;</span>
    <span class="nt">&lt;shipToState&gt;</span>Torino<span class="nt">&lt;/shipToState&gt;</span>
    <span class="nt">&lt;shipToCountryCode&gt;</span>IT<span class="nt">&lt;/shipToCountryCode&gt;</span>
    <span class="nt">&lt;shipToZip&gt;</span>10100<span class="nt">&lt;/shipToZip&gt;</span>
    <span class="nt">&lt;shipToStreet2/&gt;</span>
  <span class="nt">&lt;/shippingDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>For more informations, checkout the <a href="https://hype-app.github.io/gestpay-doc/gs/how-gestpay-works.html">Seller Protection: Fields &amp; Parameters</a> page.</p>

<p>If you want to activate the <strong>Paypal Seller Protection</strong> you must:</p>

<ul>
<li>set <code class="prettyprint">ppSellerProtection</code> to 1</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ppSellerProtection</code> <sup><a href="#fn3" id="ref3">3</a></sup></td>
<td style="text-align: center">1</td>
<td>Parameter to set the use of a confirmed addresses</td>
</tr>
</tbody></table>

<ul>
<li>send all the shipment data in the <code class="prettyprint">shipmentDetails</code> tag: </li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shipToName</code></td>
<td style="text-align: center">32</td>
<td>String containing the shipping name</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet</code></td>
<td style="text-align: center">100</td>
<td>String containing the shipping address</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCity</code></td>
<td style="text-align: center">40</td>
<td>String containing the shipping city</td>
</tr>
<tr>
<td><code class="prettyprint">shipToState</code></td>
<td style="text-align: center">40</td>
<td>String containing the shipping state (see <a href="#">State Codes table - TODO</a>)</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCountryCode</code></td>
<td style="text-align: center">2</td>
<td>String containing the shipping country code (see <a href="#">Country Codes table - TODO</a>)</td>
</tr>
<tr>
<td><code class="prettyprint">shipToZip</code></td>
<td style="text-align: center">20</td>
<td>String containing the shipping zip</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet2</code></td>
<td style="text-align: center">100</td>
<td>String containing an additional shipping address field</td>
</tr>
</tbody></table>

<p><sup id="fn3">3. <strong>PayPal Seller Protection parameter</strong>. In order to be able to activate the Seller Protection Option the merchants need to appropriately set &ldquo;Fields and Parameters&rdquo; in the dedicated section of GestPay Merchant Back Office.<a href="#ref3" title="Jump back to footnote 3 in the text.">↩</a></sup></p>

<h3 id="paypal-recurring-payments"> Paypal recurring payments</h3>

<blockquote>
<p>In this way you can activate recurring payments on paypal. Note that no <code class="prettyprint">paymentType</code> is needed. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span> 
  <span class="nt">&lt;payPalBillingAgreementDescription&gt;</span>
    description of the agreement 
  <span class="nt">&lt;/payPalBillingAgreementDescription&gt;</span>
<span class="nt">&lt;Encrypt&gt;</span>
</code></pre>

<p>A Buyer will be able to subscribe a Billing Agreement on PayPal website so authorizing the Merchant to debit his/her PayPal account in future transactions.</p>

<p>To use PayPal Reference Transaction it&rsquo;s necessary to fill the tag <code class="prettyprint">PayPalBillingAgreementDescription</code> that can be present or not (in case of a normal PayPal payment it will be left empty or not passed at all).</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">payPalBillingAgreementDescription</code></td>
<td style="text-align: center">127</td>
<td>Description of the goods, terms and conditions of the billing agreement</td>
</tr>
</tbody></table>

<p>The Encryption service, if field <code class="prettyprint">payPalBillingAgreementDescription</code> is present and not empty, assumes that the payment method is PayPal (so <code class="prettyprint">paymentType</code> field in this case is <strong>not mandatory</strong>: if present it must be valued <code class="prettyprint">PAYPAL</code>).</p>

<p>If this tag is passed to Encryption, GestPay bypasses the Pagam page in every case (even if other payment methods are enabled for the Merchant).</p>

<p>This tag has to be filled with description of the goods, terms and conditions of the billing agreement.</p>

<aside class="notice">When using paypal Billing Agreement, you will get a Token to use later with the callPagamS2S webservice. </aside>

          <h2 id="encrypt-example-ideal-and-mybank">Encrypt Example: IDeal and MyBank</h2>

<blockquote>
<p>MyBank example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>MYBANK<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;paymentTypeDetail&gt;</span> 
    <span class="nt">&lt;MyBankBankCode&gt;</span>Code0000X<span class="nt">&lt;/MyBankBankCode&gt;</span>
  <span class="nt">&lt;/paymentTypeDetail&gt;</span> 
<span class="nt">&lt;/Enrcypt&gt;</span>
</code></pre>

<blockquote>
<p>IDeal example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>IDEAL<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;paymentTypeDetail&gt;</span> 
    <span class="nt">&lt;MyBankBankCode&gt;</span>Code0000Y<span class="nt">&lt;/MyBankBankCode&gt;</span>
  <span class="nt">&lt;/paymentTypeDetail&gt;</span> 
<span class="nt">&lt;/Enrcypt&gt;</span>
</code></pre>

<p>If you choose let your users pay with MyBank or IDeal, you have to compile other two fileds.</p>

<p>More details can be found in at the <a href="https://hype-app.github.io/gestpay-doc/oth/mybank.html">MyBank and IDeal</a> page.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">paymentTypeDetail</code></td>
<td style="text-align: center"></td>
<td>container of one of <code class="prettyprint">MyBankBankCode</code> or <code class="prettyprint">IdealBankCode</code></td>
</tr>
<tr>
<td><code class="prettyprint">MyBankBankCode</code><sup><a href="#fn5" id="ref5">5</a></sup></td>
<td style="text-align: center">25</td>
<td>Tag to set the Bank to show on payment page (the bank List is retrieved from <code class="prettyprint">WsS2S.CallMyBankListS2S</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">IdealBankCode</code><sup><a href="#fn5" id="ref5">5</a></sup></td>
<td style="text-align: center">25</td>
<td>Tag to set the Bank to show on payment page (the bank List is retrieved from <code class="prettyprint">WsS2S.CallIdealListS2S</code>)</td>
</tr>
</tbody></table>

<p><sup id="fn5">5. <strong>paymentTypeDetail</strong>. In order to be able to activate the payment Type Detail the merchants need to appropriately set “Fields and Parameters” in the dedicated section of GestPay Merchant Back Office. The correct merchant configuration of Sofort and Ideal has to be configured in the specific interface of Back Office Merchant.(1) Each field can be up to a maximum of 300 characters in length<a href="#ref5" title="Jump back to footnote 5 in the text.">↩</a></sup></p>

          <h2 id="encrypt-example-consel">Encrypt Example: Consel</h2>

<blockquote>
<p>Consel example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>CONSEL<span class="nt">&lt;/paymentType&gt;</span><span class="c">&lt;!-- select CONSEL --&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;Consel_MerchantPro&gt;</span>WIK<span class="nt">&lt;/Consel_MerchantPro&gt;</span>
  <span class="nt">&lt;Consel_CustomerInfo&gt;</span>
    <span class="nt">&lt;Surname&gt;</span>Rossi<span class="nt">&lt;/Surname&gt;</span>
    <span class="nt">&lt;Name&gt;</span>Mario<span class="nt">&lt;/Name&gt;</span> 
    <span class="nt">&lt;TaxationCode&gt;</span>RSSMRA70D23H501H<span class="nt">&lt;/TaxationCode&gt;</span> 
    <span class="nt">&lt;Address&gt;</span>Via Torino<span class="nt">&lt;/Address&gt;</span>
    <span class="nt">&lt;City&gt;</span>Roma<span class="nt">&lt;/City&gt;</span> 
    <span class="nt">&lt;StateCode&gt;</span>RM<span class="nt">&lt;/StateCode&gt;</span> 
    <span class="nt">&lt;DateAddress&gt;</span>11/04/1999<span class="nt">&lt;/DateAddress&gt;</span> 
    <span class="nt">&lt;Phone&gt;</span>0632...<span class="nt">&lt;/Phone&gt;</span> 
    <span class="nt">&lt;MobilePhone&gt;</span>331...<span class="nt">&lt;/MobilePhone&gt;</span>
  <span class="nt">&lt;/Consel_CustomerInfo&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>Here more info about <a href="https://hype-app.github.io/gestpay-doc/oth/consel-rate-in-rete.html">Consel Rate in Rete</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Consel_MerchantPro</code></td>
<td style="text-align: center">3</td>
<td>Merchant Promotional Code (Mandatory to show Consel in the pagam&rsquo;s Payment Method)</td>
</tr>
<tr>
<td><code class="prettyprint">Consel_CustomerInfo</code></td>
<td style="text-align: center"></td>
<td>Wrapper for Consel tags)</td>
</tr>
<tr>
<td><code class="prettyprint">Surname</code></td>
<td style="text-align: center">30</td>
<td>Customer Surname</td>
</tr>
<tr>
<td><code class="prettyprint">NAme</code></td>
<td style="text-align: center">30</td>
<td>Customer Name</td>
</tr>
<tr>
<td><code class="prettyprint">TaxationCode</code></td>
<td style="text-align: center">30</td>
<td>Customer Taxation Code</td>
</tr>
<tr>
<td><code class="prettyprint">Address</code></td>
<td style="text-align: center">30</td>
<td>Customer Address</td>
</tr>
<tr>
<td><code class="prettyprint">City</code></td>
<td style="text-align: center">30</td>
<td>Customer City</td>
</tr>
<tr>
<td><code class="prettyprint">StateCode</code></td>
<td style="text-align: center">30</td>
<td>Customer State Code</td>
</tr>
<tr>
<td><code class="prettyprint">DateAddress</code></td>
<td style="text-align: center">30</td>
<td>Date since the customer lives in the declared address (dd/mm/yyyy)</td>
</tr>
<tr>
<td><code class="prettyprint">Phone</code></td>
<td style="text-align: center">30</td>
<td>Customer Phone</td>
</tr>
<tr>
<td><code class="prettyprint">MobilePhone</code></td>
<td style="text-align: center">30</td>
<td>Customer Mobile phone</td>
</tr>
</tbody></table>

          <h2 id="encrypt-example-sofort">Encrypt Example: Sofort</h2>

<blockquote>
<p>SOFORT example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>985<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>SOFORT<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetails&gt;</span>
      <span class="nt">&lt;FirstName&gt;</span>Albert<span class="nt">&lt;/FirstName&gt;</span>
      <span class="nt">&lt;Lastname&gt;</span>Einstein<span class="nt">&lt;Lastname&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>albert.einstein@princeton.edu<span class="nt">&lt;/PrimaryEmail&gt;</span>
    <span class="nt">&lt;/CustomerDetails&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>DE<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
</code></pre>

<p>Sofort does not need mandatory parameters, but if you send the following parameters, you will jump straight to the SOFORT payment page without authenticating. All these fields are children of <code class="prettyprint">OrderDetails</code>. </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.FirstName</code></td>
<td style="text-align: center">65</td>
<td>Customer First Name</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.Lastname</code></td>
<td style="text-align: center">65</td>
<td>Customer Last name</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryEmail</code></td>
<td style="text-align: center">100</td>
<td>Customer primary email</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.CountryCode</code></td>
<td style="text-align: center">2</td>
<td>Alpha-2 code. For example, US is “US”</td>
</tr>
</tbody></table>

          <h2 id="encrypt-example-klarna"> Encrypt Example: Klarna</h2>

<blockquote>
<p>Here is an example of how to enable Klarna with Gestpay.</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PKLA<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetails&gt;</span>
      <span class="nt">&lt;FirstName&gt;</span>Alfred<span class="nt">&lt;/FirstName&gt;</span>
      <span class="nt">&lt;Lastname&gt;</span>Nobel<span class="nt">&lt;Lastname&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>alfred.nobel@dynamite.se<span class="nt">&lt;/PrimaryEmail&gt;</span>
      <span class="nt">&lt;SocialSecurityNumber&gt;</span>18331021+129<span class="nt">&lt;/SocialSecurityNumber&gt;</span>
    <span class="nt">&lt;/CustomerDetails&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;StreetNumber&gt;</span>14<span class="nt">&lt;StreetNumber&gt;</span>
      <span class="nt">&lt;StreetName&gt;</span>Sturegatan<span class="nt">&lt;/StreetName&gt;</span>
      <span class="nt">&lt;City&gt;</span>Stockholm<span class="nt">&lt;/City&gt;</span>
      <span class="nt">&lt;ZipCode&gt;</span>SE-102<span class="nt">&lt;/ZipCode&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>SE<span class="nt">&lt;/CountryCode&gt;</span><span class="c">&lt;!--mandatory--&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
    <span class="nt">&lt;ProductDetails&gt;</span>
      <span class="nt">&lt;ProductDetail&gt;</span><span class="c">&lt;!-- mandatory --&gt;</span>
        <span class="nt">&lt;ProductCode&gt;</span>1<span class="nt">&lt;/ProductCode&gt;</span>
        <span class="nt">&lt;SKU&gt;</span>AK-7<span class="nt">&lt;/SKU&gt;</span> 
        <span class="nt">&lt;Name&gt;</span>TV2000<span class="nt">&lt;/Name&gt;</span> 
        <span class="nt">&lt;Description&gt;</span>Television<span class="nt">&lt;/Description&gt;</span> 
        <span class="nt">&lt;Quantity&gt;</span>1<span class="nt">&lt;/Quantity&gt;</span> 
        <span class="nt">&lt;Price&gt;</span>100<span class="nt">&lt;/Price&gt;</span> 
        <span class="nt">&lt;UnitPrice&gt;</span>100<span class="nt">&lt;/UnitPrice&gt;</span> 
        <span class="nt">&lt;Type&gt;</span>1<span class="nt">&lt;/Type&gt;</span> 
        <span class="nt">&lt;Vat&gt;</span>10<span class="nt">&lt;/Vat&gt;</span> 
        <span class="nt">&lt;Discount&gt;</span>0<span class="nt">&lt;/Discount&gt;</span>
      <span class="nt">&lt;/ProductDetail&gt;</span> 
    <span class="nt">&lt;/ProductDetails&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>Klarna requires only two parameters as mandatory, children of <code class="prettyprint">OrderDetails</code>: </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">BillingAddress.CountryCode</code></td>
<td style="text-align: center">2</td>
<td>one of [AT &#124; DK &#124; FI &#124; DE &#124; NL &#124; NO &#124; SE]</td>
</tr>
<tr>
<td><code class="prettyprint">ProductDetails.ProductDetail</code></td>
<td style="text-align: center"></td>
<td>the list of ordered products</td>
</tr>
</tbody></table>

<p>If you send other fields, your customer will find them already filled: </p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.FirstName</code></td>
<td style="text-align: center">65</td>
<td>Customer First Name</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.Lastname</code></td>
<td style="text-align: center">65</td>
<td>the list of ordered products</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryEmail</code></td>
<td style="text-align: center">100</td>
<td>Customer primary email</td>
</tr>
<tr>
<td><code class="prettyprint">CustomerDetail.SocialSecurityNumber</code></td>
<td style="text-align: center">20</td>
<td>Customer&rsquo;s social or fiscal identifier (for Klarna Use)</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.StreetNumber</code></td>
<td style="text-align: center">5</td>
<td>Shipping Street Number</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.StreetName</code></td>
<td style="text-align: center">100</td>
<td>Shipping Street</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.City</code></td>
<td style="text-align: center">50</td>
<td>Billing City</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.ZipCode</code></td>
<td style="text-align: center">50</td>
<td>Billing Zip Code</td>
</tr>
</tbody></table>

<p><code class="prettyprint">ProductDetails</code> can have one or more <code class="prettyprint">ProductDetail</code>. Here is a description of its fields:</p>

<table><thead>
<tr>
<th></th>
<th style="text-align: center"></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ProductCode</code></td>
<td style="text-align: center">12</td>
<td>Article’s product Code</td>
</tr>
<tr>
<td><code class="prettyprint">SKU</code></td>
<td style="text-align: center">50</td>
<td>Article’s Stock Keeping Unit</td>
</tr>
<tr>
<td><code class="prettyprint">Name</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">100</td>
<td>Article’s name</td>
</tr>
<tr>
<td><code class="prettyprint">Description</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">255</td>
<td>Article’s description</td>
</tr>
<tr>
<td><code class="prettyprint">Quantity</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">3</td>
<td>The number of products</td>
</tr>
<tr>
<td><code class="prettyprint">Price</code></td>
<td style="text-align: center">12</td>
<td>Article’s price</td>
</tr>
<tr>
<td><code class="prettyprint">UnitPrice</code> <sup><a href="#fn6" id="ref6">6</a></sup></td>
<td style="text-align: center">12</td>
<td>Article’s Unit Price</td>
</tr>
<tr>
<td><code class="prettyprint">Type</code></td>
<td style="text-align: center">2</td>
<td>The type of article: 1-product, 2-shipping, 3-handling</td>
</tr>
<tr>
<td><code class="prettyprint">Vat</code></td>
<td style="text-align: center">2</td>
<td>Value-Added Tax (the value of the tax)</td>
</tr>
<tr>
<td><code class="prettyprint">Discount</code></td>
<td style="text-align: center">2</td>
<td>The amount offered by you as discount</td>
</tr>
</tbody></table>

<p><sup id="fn6">6. <strong>Line Items</strong>: in case the buyer selects PayPal as payment method in the payment page, fields Name, Description, Quantity and UnitPrice of every occurrency of the ProductDetail tag will be used to show the transaction items details in PayPal payment page.<a href="#ref6" title="Jump back to footnote 6 in the text.">↩</a></sup></p>

          <h2 id="encrypt-example-qiwi">Encrypt Example: Qiwi</h2>

<blockquote>
<p>Qiwi call example :</p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PQIW<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetails&gt;</span>
      <span class="nt">&lt;PrimaryPhone&gt;</span>0123456789<span class="nt">&lt;/PrimaryPhone&gt;</span>
    <span class="nt">&lt;/CustomerDetails&gt;</span>
    <span class="nt">&lt;BillingAddress&gt;</span>
      <span class="nt">&lt;CountryCode&gt;</span>US<span class="nt">&lt;/CountryCode&gt;</span>
    <span class="nt">&lt;/BillingAddress&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>Qiwi does not need mandatory parameters, but if you send these few parameters you can have a frictionless call directly to the first screen of QIWI where authentication data are asked. These fields are children of <code class="prettyprint">OrderDetails</code>:</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryPhone</code></td>
<td style="text-align: center">20</td>
<td>Customer&rsquo;s phone including prefix</td>
</tr>
<tr>
<td><code class="prettyprint">BillingAddress.CountryCode</code></td>
<td style="text-align: center">2</td>
<td>Alpha-2 code example for US is “US”</td>
</tr>
</tbody></table>

<p>This mean that no others values are asked to the buyers; but if these field are not sent with the payment, a page will be displayed in order to ask the necessary fields like Phone and CountryCode of the buyer.</p>

          <h2 id="encrypt-example-yandex">Encrypt Example: Yandex</h2>

<blockquote>
<p>Yandex Example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PYAN<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetails&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>alfred.nobel@dynamite.se<span class="nt">&lt;/PrimaryEmail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>Yandex does not need mandatory parameters; but if you send  <code class="prettyprint">CustomerDetail.PrimaryEmail</code> you can have a frictionless call directly to the first screen of Yandex where authentication data are asked.</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CustomerDetail.PrimaryEmail</code></td>
<td style="text-align: center">100</td>
<td>Customer primary email</td>
</tr>
</tbody></table>

<p>This mean that no others values are asked to the buyer; if this field is not sent with the payment, a page will ask the necessary fields.</p>

          <h2 id="encrypt-example-alipay">Encrypt Example: Alipay</h2>

<blockquote>
<p>Alipay example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;Encrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span>
  <span class="nt">&lt;amount&gt;</span>100<span class="nt">&lt;/amount&gt;</span>
  <span class="nt">&lt;shopTransactionId&gt;</span>34az85ord19<span class="nt">&lt;/shopTransactionId&gt;</span>
  <span class="nt">&lt;paymentTypes&gt;</span>
    <span class="nt">&lt;paymentType&gt;</span>S2PALI<span class="nt">&lt;/paymentType&gt;</span>
  <span class="nt">&lt;/paymentTypes&gt;</span>
  <span class="nt">&lt;OrderDetails&gt;</span>
    <span class="nt">&lt;CustomerDetails&gt;</span>
      <span class="nt">&lt;PrimaryEmail&gt;</span>alfred.nobel@dynamite.se<span class="nt">&lt;/PrimaryEmail&gt;</span>
  <span class="nt">&lt;/OrderDetails&gt;</span>
<span class="nt">&lt;/Encrypt&gt;</span>
</code></pre>

<p>Alipay does not need any mandatory parameters. Just specify the <code class="prettyprint">PaymentType</code> <code class="prettyprint">S2PALI</code> and the payment page will show to your user. </p>

          <h2 id="decrypt">Decrypt</h2>

<blockquote>
<p>A <code class="prettyprint">Decrypt</code> request: </p>
</blockquote>
<pre class="highlight xml"><code> <span class="nt">&lt;Decrypt&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;CryptedString&gt;</span>HT987YU....<span class="nt">&lt;/CryptedString&gt;</span>
 <span class="nt">&lt;/Decrypt&gt;</span>
</code></pre>

<p>GestPay communicates the payment transaction result to the merchant through an encrypted string (parameter b of the call to the url preconfigured by the merchant) with a set of transaction&rsquo;s informations.</p>

<p>To Decrypt the data it is necessary to use Decrypt method passing the following parameters, the tags&rsquo; names are case sensitive:</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td style="text-align: center">30</td>
<td>Shop Login</td>
</tr>
<tr>
<td><code class="prettyprint">CryptedString</code></td>
<td style="text-align: center">&hellip;&hellip;</td>
<td>Encrypted string get by parameter b of the call to the url preconfigured by the merchant</td>
</tr>
</tbody></table>

          <h2 id="decrypt-result">Decrypt result</h2>

<blockquote>
<p>GestPay authenticates the calling server and checks the encrypted data string. If the checks are passed, it returns an unencrypted data string containing the transaction result: </p>
</blockquote>
<pre class="highlight xml"><code> <span class="nt">&lt;DecryptResult&gt;</span>
  <span class="nt">&lt;GestPayCryptDecrypt</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>DECRYPT<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;ShopTransactionID&gt;</span>34az85ord19<span class="nt">&lt;/ShopTransactionID&gt;</span>
    <span class="nt">&lt;BankTransactionID&gt;</span>656<span class="nt">&lt;/BankTransactionID&gt;</span>
    <span class="nt">&lt;AuthorizationCode&gt;</span>983RT4<span class="nt">&lt;/AuthorizationCode&gt;</span>
    <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
    <span class="nt">&lt;Amount&gt;</span>985.40<span class="nt">&lt;/Amount&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
  <span class="nt">&lt;/GestPayCryptDecrypt&gt;</span>
<span class="nt">&lt;/DecryptResult&gt;</span>
</code></pre>

<p>Decrypt webservice returns back the following information in the xml.</p>

<p>The minimum information returned back as transaction result is marked in bold. </p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">max length</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td style="text-align: center">7</td>
<td>Decode the transaction type request (<code class="prettyprint">DECRYPT</code>, <code class="prettyprint">ENCRYPT</code>)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">TransactionResult</code></strong></td>
<td style="text-align: center"><strong>2</strong></td>
<td><strong>Transaction result (<code class="prettyprint">OK</code>/<code class="prettyprint">KO</code>)</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">ShopTransactionID</code></strong></td>
<td style="text-align: center"><strong>50</strong></td>
<td><strong>Identifier attributed to merchant’s transaction</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">BankTransactionID</code></strong></td>
<td style="text-align: center"><strong>9</strong></td>
<td><strong>Identifier attributed to the transaction by GestPay</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">AuthorizationCode</code></strong></td>
<td style="text-align: center"><strong>6</strong></td>
<td><strong>Transaction authorisation code</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">Currency</code></strong></td>
<td style="text-align: center"><strong>3</strong></td>
<td><strong>Code identifying currency in which transaction amount is denominated (see <a href="#currency-codes">Currency Codes</a> table)</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">Amount</code></strong></td>
<td style="text-align: center"><strong>9</strong></td>
<td><strong>Transaction amount. Decimals (max. 2 numbers) are optional and separator is the point (see examples)</strong></td>
</tr>
<tr>
<td><code class="prettyprint">Country</code></td>
<td style="text-align: center">30</td>
<td>Nationality of the issuing card institute</td>
</tr>
<tr>
<td><code class="prettyprint">CustomInfo</code></td>
<td style="text-align: center">1000</td>
<td> String that has the specific information as configured in themerchant’s profile. Each field can be up to a maximum of 300 characters in length.</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerName</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s name and surname</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerEmail</code></td>
<td style="text-align: center">50</td>
<td>Buyer’s e-mail address</td>
</tr>
<tr>
<td><code class="prettyprint">TDLevel</code></td>
<td style="text-align: center">255</td>
<td>Level of authentication for VBV Visa / Mastercard Securecode transactions. The string may have the value <code class="prettyprint">FULL</code> or <code class="prettyprint">HALF</code></td>
</tr>
<tr>
<td><strong><code class="prettyprint">ErrorCode</code></strong></td>
<td style="text-align: center"><strong>9</strong></td>
<td><strong>Error code</strong></td>
</tr>
<tr>
<td><strong><code class="prettyprint">ErrorDescription</code></strong></td>
<td style="text-align: center"><strong>255</strong></td>
<td><strong>Error description (localized in your language)</strong></td>
</tr>
<tr>
<td><code class="prettyprint">AlertCode</code></td>
<td style="text-align: center">9</td>
<td>Alert code</td>
</tr>
<tr>
<td><code class="prettyprint">AlertDescription</code></td>
<td style="text-align: center">255</td>
<td>Alert description in chosen language</td>
</tr>
<tr>
<td><code class="prettyprint">CVVPresent</code></td>
<td style="text-align: center">1</td>
<td>Credit Card security code flag</td>
</tr>
<tr>
<td><code class="prettyprint">MaskedPAN</code></td>
<td style="text-align: center">25</td>
<td>Masked Pan string</td>
</tr>
<tr>
<td><code class="prettyprint">PaymentMethod</code></td>
<td style="text-align: center">100</td>
<td>Indicates the used Payment Method</td>
</tr>
<tr>
<td><code class="prettyprint">TOKEN</code> </td>
<td style="text-align: center">25</td>
<td>String containing the token value</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td style="text-align: center">100</td>
<td> String containing Card Type</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryMonth</code> </td>
<td style="text-align: center">2</td>
<td>String containing the token expiry month</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryYear</code></td>
<td style="text-align: center">2</td>
<td>String containing the token expiry year</td>
</tr>
<tr>
<td><code class="prettyprint">TransactionKey</code> </td>
<td style="text-align: center">18</td>
<td>Transaction identifier for 3D transactions. Not used in transactions managed with the Payment Page. It is useful only in Server-Server transactions</td>
</tr>
<tr>
<td><code class="prettyprint">VbV</code></td>
<td style="text-align: center">2</td>
<td>Verified By Visa Flag</td>
</tr>
<tr>
<td><code class="prettyprint">VbVRisp</code></td>
<td style="text-align: center"></td>
<td>Encrypted string containing information for 3D- Secure transactions. Not used in transactions managed with the Payment Page. It is useful only in Server-Server transactions</td>
</tr>
<tr>
<td><code class="prettyprint">VbVBuyer</code></td>
<td style="text-align: center">2</td>
<td>Information about the enrolment of the buyer&rsquo;s card to 3D-Secure protocol: <code class="prettyprint">OK</code> means that the card is enrolled, <code class="prettyprint">KO</code> means that the card is not enrolled</td>
</tr>
<tr>
<td><code class="prettyprint">VbVFlag</code></td>
<td style="text-align: center">2</td>
<td>Information about the 3D-Secure status. Not used in transactions managed with the Payment Page. It is useful only in Server-Server transactions.</td>
</tr>
</tbody></table>

<p>Other information is defined as optional and will be returned according to the merchant’s profile settings made in the GestPay Back Office environment.</p>

<p>A transaction result can be interpreted by verifying the <code class="prettyprint">TransactionResult</code> field value. The possible values are:</p>

<table><thead>
<tr>
<th>Transaction Result</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">OK</code> </td>
<td>Positive transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">KO</code> </td>
<td>Negative transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">XX</code> </td>
<td>Suspended transaction result. This is not a final result: Gestpay will send <code class="prettyprint">XX</code> when the outcome is asynchronous. Right now these systems are <code class="prettyprint">MyBank</code>, <code class="prettyprint">Sofort</code>, <code class="prettyprint">IDeal</code>, <code class="prettyprint">Bank Transfer</code>. In the future, this code might be returned with other payment systems (bitcoins, for example). <br/> A new communication will be provided to the merchant when the transaction will assume the final <code class="prettyprint">OK</code>/<code class="prettyprint">KO</code> status). <br/> <strong>If you receive a <code class="prettyprint">XX</code> code, don&rsquo;t send your goods but wait to receive the actual payment.</strong> The customer with <code class="prettyprint">XX</code> transaction is redirect to URL for positive response.</td>
</tr>
</tbody></table>

          <h1 id="js_gestpay-js-api">js_GestPay.js API</h1>

<blockquote>
<p>To start using this feature, import the script:</p>
</blockquote>
<pre class="highlight html"><code> <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ecomm.sella.it/pagam/JavaScript/js_GestPay.js"</span>
    <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

<blockquote>
<p>Once the script is imported, it will do some security checks. You can see this with the <code class="prettyprint">BrowserEnabled</code> variable: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="k">if</span> <span class="p">(</span> <span class="nx">BrowserEnabled</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">//The Browser is supported! </span>
    <span class="c1">//Proceed to create the Payment page</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//The browser is not supported </span>
    <span class="c1">//Place here error handle code</span>
<span class="p">}</span>
</code></pre>

<p>js_Gestpay.js is a javascript that enable you to process payments on your website, leaving you with the ability to completely design your custom payment page. </p>

<p>To use the following functionalities, you should first call <a href="#encrypt">`<code class="prettyprint">WSCryptDecrypt.Encrypt</code> webservice</a>. </p>

          <h2 id="createpaymentpage">CreatePaymentPage</h2>

<blockquote>
<p>Syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">CreatePaymentPage</span><span class="p">(</span>
    <span class="nx">shopLogin</span><span class="p">,</span> <span class="c1">//I.E. 90000001</span>
    <span class="nx">EncryptedString</span><span class="p">,</span> <span class="c1">// "CFD3732BB102..." </span>
    <span class="nx">PaymentPageLoaded</span><span class="p">);</span> <span class="c1">// a callback to call on success</span>
</code></pre>

<blockquote>
<p>Example: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">CreatePaymentPage</span><span class="p">(</span>
    <span class="s1">'9000001'</span><span class="p">,</span>  <span class="c1">//shopLogin</span>
    <span class="s1">'DcffrrnDNdjfnemfnermgnermNfdm,gnem/*ng'</span><span class="p">,</span> <span class="c1">//EncryptedString </span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">//callback </span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">==</span> <span class="mi">10</span><span class="p">){</span> 
            <span class="c1">//iFrame created and payment page correctly loaded</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//An error has occurred, check ErrorCode and ErrorDescription</span>
            <span class="c1">//properties of the Result object</span>
        <span class="p">}</span> 
    <span class="p">});</span>
</code></pre>

<p>The first thing to do to accept payments securely is to call <code class="prettyprint">GestPay.CreatePaymentPage()</code>.</p>

<p>The function will create an hidden iFrame into the body element and will load the payment page passing the merchant code and the generated encrypted string from the previous phase. </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Shop Login</td>
<td><code class="prettyprint">string</code></td>
<td>the code that identifies your shop.</td>
</tr>
<tr>
<td>Encrypted String</td>
<td><code class="prettyprint">string</code></td>
<td>the string created with <code class="prettyprint">WSCryptEncrypt.Encrypt</code> webservice.</td>
</tr>
<tr>
<td>callback</td>
<td><code class="prettyprint">function</code></td>
<td>the callback that will be called with the result</td>
</tr>
</tbody></table>

          <h2 id="sendpayment">SendPayment</h2>

<h3 id="credit-card-authorization">Credit card authorization</h3>

<blockquote>
<p>syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span> <span class="p">({</span> 
        <span class="na">CC</span>    <span class="p">:</span> <span class="s1">''</span><span class="p">,</span> 
        <span class="na">EXPMM</span> <span class="p">:</span> <span class="s1">''</span><span class="p">,</span> 
        <span class="na">EXPYY</span> <span class="p">:</span> <span class="s1">''</span><span class="p">,</span> 
        <span class="na">CVV2</span> <span class="p">:</span> <span class="s1">''</span> <span class="c1">//optional </span>
    <span class="p">},</span>
    <span class="nx">callBackObj</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span><span class="p">({</span>
        <span class="na">CC</span> <span class="p">:</span> <span class="s1">'44444444444444444'</span><span class="p">,</span> 
        <span class="na">EXPMM</span> <span class="p">:</span> <span class="s1">'11'</span><span class="p">,</span>
        <span class="na">EXPYY</span> <span class="p">:</span> <span class="s1">'14'</span> 
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErroCode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//Transaction correctly processed</span>
            <span class="c1">//Decrypt the Result.EncryptedString property to read the </span>
            <span class="c1">//transaction result</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//An error has occurred, check ErrorCode and ErrorDescription </span>
            <span class="c1">//properties of the Result object</span>
        <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>To send the credit card data to the hidden iFrame, the checkout page will assign a function to the <code class="prettyprint">OnSubimt</code> event of the credit card form, this function will retrieve the credit card data and will call the <code class="prettyprint">GestPay.SendPayment</code> method providing an object with the credit card number (<code class="prettyprint">CC</code>), the expiration month (<code class="prettyprint">EXPMM</code>) and the expiration year (<code class="prettyprint">EXPYY</code>), the CVV (<code class="prettyprint">CVV2</code>) if enabled, and a CallBack object. </p>

<p>The input is composed of two arguments: </p>

<ul>
<li>The object <code class="prettyprint">CCData</code>, with these fields</li>
</ul>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>Size</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CC</code></td>
<td>Credit card number</td>
<td><code class="prettyprint">number</code></td>
<td>min: 13, max: 19</td>
</tr>
<tr>
<td><code class="prettyprint">EXPMM</code></td>
<td>Expiration Month</td>
<td><code class="prettyprint">number</code></td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">EXPYY</code></td>
<td>Expiration Year</td>
<td><code class="prettyprint">number</code></td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">CVV2</code> (optional)</td>
<td>Cvv/4DBC</td>
<td><code class="prettyprint">number</code></td>
<td>min:3, max:4</td>
</tr>
</tbody></table>

<ul>
<li>a callback function, to handle the output. </li>
</ul>

<aside class="warning">To free the Shop from the need to comply with PCI Security standard, the OnSubmit event of the Credit card form must avoid to postback the data to the checkout page! </aside>

<h3 id="call-after-3d-authentication">Call after 3D Authentication</h3>

<blockquote>
<p>Syntax: </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span><span class="p">({</span>
        <span class="na">PARes</span> <span class="p">:</span> <span class="s1">''</span><span class="p">,</span> 
        <span class="na">TransKey</span> <span class="p">:</span> <span class="s1">''</span>
    <span class="p">},</span>  
    <span class="nx">callbackFunction</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">GestPay</span><span class="p">.</span><span class="nx">SendPayment</span> <span class="p">({</span>
    <span class="na">PARes</span> <span class="p">:</span> <span class="s1">'xMNjdsre23214hjksBBDsjkrhewGSD/*dwhjdkhawNDAHDGUY'</span><span class="p">,</span> 
    <span class="na">TransKey</span> <span class="p">:</span> <span class="s1">'eFtstSStefgd23432'</span>
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErroCode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="c1">// Transaction correctly processed ! </span>
            <span class="c1">// Decrypt the Result.EncryptedString property to read the </span>
            <span class="c1">// transaction result</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="c1">// An error has occurred, check ErrorCode and ErrorDescription</span>
            <span class="c1">// properties of the Result object</span>
        <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>If during the first <code class="prettyprint">SendPayment</code> call <code class="prettyprint">Result.ErrorCode == 8006</code>, you should redirect the user to the <code class="prettyprint">pagam3d.aspx</code> page. You can read about the process at this link: <a href="https://hype-app.github.io/gestpay-doc/pay/customizing-the-payment-page.html">Customizing the payment page</a>. </p>

<p>When card holder is verified and authorized, you have to re-call <code class="prettyprint">SendPayment()</code> with some new parameters: </p>

<ul>
<li><code class="prettyprint">CCData</code> (<code class="prettyprint">object</code>)

<ul>
<li><code class="prettyprint">PARes</code> (<code class="prettyprint">string</code>)</li>
<li><code class="prettyprint">TransKey</code> (<code class="prettyprint">string</code>)</li>
</ul></li>
<li>callback (<code class="prettyprint">function</code>) </li>
</ul>

          <h2 id="the-result-object"> the Result Object</h2>

<blockquote>
<p>Example: Merchant not 3D enabled or credit card not enrolled. </p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">LocalObj</span><span class="p">.</span><span class="nx">CallBack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Result</span><span class="p">){</span> 
    <span class="k">if</span> <span class="p">(</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Call failed an error has occurred </span>
        <span class="c1">//.... place here error handle code...</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Transaction correctly processed proceed to decrypt the</span>
        <span class="c1">// Result.EncryptedResponse property</span>
    <span class="p">}</span> 
<span class="p">}</span>
</code></pre>

<blockquote>
<p>Example: Merchant 3D enabled and 3D enrolled credit card</p>
</blockquote>
<pre class="highlight javascript"><code><span class="nx">LocalObj</span><span class="p">.</span><span class="nx">CallBack</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Result</span><span class="p">)</span> <span class="p">{</span> 
    <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">Result</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">==</span> <span class="mi">8006</span><span class="p">){</span>
            <span class="c1">//3D Transaction - Card holder authorization required </span>
            <span class="c1">//Get the TransKey</span>
            <span class="c1">//NOTE you have to store this value in your server for </span>
            <span class="c1">//further use</span>
            <span class="kd">var</span> <span class="nx">TransKey</span> <span class="o">=</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">TransKey</span><span class="p">;</span>
            <span class="c1">//Get the VBVRisp</span>
            <span class="kd">var</span> <span class="nx">VBVRisp</span> <span class="o">=</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">VBVRisp</span><span class="p">;</span>
            <span class="c1">//place here the code to redirect the card holder to the </span>
            <span class="c1">//authentication website</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//Call failed an error has occurred </span>
            <span class="c1">//.... place here error handle code...</span>
        <span class="p">}</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//Transaction correctly processed proceed to decrypt the //Result.EncryptedResponse property</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>When callbacks are executed, the <code class="prettyprint">Result</code> object will contain useful properties, needed to understand if an error has occurred.</p>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Result.ErrorCode</code></td>
<td>the error code</td>
</tr>
<tr>
<td><code class="prettyprint">Result.ErrorDescription</code></td>
<td>the error description</td>
</tr>
<tr>
<td><code class="prettyprint">Result.EncryptedResponse</code></td>
<td>returns the encrypted response string</td>
</tr>
<tr>
<td><code class="prettyprint">Result.TransKey</code></td>
<td>return the <code class="prettyprint">TransKey</code> in case of 3D enrolled credit card</td>
</tr>
<tr>
<td><code class="prettyprint">Result.VBVRisp</code></td>
<td>return the ciphered string needed for the cardholder authentication in case of 3D enrolled credit card</td>
</tr>
</tbody></table>

<p>The GestPay.SendPayment() function will send an asynchronous call to the hidden iFrame windows, the CallBack object will retrieve the Result object once the transaction result is thrown from the hidden payment page.</p>

          <h1 id="wss2s-api">WsS2S API</h1>

<p><em>Server to Server</em> communication between merchants and GestPay is managed by consuming WSs2s <a href="http://www.w3.org/TR/soap/">SOAP</a> web service.</p>

<p>Consuming WSs2s methods allow merchants to send requests and retrieve responses in XML format.</p>

<ul>
<li><p>Test environment url:<br>
<code class="prettyprint">https://testecomm.sella.it/gestpay/gestpayws/WSs2s.asmx?WSDL</code></p>

<ul>
<li>Production environment url: <br>
<code class="prettyprint">https://ecomms2s.sella.it/gestpay/gestpayws/WSs2s.asmx?WSDL</code></li>
</ul></li>
</ul>

<aside class="notice">To use *Server to Server* features, you must be authorized by Banca Sella or Easy Nolo.</aside>

          <h2 id="callpagams2s">callPagamS2S</h2>

<p>This service performs an authorization request. </p>

<p>Merchants can use this method to perform the transaction, passing all the parameters useful to define all the transaction’s features. </p>

<p>In bold, the mandatory attributes. </p>

<h3 id="request-parameters"> Request parameters</h3>

<blockquote>
<p>request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callPagamS2S&gt;</span>
    <span class="nt">&lt;shopLogin&gt;</span>9000002<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- euro --&gt;</span>
    <span class="nt">&lt;amount&gt;</span>24.21<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-0001<span class="nt">&lt;/shopTransactionId&gt;</span>
    <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
    <span class="nt">&lt;expiryMonth&gt;</span>06<span class="nt">&lt;/expiryMonth&gt;</span>
    <span class="nt">&lt;expiryYear&gt;</span>21<span class="nt">&lt;/expiryYear&gt;</span>
    <span class="nt">&lt;buyerName&gt;</span>John Fitzgerald Kennedy<span class="nt">&lt;/buyerName&gt;</span>
    <span class="nt">&lt;buyerEmail&gt;</span>johnny.kennedy@usa.com<span class="nt">&lt;/buyerEmail&gt;</span>
    <span class="nt">&lt;languageId&gt;</span>2<span class="nt">&lt;/languageId&gt;</span><span class="c">&lt;!-- english --&gt;</span>
    <span class="nt">&lt;cvv&gt;</span>987<span class="nt">&lt;/cvv&gt;</span>
    <span class="nt">&lt;customInfo&gt;&lt;/customInfo&gt;</span>
    <span class="nt">&lt;requestToken&gt;</span>MASKEDSPAN<span class="nt">&lt;/requestToken&gt;</span>
    <span class="nt">&lt;itemType&gt;</span>physical<span class="nt">&lt;/itemType&gt;</span>
    <span class="nt">&lt;shippingDetails&gt;</span>
        <span class="nt">&lt;shipToName&gt;</span>Jonny Kennedy<span class="nt">&lt;/shipToName&gt;</span>
        <span class="nt">&lt;shipToStreet&gt;</span>83 Beals street<span class="nt">&lt;/shipToStreet&gt;</span>
        <span class="nt">&lt;shipToCity&gt;</span>Brookline<span class="nt">&lt;/shipToCity&gt;</span>
        <span class="nt">&lt;shipToState&gt;</span>MA<span class="nt">&lt;/shipToState&gt;</span>
        <span class="nt">&lt;shipToCountryCode&gt;</span>US<span class="nt">&lt;/shipToCountryCode&gt;</span>
        <span class="nt">&lt;shipToZip&gt;</span>02446<span class="nt">&lt;/shipToZip&gt;</span>
    <span class="nt">&lt;/shippingDetails&gt;</span>
<span class="nt">&lt;/callPagamS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Data Type</th>
<th>max length</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">amount</code></strong></td>
<td>the amount of the transaction</td>
<td>numeric</td>
<td>9</td>
</tr>
<tr>
<td><code class="prettyprint">buyerEmail</code></td>
<td>buyer’s e-mail address. Using <code class="prettyprint">:NOSEND:</code> before the email address, it&rsquo; s possible to pass the email information but avoid to send an email to the buyer.</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">buyerName</code></td>
<td>buyer’s name</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">cardNumber</code></strong></td>
<td>card account number</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><strong><code class="prettyprint">uicCode</code></strong> </td>
<td>currency code</td>
<td>number</td>
<td>3</td>
</tr>
<tr>
<td><code class="prettyprint">customInfo</code></td>
<td>A string containing possible customised parameters (TODO ci devo mettere il riferimento ai parametri?)</td>
<td>string</td>
<td>1000</td>
</tr>
<tr>
<td><code class="prettyprint">cvv</code></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryMonth</code></strong></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">expiryYear</code></strong></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td>language to use for e-mails to the buyer</td>
<td>number</td>
<td>2</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopLogin</code></strong> </td>
<td>shopLogin value</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><strong><code class="prettyprint">shopTransactionId</code></strong></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">transKey</code></td>
<td>transaction ID value for 3D-Secure transactions</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><code class="prettyprint">requestToken</code></td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token any other value for Custom  Token</td>
<td>string</td>
<td>25</td>
</tr>
<tr>
<td><code class="prettyprint">tokenValue</code></td>
<td>String containing the token value, in case of <code class="prettyprint">PayPalBillingAgreement</code> this token value is the Token returned back from PayPal during the Billing Agreements</td>
<td>string</td>
<td>25</td>
</tr>
<tr>
<td><code class="prettyprint">ClientIP</code></td>
<td>For PayPal Billing Agreements it is required only in the &ldquo;one click&rdquo; mode transaction. <br> For AMEX transaction not in Euro, in this field the merchant could provide the client IP address to activate the Enhanced Authorization AAV</td>
<td>string</td>
<td>45</td>
</tr>
<tr>
<td><code class="prettyprint">itemType</code></td>
<td>Item Category: <code class="prettyprint">digital</code>/<code class="prettyprint">physical</code> (If <code class="prettyprint">physical</code> the <code class="prettyprint">ShippingDetails</code> have to be filled)</td>
<td>string</td>
<td>250</td>
</tr>
<tr>
<td><code class="prettyprint">shippingDetails</code></td>
<td>contains the shipping address.</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<ul>
<li>children of <code class="prettyprint">ShippingDetails</code> :</li>
</ul>

<table><thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shipToName</code></td>
<td>shipping name</td>
<td>string</td>
<td>32</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet</code></td>
<td>shipping address</td>
<td>string</td>
<td>100</td>
</tr>
<tr>
<td><code class="prettyprint">shipToState</code> </td>
<td>shipping state (see <a href="#">State Codes - TODO</a> table)</td>
<td>string</td>
<td>40</td>
</tr>
<tr>
<td><code class="prettyprint">shipToCountryCode</code></td>
<td>shipping country code (see <a href="#">Country Codes - TODO</a> table)</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">shipToZip</code></td>
<td>the shipping Zip</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><code class="prettyprint">shipToStreet2</code></td>
<td>an additional field for the shipping  address</td>
<td>string</td>
<td>200</td>
</tr>
</tbody></table>

<h3 id="response-fields">Response fields</h3>

<blockquote>
<p>response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
  <span class="nt">&lt;TransactionType&gt;</span>PAGAM<span class="nt">&lt;/TransactionType&gt;</span>
  <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
  <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-0001<span class="nt">&lt;/ShopTransactionID&gt;</span>
  <span class="nt">&lt;BankTransactionID&gt;</span>65<span class="nt">&lt;/BankTransactionID&gt;</span>
  <span class="nt">&lt;AuthorizationCode&gt;</span>365530<span class="nt">&lt;/AuthorizationCode&gt;</span>
  <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
  <span class="nt">&lt;Amount&gt;</span>24.21<span class="nt">&lt;/Amount&gt;</span>
  <span class="nt">&lt;Country&gt;</span>US<span class="nt">&lt;/Country&gt;</span>
  <span class="nt">&lt;Buyer&gt;</span>
    <span class="nt">&lt;BuyerName&gt;</span>John Fitzgerald Kennedy<span class="nt">&lt;/BuyerName&gt;</span>
    <span class="nt">&lt;BuyerEmail&gt;</span>johnny.kennedy@usa.com<span class="nt">&lt;/BuyerEmail&gt;</span>
  <span class="nt">&lt;/Buyer&gt;</span>
  <span class="nt">&lt;CustomInfo/&gt;</span>
  <span class="nt">&lt;TDLevel/&gt;</span>
  <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
  <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
  <span class="nt">&lt;AlertCode/&gt;</span>
  <span class="nt">&lt;AlertDescription/&gt;</span>
  <span class="nt">&lt;TransactionKey&gt;</span>579428899<span class="nt">&lt;/TransactionKey&gt;</span>
  <span class="nt">&lt;VbV&gt;</span>
    <span class="nt">&lt;VbVFlag&gt;</span>KO<span class="nt">&lt;/VbVFlag&gt;</span>
    <span class="nt">&lt;VbVBuyer/&gt;</span>
    <span class="nt">&lt;VbVRisp/&gt;</span>
  <span class="nt">&lt;/VbV&gt;</span>
<span class="nt">&lt;/GestPayS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">PAGAM</code> in response to <code class="prettyprint">CallPagamS2S</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td>Returns transaction result with <code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionID</code></td>
<td>shop transaction ID value</td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>ode given by bank to transaction</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCode</code></td>
<td>authorisation code</td>
</tr>
<tr>
<td><code class="prettyprint">Currency</code></td>
<td><a href="#currency-codes">currency code</a></td>
</tr>
<tr>
<td><code class="prettyprint">Country</code></td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">CustomInfo</code></td>
<td>custom parameters, if passed to the request</td>
</tr>
<tr>
<td><code class="prettyprint">BuyerType</code></td>
<td>Returns address name and e-mail of thebuyer divided as follows: <br> <ul><li><code class="prettyprint">BuyerEmail</code>: Returns the e-mail of the buyer</li><li><code class="prettyprint">BuyerName</code>: Returns the name of the buyer</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>a code related to the transaction result</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>the description connected to the ErrorCode value</td>
</tr>
<tr>
<td><code class="prettyprint">Amount</code></td>
<td>the amount of the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">TransKey</code></td>
<td>transaction ID value for 3D-Secure transactions</td>
</tr>
<tr>
<td><code class="prettyprint">VBV</code></td>
<td>Returns the values for 3D-Secure as follows: <br><ul><li><code class="prettyprint">VbVFlag</code>: 3D-secure flag (<code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>)</li><li><code class="prettyprint">VbVBuyer</code>:returns the flag Full Verified by Visa transaction</li><li><code class="prettyprint">VbVRisp</code>: Returns the encrypted string obtained by 3D-Secure directory</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">TDLevel</code></td>
<td>Level of authentication for 3D-Secure transactions. <code class="prettyprint">FULL</code> or <code class="prettyprint">HALF</code></td>
</tr>
</tbody></table>

<aside class="notice">other fields that are undocumented are unused. This applies also to fields described in the old version of the documentation.</aside>

          <h2 id="callsettles2s">CallSettleS2S</h2>

<p>This is the financial confirmation operation which may follow a positive authorisation.</p>

<p>It exists only for merchants with a M.O.T.O. configuration when a separation between the authorisation and the settlement phase is anticipated.</p>

<p>Merchants can use this method to settle the transaction. <strong>It&rsquo;s possible to settle only a part of the amount, so the amount value has to be passed</strong>. </p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callSettleS2S&gt;</span>
    <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
    <span class="nt">&lt;amount&gt;</span>55.00<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;shopTransID&gt;</span>MYSHOP-00142<span class="nt">&lt;/shopTransID&gt;</span>
    <span class="nt">&lt;bankTransID&gt;</span>159247522<span class="nt">&lt;/bankTransID&gt;</span>
<span class="nt">&lt;/callSettleS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>amount</td>
<td>  number</td>
<td>9</td>
</tr>
<tr>
<td><code class="prettyprint">uicCode</code></td>
<td><a href="#currency-codes">currency code</a></td>
<td>number</td>
<td>3</td>
</tr>
<tr>
<td><code class="prettyprint">bankTransID</code></td>
<td>BankTransactionID assigned to the transaction</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><code class="prettyprint">shopTransID</code></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callSettleS2SResponse</span> <span class="na">xmlns=</span><span class="s">"https://ecomms2s.sella.it/"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;callSettleS2SResult&gt;</span>
        <span class="nt">&lt;GestPayS2S&gt;</span>
            <span class="nt">&lt;TransactionType&gt;</span>Settle<span class="nt">&lt;/TransactionType&gt;</span>
            <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
            <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-00142<span class="nt">&lt;/ShopTransactionID&gt;</span>
            <span class="nt">&lt;BankTransactionID&gt;</span>159247522<span class="nt">&lt;/BankTransactionID&gt;</span>
            <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
            <span class="nt">&lt;ErrorDescription&gt;</span>Transazione correttamente effettuata<span class="nt">&lt;/ErrorDescription&gt;</span>
        <span class="nt">&lt;/GestPayS2S&gt;</span>
    <span class="nt">&lt;/callSettleS2SResult&gt;</span>
<span class="nt">&lt;/callSettleS2SResponse&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">CallSettleS2S</code>, the value will be <code class="prettyprint">Settle</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="calldeletes2s">CallDeleteS2S</h2>

<p>This operation deletes an authorized transaction. </p>

<p>It exists only for merchants with a M.O.T.O. configuration when a separation between the authorisation and the settlement phase is anticipated.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteS2S&gt;</span>
        <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
        <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-4838<span class="nt">&lt;/shopTransactionId&gt;</span>
        <span class="nt">&lt;bankTransactionId&gt;</span>334488931<span class="nt">&lt;/bankTransactionId&gt;</span>
<span class="nt">&lt;/callDeleteS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">bankTransactionId</code></td>
<td>ID of the transaction assigned by Gestpay</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionId</code></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteS2SResponse</span> <span class="na">xmlns=</span><span class="s">"https://ecomms2s.sella.it/"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;callDeleteS2SResult&gt;</span>
                <span class="nt">&lt;GestPayS2S&gt;</span>
                        <span class="nt">&lt;TransactionType&gt;</span>Settle<span class="nt">&lt;/TransactionType&gt;</span>
                        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
                        <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-00142<span class="nt">&lt;/ShopTransactionID&gt;</span>
                        <span class="nt">&lt;BankTransactionID&gt;</span>159247522<span class="nt">&lt;/BankTransactionID&gt;</span>
                        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
                        <span class="nt">&lt;ErrorDescription&gt;</span>Transazione ritirata<span class="nt">&lt;/ErrorDescription&gt;</span>
                <span class="nt">&lt;/GestPayS2S&gt;</span>
        <span class="nt">&lt;/callSettleS2SResult&gt;</span>
<span class="nt">&lt;/callSettleS2SResponse&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">CallDeleteS2S</code>, the value will be <code class="prettyprint">Delete</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callrefunds2s">CallRefundS2S</h2>

<p>Merchants can use this method to perform a partial or complete transaction amount refund.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callRefundS2S&gt;</span>
        <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;uicCode&gt;</span>242<span class="nt">&lt;/uicCode&gt;</span><span class="c">&lt;!-- Euro --&gt;</span>
    <span class="nt">&lt;amount&gt;</span>55.00<span class="nt">&lt;/amount&gt;</span>
    <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-00142<span class="nt">&lt;/shopTransactionId&gt;</span>
    <span class="nt">&lt;bankTransactionId&gt;</span>159247522<span class="nt">&lt;/bankTransactionId&gt;</span>
<span class="nt">&lt;/callRefundS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">bankTransactionId</code></td>
<td>ID of the transaction assigned by Gestpay</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionId</code></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>the amount to refund</td>
<td>number</td>
<td>9</td>
</tr>
<tr>
<td><code class="prettyprint">uicCode</code></td>
<td><a href="#currency-codes">currency code</a></td>
<td>numeric</td>
<td>3</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callRefundS2SResponse</span> <span class="na">xmlns=</span><span class="s">"https://ecomms2s.sella.it/"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;callRefundS2SResult&gt;</span>
                <span class="nt">&lt;GestPayS2S&gt;</span>
                        <span class="nt">&lt;TransactionType&gt;</span>Refund<span class="nt">&lt;/TransactionType&gt;</span>
                        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
                        <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-00142<span class="nt">&lt;/ShopTransactionID&gt;</span>
                        <span class="nt">&lt;BankTransactionID&gt;</span>159247522<span class="nt">&lt;/BankTransactionID&gt;</span>
                        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
                        <span class="nt">&lt;ErrorDescription/&gt;</span>
                <span class="nt">&lt;/GestPayS2S&gt;</span>
        <span class="nt">&lt;/callRefundS2SResult&gt;</span>
<span class="nt">&lt;/callRefundS2SResponse&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">CallRefundS2S</code>, the value will be <code class="prettyprint">Refund</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callreadtrxs2s"> CallReadTrxS2S</h2>

<p>This method will return transaction status. </p>

<p>This method can be called with a mandatory <code class="prettyprint">shopLogin</code>, then it&rsquo;s possible to pass <code class="prettyprint">shopTransactionID</code> or <code class="prettyprint">bankTransactionID</code> or both. If only <code class="prettyprint">shopLogin</code> and <code class="prettyprint">shopTransactionID</code> are passed, it’s mandatory that the last one is unique.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Example request: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callReadTrxS2S&gt;</span>
    <span class="nt">&lt;shopLogin&gt;</span>9000001<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;shopTransactionId&gt;</span>MYSHOP-4838<span class="nt">&lt;/shopTransactionId&gt;</span>
    <span class="nt">&lt;bankTransactionId&gt;</span>334488931<span class="nt">&lt;/bankTransactionId&gt;</span>
<span class="nt">&lt;/callReadTrxS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">bankTransactionId</code></td>
<td>ID of the transaction assigned by Gestpay</td>
<td>number</td>
<td>18</td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionId</code></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example. Here the transaction is cancelled. </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callReadTrxS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>QUERYTX<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;TransactionState&gt;</span>CAN<span class="nt">&lt;/TransactionState&gt;</span>
    <span class="nt">&lt;ShopTransactionID&gt;</span>MYSHOP-4838<span class="nt">&lt;/ShopTransactionID&gt;</span>
    <span class="nt">&lt;BankTransactionID&gt;</span>334488931<span class="nt">&lt;/BankTransactionID&gt;</span>
    <span class="nt">&lt;AuthorizationCode&gt;</span>971773<span class="nt">&lt;/AuthorizationCode&gt;</span>
    <span class="nt">&lt;Currency&gt;</span>242<span class="nt">&lt;/Currency&gt;</span>
    <span class="nt">&lt;Country&gt;</span>ITALIA<span class="nt">&lt;/Country&gt;</span>
    <span class="nt">&lt;Company&gt;</span>MASTERCARD SECURECODE<span class="nt">&lt;/Company&gt;</span>
    <span class="nt">&lt;TDLevel&gt;</span>FULL<span class="nt">&lt;/TDLevel&gt;</span>
    <span class="nt">&lt;Events&gt;</span>
      <span class="nt">&lt;event&gt;</span>
        <span class="nt">&lt;eventtype&gt;</span>AUT<span class="nt">&lt;/eventtype&gt;</span>
        <span class="nt">&lt;eventamount&gt;</span>0.10<span class="nt">&lt;/eventamount&gt;</span>
        <span class="nt">&lt;eventdate&gt;</span>19/08/16 16:13:14<span class="nt">&lt;/eventdate&gt;</span>
      <span class="nt">&lt;/event&gt;</span>
      <span class="nt">&lt;event&gt;</span>
        <span class="nt">&lt;eventtype&gt;</span>CAN<span class="nt">&lt;/eventtype&gt;</span>
        <span class="nt">&lt;eventamount&gt;</span>0.10<span class="nt">&lt;/eventamount&gt;</span>
        <span class="nt">&lt;eventdate&gt;</span>20/08/16 00:13:57<span class="nt">&lt;/eventdate&gt;</span>
      <span class="nt">&lt;/event&gt;</span>
    <span class="nt">&lt;/Events&gt;</span>
    <span class="nt">&lt;Buyer&gt;</span>
      <span class="nt">&lt;BuyerName/&gt;</span>
      <span class="nt">&lt;BuyerEmail/&gt;</span>
    <span class="nt">&lt;/Buyer&gt;</span>
    <span class="nt">&lt;RISK&gt;</span>
      <span class="nt">&lt;RiskResponseCode/&gt;</span>
      <span class="nt">&lt;RiskResponseDescription/&gt;</span>
    <span class="nt">&lt;/RISK&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription&gt;</span>Transaction correctly processed<span class="nt">&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;AlertCode/&gt;</span>
    <span class="nt">&lt;AlertDescription/&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callReadTrxS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint"> CallReadTrxS2S</code>, the value will be <code class="prettyprint">QUERYTX</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">BankTransactionID</code></td>
<td>Bank transaction ID assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ShopTransactionID</code></td>
<td>Shop transaction ID value assigned to the transaction</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCode</code></td>
<td>the authorisation code</td>
</tr>
<tr>
<td><code class="prettyprint">Currency</code></td>
<td>the <a href="#currency-codes">currency code</a></td>
</tr>
<tr>
<td><code class="prettyprint">Country</code></td>
<td>the nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">Company</code></td>
<td>the card company: Visa, Mastercard, etc.</td>
</tr>
<tr>
<td><code class="prettyprint">TransactionState</code></td>
<td>the status of the transaction: one of <code class="prettyprint">AUT</code>, <code class="prettyprint">MOV</code>, <code class="prettyprint">CAN</code>, <code class="prettyprint">REQ</code>, <code class="prettyprint">STO</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">AlertCode</code></td>
<td>the violation code of the risk management criteria</td>
</tr>
<tr>
<td><code class="prettyprint">AlertDescription</code></td>
<td>the description connected to the <code class="prettyprint">AlertCode</code> value</td>
</tr>
<tr>
<td><code class="prettyprint">TransKey</code></td>
<td>Returns transaction ID value for 3D-Secure transactions</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BayerName</code></td>
<td>Returns the name of the buyer</td>
</tr>
<tr>
<td><code class="prettyprint">Buyer.BuyerEmail</code></td>
<td>Returns the email of the buyer</td>
</tr>
<tr>
<td><code class="prettyprint">Events</code></td>
<td>contains <code class="prettyprint">event</code> elements. see the next table for more.</td>
</tr>
</tbody></table>

<p>As said, <code class="prettyprint">&lt;Events&gt;</code> can contain one or more <code class="prettyprint">&lt;event&gt;</code> tags. the <code class="prettyprint">&lt;event&gt;</code> tag is composed of: </p>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">eventtype</code></td>
<td>one of <code class="prettyprint">AUT</code>, <code class="prettyprint">MOV</code>, <code class="prettyprint">PRE</code>, <code class="prettyprint">CAN</code>, <code class="prettyprint">REQ</code>, <code class="prettyprint">STO</code>. There will be a node event for each existing event regarding the transaction.</td>
</tr>
<tr>
<td><code class="prettyprint">eventamount</code></td>
<td>Relative value of the event</td>
</tr>
<tr>
<td><code class="prettyprint">eventdate</code></td>
<td>event date</td>
</tr>
</tbody></table>

          <h2 id="callverifycards2s">CallVerifycardS2S</h2>

<p>Merchants can use this method to check the Credit Card. </p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callVerifycardS2S&gt;</span>
        <span class="nt">&lt;shopLogin&gt;</span>GEST13578<span class="nt">&lt;/shopLogin&gt;</span>
        <span class="nt">&lt;shopTransactionId&gt;</span>MY-SHOP1234<span class="nt">&lt;/shopTransactionId&gt;</span>
        <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
        <span class="nt">&lt;expMonth&gt;</span>12<span class="nt">&lt;/expMonth&gt;</span>
        <span class="nt">&lt;expYear&gt;</span>21<span class="nt">&lt;/expYear&gt;</span>
        <span class="nt">&lt;CVV2&gt;</span>931<span class="nt">&lt;/CVV2&gt;</span>
<span class="nt">&lt;/callVerifycardS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionId</code></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">cardNumber</code></td>
<td>credit card number</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><code class="prettyprint">expMonth</code></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">expYear</code></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">CVV2</code></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callVerifycardS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>VerCard<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
        <span class="nt">&lt;Country&gt;</span>Italia<span class="nt">&lt;/Country&gt;</span>
        <span class="nt">&lt;Company&gt;</span>MasterCard<span class="nt">&lt;/Company&gt;</span>
        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
        <span class="nt">&lt;ErrorDescription&gt;&lt;/ErrorDescription&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callVerifycardS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>TransactionType</td>
<td><code class="prettyprint">VerCard</code></td>
</tr>
<tr>
<td>TransactionRsult</td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td>ErrorCode</td>
<td>error code</td>
</tr>
<tr>
<td>ErrorDescription</td>
<td>error description</td>
</tr>
<tr>
<td>Country</td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td>Company</td>
<td>card company</td>
</tr>
</tbody></table>

          <h2 id="callcheckcartas2s">callCheckCartaS2S</h2>

<p>Merchants can use this method to check the Credit Card. </p>

<p>It&rsquo;s possible to check with or without verifying the Authorization, setting the flag <code class="prettyprint">withAuth</code>.</p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callCheckCartaS2S&gt;</span>
        <span class="nt">&lt;shopLogin&gt;</span>GEST13578<span class="nt">&lt;/shopLogin&gt;</span>
        <span class="nt">&lt;shopTransactionId&gt;</span>MY-SHOP1234<span class="nt">&lt;/shopTransactionId&gt;</span>
        <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
        <span class="nt">&lt;expMonth&gt;</span>12<span class="nt">&lt;/expMonth&gt;</span>
        <span class="nt">&lt;expYear&gt;</span>21<span class="nt">&lt;/expYear&gt;</span>
        <span class="nt">&lt;CVV2&gt;</span>931<span class="nt">&lt;/CVV2&gt;</span>
        <span class="nt">&lt;withAuth&gt;</span>Y<span class="nt">&lt;/withAuth&gt;</span>
<span class="nt">&lt;/callCheckCartaS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">shopTransactionId</code></td>
<td>shop transaction ID value</td>
<td>string</td>
<td>50</td>
</tr>
<tr>
<td><code class="prettyprint">cardNumber</code></td>
<td>credit card number</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><code class="prettyprint">expMonth</code></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">expYear</code></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">CVV2</code></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
<tr>
<td><code class="prettyprint">withAuth</code></td>
<td>tries to authorize the card. <br> <code class="prettyprint">Y</code> on <code class="prettyprint">N</code></td>
<td>string</td>
<td>1</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callCheckCartaS2SResult&gt;</span>
        <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;TransactionType&gt;</span>CHECKCARD<span class="nt">&lt;/TransactionType&gt;</span>
            <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
            <span class="nt">&lt;TransactionErrorCode&gt;</span>0<span class="nt">&lt;/TransactionErrorCode&gt;</span>
            <span class="nt">&lt;TransactionErrorDescription&gt;</span>Transaction correctly processed<span class="nt">&lt;/TransactionErrorDescription&gt;</span>
            <span class="nt">&lt;AuthorizationErrorCode&gt;</span>0<span class="nt">&lt;/AuthorizationErrorCode&gt;</span>
            <span class="nt">&lt;AuthorizationResult&gt;</span>KO<span class="nt">&lt;/AuthorizationResult&gt;</span>
            <span class="nt">&lt;AuthorizationCodeDescription&gt;</span>negative balance<span class="nt">&lt;/AuthorizationCodeDescription&gt;</span>
            <span class="nt">&lt;CardCountry&gt;</span>ITALIA<span class="nt">&lt;/CardCountry&gt;</span>
            <span class="nt">&lt;CardCountryCode&gt;</span>380<span class="nt">&lt;/CardCountryCode&gt;</span>
            <span class="nt">&lt;CheckCVV&gt;</span>OK<span class="nt">&lt;/CheckCVV&gt;</span>
            <span class="nt">&lt;CheckCVVDescription&gt;</span>CVV VALID<span class="nt">&lt;/CheckCVVDescription&gt;</span>
            <span class="nt">&lt;IssuerCountry&gt;</span>ITALIA<span class="nt">&lt;/IssuerCountry&gt;</span>
            <span class="nt">&lt;IssuerCountryCode&gt;</span>380<span class="nt">&lt;/IssuerCountryCode&gt;</span>
            <span class="nt">&lt;CompanyDescription&gt;</span>MASTERCARD<span class="nt">&lt;/CompanyDescription&gt;</span>
            <span class="nt">&lt;CompanyCode&gt;</span>3<span class="nt">&lt;/CompanyCode&gt;</span>
            <span class="nt">&lt;Commercial&gt;</span>N<span class="nt">&lt;/Commercial&gt;</span>
            <span class="nt">&lt;ProductDescription&gt;</span>Standard MasterCard® Card<span class="nt">&lt;/ProductDescription&gt;</span>
            <span class="nt">&lt;ProductType&gt;</span>Credit<span class="nt">&lt;/ProductType&gt;</span>
            <span class="nt">&lt;CheckDigit&gt;</span>OK<span class="nt">&lt;/CheckDigit&gt;</span>
            <span class="nt">&lt;CheckDigitDescription&gt;</span>CheckDigit VALID<span class="nt">&lt;/CheckDigitDescription&gt;</span>
            <span class="nt">&lt;CheckDate&gt;</span>OK<span class="nt">&lt;/CheckDate&gt;</span>
            <span class="nt">&lt;CheckDateDescription&gt;</span>DATE VALID<span class="nt">&lt;/CheckDateDescription&gt;</span>
            <span class="nt">&lt;EnrolledCode&gt;</span>Y<span class="nt">&lt;/EnrolledCode&gt;</span>
            <span class="nt">&lt;EnrolledDescription&gt;</span>ENROLLED<span class="nt">&lt;/EnrolledDescription&gt;</span>
            <span class="nt">&lt;Prepaid/&gt;</span>
        <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callCheckCartaS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">CHECKCARD</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionRsult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationErrorCode</code></td>
<td>authorisation error code if an error occurred</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationResult</code></td>
<td>authorization result</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCodeDescription</code></td>
<td>code description</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountry</code></td>
<td>nationality of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountryCode</code></td>
<td>nationality code of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVV</code></td>
<td>result of the check CVV</td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVVDescription</code></td>
<td>description of CVV check results</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountry</code></td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountryCode</code></td>
<td>nationality code of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyDescription</code></td>
<td>Description of the Card company</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyCode</code></td>
<td>Code of the Company</td>
</tr>
<tr>
<td><code class="prettyprint">Commercial</code></td>
<td>Flag that indicates if the Card is commercial or not. <code class="prettyprint">Y</code> or <code class="prettyprint">N</code></td>
</tr>
<tr>
<td><code class="prettyprint">ProductDescription</code></td>
<td>Description of the product linked to the card</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td>type of the product: <code class="prettyprint">Credit</code> or <code class="prettyprint">Debit</code></td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigit</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check digit of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigitDescription</code></td>
<td>description of the check digit response</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDate</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check date of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDateDescription</code></td>
<td>description of the check date response</td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledCode</code></td>
<td>3D Secure enabled: <ul><li><code class="prettyprint">Y</code> enabled </li><li><code class="prettyprint">N</code> not enabled</li><li><code class="prettyprint">U</code> could not verify</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledDescription</code></td>
<td>enrolment description</td>
</tr>
<tr>
<td><code class="prettyprint">Prepaid</code></td>
<td>indicates if the card is prepaid of not (<code class="prettyprint">Y</code>, <code class="prettyprint">N</code>, or empty)</td>
</tr>
</tbody></table>

          <h2 id="callrequesttokens2s">CallRequestTokenS2S</h2>

<p>Merchants can use this method to request the token generation for a Credit Card. This token can be generated as Standard Format or Custom Format. Tokens created by merchants belonging to a group will be available to all the merchants of the same group.</p>

<h3 id="request-details"> Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallRequestTokenS2S&gt;</span>
    <span class="nt">&lt;shopLogin&gt;</span>GEST13578<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;requestToken&gt;</span>MASKEDPAN<span class="nt">&lt;/shopTransactionId&gt;</span>
    <span class="nt">&lt;cardNumber&gt;</span>1234567812345678<span class="nt">&lt;/cardNumber&gt;</span>
    <span class="nt">&lt;expMonth&gt;</span>12<span class="nt">&lt;/expMonth&gt;</span>
    <span class="nt">&lt;expYear&gt;</span>21<span class="nt">&lt;/expYear&gt;</span>
    <span class="nt">&lt;CVV2&gt;</span>931<span class="nt">&lt;/CVV2&gt;</span>
    <span class="nt">&lt;withAuth&gt;</span>Y<span class="nt">&lt;/withAuth&gt;</span>
<span class="nt">&lt;/callCheckCartaS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">requestToken</code></td>
<td><code class="prettyprint">MASKEDPAN</code> for a Standard Token; any other value for Custom Token</td>
<td>string</td>
<td>24</td>
</tr>
<tr>
<td><code class="prettyprint">cardNumber</code></td>
<td>credit card number</td>
<td>string</td>
<td>20</td>
</tr>
<tr>
<td><code class="prettyprint">expMonth</code></td>
<td>card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">expYear</code></td>
<td>card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">CVV2</code></td>
<td>security code of the card</td>
<td>string</td>
<td>4</td>
</tr>
<tr>
<td><code class="prettyprint">withAuth</code></td>
<td>tries to authorize the card. <br> <code class="prettyprint">Y</code> on <code class="prettyprint">N</code></td>
<td>string</td>
<td>1</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallRequestTokenS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>REQUESTTOKEN<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;TransactionErrorCode&gt;</span>0<span class="nt">&lt;/TransactionErrorCode&gt;</span>
    <span class="nt">&lt;TransactionErrorDescription&gt;</span>Transaction correctly processed<span class="nt">&lt;/TransactionErrorDescription&gt;</span>
    <span class="nt">&lt;AuthorizationErrorCode/&gt;</span>
    <span class="nt">&lt;AuthorizationResult/&gt;</span>
    <span class="nt">&lt;AuthorizationCodeDescription/&gt;</span>
    <span class="nt">&lt;CardCountry&gt;</span>POLONIA<span class="nt">&lt;/CardCountry&gt;</span>
    <span class="nt">&lt;CardCountryCode&gt;</span>616<span class="nt">&lt;/CardCountryCode&gt;</span>
    <span class="nt">&lt;CheckCVV/&gt;</span>
    <span class="nt">&lt;CheckCVVDescription/&gt;</span>
    <span class="nt">&lt;IssuerCountry&gt;</span>POLONIA<span class="nt">&lt;/IssuerCountry&gt;</span>
    <span class="nt">&lt;IssuerCountryCode&gt;</span>616<span class="nt">&lt;/IssuerCountryCode&gt;</span>
    <span class="nt">&lt;CompanyDescription&gt;</span>VISA<span class="nt">&lt;/CompanyDescription&gt;</span>
    <span class="nt">&lt;CompanyCode&gt;</span>1<span class="nt">&lt;/CompanyCode&gt;</span>
    <span class="nt">&lt;Commercial&gt;</span>N<span class="nt">&lt;/Commercial&gt;</span>
    <span class="nt">&lt;ProductDescription&gt;</span>Visa Gold<span class="nt">&lt;/ProductDescription&gt;</span>
    <span class="nt">&lt;ProductType&gt;</span>Credit<span class="nt">&lt;/ProductType&gt;</span>
    <span class="nt">&lt;CheckDigit&gt;</span>OK<span class="nt">&lt;/CheckDigit&gt;</span>
    <span class="nt">&lt;CheckDigitDescription&gt;</span>CheckDigit VALID<span class="nt">&lt;/CheckDigitDescription&gt;</span>
    <span class="nt">&lt;CheckDate&gt;</span>OK<span class="nt">&lt;/CheckDate&gt;</span>
    <span class="nt">&lt;CheckDateDescription&gt;</span>DATE VALID<span class="nt">&lt;/CheckDateDescription&gt;</span>
    <span class="nt">&lt;EnrolledCode&gt;</span>E<span class="nt">&lt;/EnrolledCode&gt;</span>
    <span class="nt">&lt;EnrolledDescription&gt;</span>CREDIT CARD UNVERIFIABLE<span class="nt">&lt;/EnrolledDescription&gt;</span>
    <span class="nt">&lt;Prepaid/&gt;</span>
    <span class="nt">&lt;CardBIN/&gt;</span>
    <span class="nt">&lt;Token&gt;</span>44MRWNA710AC4448<span class="nt">&lt;/Token&gt;</span>
    <span class="nt">&lt;TokenExpiryMonth&gt;</span>12<span class="nt">&lt;/TokenExpiryMonth&gt;</span>
    <span class="nt">&lt;TokenExpiryYear&gt;</span>16<span class="nt">&lt;/TokenExpiryYear&gt;</span>
<span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallRequestTokenS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">CHECKCARD</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionRsult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationErrorCode</code></td>
<td>authorisation error code if an error occurred</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationResult</code></td>
<td>authorization result</td>
</tr>
<tr>
<td><code class="prettyprint">AuthorizationCodeDescription</code></td>
<td>code description</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountry</code></td>
<td>nationality of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CardCountryCode</code></td>
<td>nationality code of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVV</code></td>
<td>result of the check CVV</td>
</tr>
<tr>
<td><code class="prettyprint">CheckCVVDescription</code></td>
<td>description of CVV check results</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountry</code></td>
<td>nationality of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">IssuerCountryCode</code></td>
<td>nationality code of the card issuer</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyDescription</code></td>
<td>Description of the Card company</td>
</tr>
<tr>
<td><code class="prettyprint">CompanyCode</code></td>
<td>Code of the Company</td>
</tr>
<tr>
<td><code class="prettyprint">Commercial</code></td>
<td>Flag that indicates if the Card is commercial or not. <code class="prettyprint">Y</code> or <code class="prettyprint">N</code></td>
</tr>
<tr>
<td><code class="prettyprint">ProductDescription</code></td>
<td>Description of the product linked to the card</td>
</tr>
<tr>
<td><code class="prettyprint">ProductType</code></td>
<td>type of the product: <code class="prettyprint">Credit</code> or <code class="prettyprint">Debit</code></td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigit</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check digit of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDigitDescription</code></td>
<td>description of the check digit response</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDate</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code>, acording to the check date of the card</td>
</tr>
<tr>
<td><code class="prettyprint">CheckDateDescription</code></td>
<td>description of the check date response</td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledCode</code></td>
<td>3D Secure enabled: <ul><li><code class="prettyprint">Y</code> enabled </li><li><code class="prettyprint">N</code> not enabled</li><li><code class="prettyprint">U</code> could not verify</li><li><code class="prettyprint">E</code> error: could not contact the credit card company</li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">EnrolledDescription</code></td>
<td>enrolment description</td>
</tr>
<tr>
<td><code class="prettyprint">Prepaid</code></td>
<td>indicates if the card is prepaid of not (<code class="prettyprint">Y</code>, <code class="prettyprint">N</code>, or empty)</td>
</tr>
<tr>
<td><code class="prettyprint">Token</code></td>
<td>the token value</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryMonth</code></td>
<td>the token expiry month</td>
</tr>
<tr>
<td><code class="prettyprint">TokenExpiryYear</code></td>
<td>the token expiry year</td>
</tr>
</tbody></table>

          <h2 id="calldeletetokens2s">callDeleteTokenS2S</h2>

<p>Merchants can use this method to disable a token linked to a Credit Card or to cancel a PayPal Billing Agreement. Merchants belonging to a group are allowed to delete also tokens created by other merchants of the same group.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteTokenS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;tokenValue&gt;</span>1234WJFXABCD5678<span class="nt">&lt;/tokenValue&gt;</span>
<span class="nt">&lt;/callDeleteTokenS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">tokenValue</code></td>
<td>Token value to delete</td>
<td>string</td>
<td>25</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callDeleteTokenS2SResult&gt;</span>
  <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TransactionType&gt;</span>DisableToken<span class="nt">&lt;/TransactionType&gt;</span>
    <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
    <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
    <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callDeleteTokenS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">DisableToken</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionRsult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callupdatetokens2s">callUpdateTokenS2S</h2>

<p>Merchants can use this method to update the expiry date of a token.</p>

<p>Merchants belonging to a group are allowed to update also tokens created by other merchants of the same group. If a merchant belongs to a group, can update also token created by the other group&rsquo;s merchants.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callUpdateTokenS2S&gt;</span>
    <span class="nt">&lt;shopLogin&gt;</span>90000001<span class="nt">&lt;/shopLogin&gt;</span>
    <span class="nt">&lt;tokenValue&gt;</span>1234WJFXABCD5678<span class="nt">&lt;/tokenValue&gt;</span>
    <span class="nt">&lt;expiryMonth&gt;</span>12<span class="nt">&lt;/expiryMonth&gt;</span>
    <span class="nt">&lt;expiryYear&gt;</span>21<span class="nt">&lt;/expiryYear&gt;</span>
    <span class="nt">&lt;withAut&gt;</span>Y<span class="nt">&lt;/withAut&gt;</span>
<span class="nt">&lt;/callUpdateTokenS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">tokenValue</code></td>
<td>Token value to delete</td>
<td>string</td>
<td>25</td>
</tr>
<tr>
<td><code class="prettyprint">expiryMonth</code></td>
<td>Assigns card expiration month</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">expiryYear</code></td>
<td>Assigns card expiration year</td>
<td>string</td>
<td>2</td>
</tr>
<tr>
<td><code class="prettyprint">withAut</code></td>
<td>tries also to authorize the card. <br> <code class="prettyprint">Y</code> on <code class="prettyprint">N</code></td>
<td>string</td>
<td>1</td>
</tr>
</tbody></table>

<h3 id="response-details">Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;callUpdateTokenS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>UpdateToken<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
        <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/callUpdateTokenS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code></td>
<td><code class="prettyprint">UpdateToken</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionRsult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
</tbody></table>

          <h2 id="callideallists2s"> CallIdealListS2S</h2>

<p>Merchants can use this method to have the list of the Banks available for their customers for IDeal payment method.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallIdealListS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>900000001<span class="nt">&lt;/shopLogin&gt;</span>
<span class="nt">&lt;/CallIdealListS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallIdealListS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>RequestIdealBankList<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
        <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;BankList&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            <span class="nt">&lt;BankCode&gt;</span>0001<span class="nt">&lt;/BankCode&gt;</span>
            <span class="nt">&lt;BankName&gt;</span>E-Corp<span class="nt">&lt;/BankName&gt;</span>
          <span class="nt">&lt;/Bank&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            ... 
          <span class="nt">&lt;/Bank&gt;</span>
        <span class="nt">&lt;/BankList&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallIdealListS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint"> CallIdealListS2S</code>, the value will be <code class="prettyprint">RequestIdealBankList</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankCode</code> </td>
<td>Returns Ideal Bank List, for each bank returns the Bank Code</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankName</code> </td>
<td>Returns Ideal Bank List, for each bank returns the Bank Name</td>
</tr>
</tbody></table>

          <h2 id="callmybanklists2s">CallMyBankListS2S</h2>

<p>Merchants can use this method to have the list of the Banks available for their customers for MyBank payment method.</p>

<h3 id="request-details">Request details</h3>

<blockquote>
<p>Request example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallMyBankListS2S&gt;</span>
  <span class="nt">&lt;shopLogin&gt;</span>900000001<span class="nt">&lt;/shopLogin&gt;</span>
  <span class="nt">&lt;langugeId&gt;</span>1<span class="nt">&lt;/languageId&gt;</span>
<span class="nt">&lt;/CallMyBankListS2S&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
<th>type</th>
<th>length</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">shopLogin</code></td>
<td>the merchant&rsquo;s code</td>
<td>string</td>
<td>30</td>
</tr>
<tr>
<td><code class="prettyprint">languageId</code></td>
<td>Assigns the response language of the Bank list. Values: <br><ul><li><code class="prettyprint">1</code> Italian</li><li><code class="prettyprint">2</code> English</li><li><code class="prettyprint">3</code> Spanish</li><li><code class="prettyprint">4</code> French</li><li><code class="prettyprint">5</code> German</li></ul></td>
<td>number</td>
<td>2</td>
</tr>
</tbody></table>

<h3 id="response-details"> Response details</h3>

<blockquote>
<p>Response example: </p>
</blockquote>
<pre class="highlight xml"><code><span class="nt">&lt;CallMyBankListS2SResult&gt;</span>
    <span class="nt">&lt;GestPayS2S</span> <span class="na">xmlns=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>MyBank<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransactionResult&gt;</span>OK<span class="nt">&lt;/TransactionResult&gt;</span>
        <span class="nt">&lt;ErrorCode&gt;</span>0<span class="nt">&lt;/ErrorCode&gt;</span>
        <span class="nt">&lt;ErrorDescription</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;BankList&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            <span class="nt">&lt;BankCode&gt;</span>0001<span class="nt">&lt;/BankCode&gt;</span>
            <span class="nt">&lt;BankName&gt;</span>E-Corp<span class="nt">&lt;/BankName&gt;</span>
          <span class="nt">&lt;/Bank&gt;</span>
          <span class="nt">&lt;Bank&gt;</span>
            ... 
          <span class="nt">&lt;/Bank&gt;</span>
        <span class="nt">&lt;/BankList&gt;</span>
    <span class="nt">&lt;/GestPayS2S&gt;</span>
<span class="nt">&lt;/CallMyBankListS2SResult&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>parameter name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">TransactionType</code> </td>
<td>for <code class="prettyprint">callMyBankListS2S</code>, the value will be <code class="prettyprint">MyBank</code></td>
</tr>
<tr>
<td><code class="prettyprint">TransactionResult</code></td>
<td><code class="prettyprint">OK</code> or <code class="prettyprint">KO</code></td>
</tr>
<tr>
<td><code class="prettyprint">ErrorCode</code></td>
<td>transaction error code</td>
</tr>
<tr>
<td><code class="prettyprint">ErrorDescription</code></td>
<td>transaction error description</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankCode</code> </td>
<td>Returns MyBank Bank List, for each bank returns the Bank Code</td>
</tr>
<tr>
<td><code class="prettyprint">BankList.Bank.BankName</code> </td>
<td>Returns MyBank Bank List, for each bank returns the Bank Name</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<aside class="notice">The error codes returned by GestPay are constantly updated.</aside>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>Transaction correctly processed</td>
</tr>
<tr>
<td>10</td>
<td>Payment page correctly loaded</td>
</tr>
<tr>
<td>57</td>
<td>Blocked credit card</td>
</tr>
<tr>
<td>58</td>
<td>Confirmed amount exceeds authorized amount</td>
</tr>
<tr>
<td>63</td>
<td>Demand for settlement of one nonexistent transaction</td>
</tr>
<tr>
<td>64</td>
<td>Expired preauthorization</td>
</tr>
<tr>
<td>65</td>
<td>Wrong currency</td>
</tr>
<tr>
<td>66</td>
<td>Preauthorization already notified</td>
</tr>
<tr>
<td>74</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>97</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>100</td>
<td>Transaction interrupted by bank authorizative system</td>
</tr>
<tr>
<td>150</td>
<td>Wrong merchant configuration in bank authorizative system</td>
</tr>
<tr>
<td>208</td>
<td>Wrong expiry date</td>
</tr>
<tr>
<td>212</td>
<td>Bank authorizative system not available</td>
</tr>
<tr>
<td>251</td>
<td>Insufficient credit</td>
</tr>
<tr>
<td>401</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>402</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>403</td>
<td>Technical error</td>
</tr>
<tr>
<td>404</td>
<td>Collect card</td>
</tr>
<tr>
<td>405</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>406</td>
<td>Technical error</td>
</tr>
<tr>
<td>409</td>
<td>Technical error</td>
</tr>
<tr>
<td>412</td>
<td>Technical error</td>
</tr>
<tr>
<td>413</td>
<td>Technical error</td>
</tr>
<tr>
<td>414</td>
<td>Card not recognized</td>
</tr>
<tr>
<td>415</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>416</td>
<td>Pin errato</td>
</tr>
<tr>
<td>417</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>418</td>
<td>Network not available</td>
</tr>
<tr>
<td>419</td>
<td>Wrong transaction date</td>
</tr>
<tr>
<td>420</td>
<td>Wrong card date</td>
</tr>
<tr>
<td>430</td>
<td>Technical error</td>
</tr>
<tr>
<td>431</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>433</td>
<td>Card expired</td>
</tr>
<tr>
<td>434</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>435</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>436</td>
<td>Card not qualified</td>
</tr>
<tr>
<td>437</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>438</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>950</td>
<td>Not qualified credit card</td>
</tr>
<tr>
<td>951</td>
<td>Wrong merchant configuration in bank authorizative system</td>
</tr>
<tr>
<td>998</td>
<td>Credit card with wrong check-digit</td>
</tr>
<tr>
<td>999</td>
<td>Operation not performed</td>
</tr>
<tr>
<td>1100</td>
<td>Empty parameter string</td>
</tr>
<tr>
<td>1101</td>
<td>Invalid format of parameter string</td>
</tr>
<tr>
<td>1102</td>
<td>No parameter name precedes = symbol</td>
</tr>
<tr>
<td>1103</td>
<td>Parameter string ending with a separator</td>
</tr>
<tr>
<td>1104</td>
<td>Invalid parameter name</td>
</tr>
<tr>
<td>1105</td>
<td>Invalid parameter value</td>
</tr>
<tr>
<td>1106</td>
<td>Repeated parameter name</td>
</tr>
<tr>
<td>1107</td>
<td>Unexpected parameter name. Please double check Fields and Parameters configuration in Back Office.</td>
</tr>
<tr>
<td>1108</td>
<td>Compulsory parameter not set</td>
</tr>
<tr>
<td>1109</td>
<td>Missing parameter</td>
</tr>
<tr>
<td>1110</td>
<td>Missing PAY1_UICCODE parameter</td>
</tr>
<tr>
<td>1111</td>
<td>Invalid currency code</td>
</tr>
<tr>
<td>1112</td>
<td>Missing PAY1_AMOUNT parameter</td>
</tr>
<tr>
<td>1113</td>
<td>Not numeric amount</td>
</tr>
<tr>
<td>1114</td>
<td>Amount with a wrong number of decimal digits</td>
</tr>
<tr>
<td>1115</td>
<td>Missing P A Y1_SHOPTRANSACTIONID parameter</td>
</tr>
<tr>
<td>1116</td>
<td>Too long P A Y1_SHOPTRANSACTIONID parameter</td>
</tr>
<tr>
<td>1117</td>
<td>Invalid language identifier</td>
</tr>
<tr>
<td>1118</td>
<td>Not numeric characters in credit card number</td>
</tr>
<tr>
<td>1119</td>
<td>Credit card number with wrong length</td>
</tr>
<tr>
<td>1120</td>
<td>Credit card with wrong check-digit</td>
</tr>
<tr>
<td>1121</td>
<td>Credit card belongs to a Company not enabled</td>
</tr>
<tr>
<td>1122</td>
<td>Expiry year without expiry month</td>
</tr>
<tr>
<td>1123</td>
<td>Expiry month without expiry year</td>
</tr>
<tr>
<td>1124</td>
<td>Invalid expiry month</td>
</tr>
<tr>
<td>1125</td>
<td>Invalid expiry year</td>
</tr>
<tr>
<td>1126</td>
<td>Expired expiry date</td>
</tr>
<tr>
<td>1127</td>
<td>Invalid cardholder email address</td>
</tr>
<tr>
<td>1128</td>
<td>Too long parameter string</td>
</tr>
<tr>
<td>1129</td>
<td>Too long parameter value</td>
</tr>
<tr>
<td>1130</td>
<td>Not accepted call: missing parameter A</td>
</tr>
<tr>
<td>1131</td>
<td>Not accepted call: Shop not recognized</td>
</tr>
<tr>
<td>1132</td>
<td>Not accepted call: shop is not in active state</td>
</tr>
<tr>
<td>1133</td>
<td>Not accepted call: missing parameter B</td>
</tr>
<tr>
<td>1134</td>
<td>Not accepted call: empty parameter B</td>
</tr>
<tr>
<td>1135</td>
<td>Not accepted call: other parameters beside A and B are present</td>
</tr>
<tr>
<td>1136</td>
<td>Not accepted call: transaction did not begin with a call to server-server cryptography system</td>
</tr>
<tr>
<td>1137</td>
<td>Not accepted call: transaction already processed before</td>
</tr>
<tr>
<td>1138</td>
<td>Not accepted call: card number or expiry date are missing</td>
</tr>
<tr>
<td>1139</td>
<td>Not accepted call: missing published payment page</td>
</tr>
<tr>
<td>1140</td>
<td>Transaction cancelled by buyer</td>
</tr>
<tr>
<td>1141</td>
<td>Not accepted call: input parameter string not acceptable</td>
</tr>
<tr>
<td>1142</td>
<td>Not accepted call: invalid IP Address</td>
</tr>
<tr>
<td>1143</td>
<td>Transaction abandoned by buyer</td>
</tr>
<tr>
<td>1144</td>
<td>Compulsory field not set</td>
</tr>
<tr>
<td>1145</td>
<td>Invalid OTP</td>
</tr>
<tr>
<td>1146</td>
<td>Too small amount</td>
</tr>
<tr>
<td>1147</td>
<td>Too big amount</td>
</tr>
<tr>
<td>1148</td>
<td>Invalid cardholder name</td>
</tr>
<tr>
<td>1149</td>
<td>Missing or wrong CVV2</td>
</tr>
<tr>
<td>1150</td>
<td>IPIN must be set</td>
</tr>
<tr>
<td>1151</td>
<td>Parameters error</td>
</tr>
<tr>
<td>1153</td>
<td>GestPay failed to verify if the card is enrolled to VBV service</td>
</tr>
<tr>
<td>1154</td>
<td>Not accepterd call: missing parameter TransKey</td>
</tr>
<tr>
<td>1160</td>
<td>Wrong CustomToken length</td>
</tr>
<tr>
<td>1161</td>
<td>Wrong CustomToken digits number</td>
</tr>
<tr>
<td>1162</td>
<td>CustomToken with illegal characters</td>
</tr>
<tr>
<td>1163</td>
<td>CustomToken used for another card</td>
</tr>
<tr>
<td>1164</td>
<td>Expired Token</td>
</tr>
<tr>
<td>1165</td>
<td>Token not found</td>
</tr>
<tr>
<td>1200</td>
<td>No match between ABI code and BankPass Banks</td>
</tr>
<tr>
<td>1201</td>
<td>BankPass Transaction abandoned by buyer</td>
</tr>
<tr>
<td>1202</td>
<td>BankPass - Buyer login failed</td>
</tr>
<tr>
<td>1203</td>
<td>BankPass - no payment methods available</td>
</tr>
<tr>
<td>1204</td>
<td>BankPass - technical error</td>
</tr>
<tr>
<td>1205</td>
<td>BankPass Server-Server: URL Return must be set</td>
</tr>
<tr>
<td>1206</td>
<td>BankPass Server-Server: too long URL Return (max 250 char)</td>
</tr>
<tr>
<td>1207</td>
<td>BankPass Server-Server: invalid URL Return (it must begin with http:// or https://)</td>
</tr>
<tr>
<td>1208</td>
<td>BankPass Server-Server: URL Return parameter missing</td>
</tr>
<tr>
<td>1209</td>
<td>BankPass Server-Server: IDBankPass must be set</td>
</tr>
<tr>
<td>1210</td>
<td>BankPass Server-Server: invalid IDBankPass</td>
</tr>
<tr>
<td>1300</td>
<td>Shipping Address Country Error</td>
</tr>
<tr>
<td>1301</td>
<td>Shipping Address1 Empty</td>
</tr>
<tr>
<td>1302</td>
<td>Shipping Address City Empty</td>
</tr>
<tr>
<td>1303</td>
<td>Shipping Address State Empty</td>
</tr>
<tr>
<td>1304</td>
<td>Shipping Address Postal Code Empty</td>
</tr>
<tr>
<td>1305</td>
<td>Shipping Address Country Empty</td>
</tr>
<tr>
<td>1306</td>
<td>Shipping Address Invalid City State Postal Code</td>
</tr>
<tr>
<td>1987</td>
<td>Technical error</td>
</tr>
<tr>
<td>1999</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>2000</td>
<td>Transaction exceeds maximum operations number in time period</td>
</tr>
<tr>
<td>2001</td>
<td>Transaction exceeds maximum number of operations performed by the same buyer in time period</td>
</tr>
<tr>
<td>2002</td>
<td>Transaction exceeds maximum amount in time period</td>
</tr>
<tr>
<td>2003</td>
<td>Transaction exceeds maximum amount payable by same buyer in time period</td>
</tr>
<tr>
<td>2004</td>
<td>Transaction contains a field value that had been declared not acceptable</td>
</tr>
<tr>
<td>2005</td>
<td>Buyer abandoned the transaction because it was double</td>
</tr>
<tr>
<td>2006</td>
<td>Wrong line length</td>
</tr>
<tr>
<td>2007</td>
<td>Wrong value in SHOPTRANSACTIONID field</td>
</tr>
<tr>
<td>2008</td>
<td>Wrong value in CURRENCY field</td>
</tr>
<tr>
<td>2009</td>
<td>Wrong value in AMOUNT field</td>
</tr>
<tr>
<td>2010</td>
<td>Wrong value in AUTHORIZATION DATE field</td>
</tr>
<tr>
<td>2011</td>
<td>Transaction not found</td>
</tr>
<tr>
<td>2012</td>
<td>Transaction ambiguous</td>
</tr>
<tr>
<td>2013</td>
<td>Text file contains more rows related to the same transaction</td>
</tr>
<tr>
<td>2014</td>
<td>You requested a refund operation with an amount exceeding transaction balance</td>
</tr>
<tr>
<td>2015</td>
<td>Wrong value in BANKTRANSACTIONID field</td>
</tr>
<tr>
<td>2016</td>
<td>Fields BANKTRANSACTIONID and SHOPTRANSACTIONID are empty</td>
</tr>
<tr>
<td>2017</td>
<td>Transaction can not be deleted</td>
</tr>
<tr>
<td>2018</td>
<td>Transaction can not be refunded</td>
</tr>
<tr>
<td>2019</td>
<td>Transaction can not be settled</td>
</tr>
<tr>
<td>2020</td>
<td>Transaction can not be renounced</td>
</tr>
<tr>
<td>2030</td>
<td>Due to RED configuration, transaction is sent to credit card companies, even if 3d-Secure authentication is failed</td>
</tr>
<tr>
<td>4001</td>
<td>Unexpected parameter value</td>
</tr>
<tr>
<td>4002</td>
<td>Not numeric parameter value</td>
</tr>
<tr>
<td>4100</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4101</td>
<td>Credit card number with wrong length</td>
</tr>
<tr>
<td>4102</td>
<td>Amount not available</td>
</tr>
<tr>
<td>4103</td>
<td>Technical error</td>
</tr>
<tr>
<td>4104</td>
<td>Technical error</td>
</tr>
<tr>
<td>4105</td>
<td>Technical</td>
</tr>
<tr>
<td>4106</td>
<td>Technical</td>
</tr>
<tr>
<td>4108</td>
<td>Technical error in connection with Credit Card Company network error</td>
</tr>
<tr>
<td>4109</td>
<td>Technical error</td>
</tr>
<tr>
<td>4200</td>
<td>Technical error</td>
</tr>
<tr>
<td>4201</td>
<td>Technical error</td>
</tr>
<tr>
<td>4202</td>
<td>Technical error</td>
</tr>
<tr>
<td>4203</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>4204</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4205</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4206</td>
<td>Credit card with wrong check-digit. Please double-check the credit card number typed in.</td>
</tr>
<tr>
<td>4207</td>
<td>Technical error</td>
</tr>
<tr>
<td>4208</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4209</td>
<td>Technical error</td>
</tr>
<tr>
<td>4300</td>
<td>Technical error</td>
</tr>
<tr>
<td>4301</td>
<td>Too big amount</td>
</tr>
<tr>
<td>4302</td>
<td>Technical error</td>
</tr>
<tr>
<td>4303</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4304</td>
<td>Technical error</td>
</tr>
<tr>
<td>4305</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>4306</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4307</td>
<td>Technical error</td>
</tr>
<tr>
<td>4308</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4309</td>
<td>Too big amount</td>
</tr>
<tr>
<td>4400</td>
<td>Wrong transaction date</td>
</tr>
<tr>
<td>4401</td>
<td>Wrong expiry date</td>
</tr>
<tr>
<td>4402</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>4403</td>
<td>Technical error</td>
</tr>
<tr>
<td>4404</td>
<td>Technical error</td>
</tr>
<tr>
<td>4405</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4406</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4407</td>
<td>Amount not available</td>
</tr>
<tr>
<td>4408</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4409</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4500</td>
<td>Technical error</td>
</tr>
<tr>
<td>4501</td>
<td>Technical error</td>
</tr>
<tr>
<td>4502</td>
<td>Technical error</td>
</tr>
<tr>
<td>4503</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4504</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4505</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4506</td>
<td>Technical error</td>
</tr>
<tr>
<td>4507</td>
<td>Technical error</td>
</tr>
<tr>
<td>4508</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4604</td>
<td>Technical error</td>
</tr>
<tr>
<td>4701</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>4702</td>
<td>Wrong expiry date</td>
</tr>
<tr>
<td>4703</td>
<td>Card not qualified</td>
</tr>
<tr>
<td>4704</td>
<td>Amount not available</td>
</tr>
<tr>
<td>4705</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>4706</td>
<td>Technical error in connection with Credit Card Company network</td>
</tr>
<tr>
<td>4707</td>
<td>Transaction already processed</td>
</tr>
<tr>
<td>4708</td>
<td>MyBank: communication with the buyer&rsquo;s Bank failed</td>
</tr>
<tr>
<td>4709</td>
<td>Ideal: communication with the buyer&rsquo;s Bank failed</td>
</tr>
<tr>
<td>4710</td>
<td>PayPal Error</td>
</tr>
<tr>
<td>4720</td>
<td>Rate in Rete: communication with Consel failed</td>
</tr>
<tr>
<td>4730</td>
<td>C-pay: communication with Compass failed</td>
</tr>
<tr>
<td>4731</td>
<td>Not authorized transaction by Compass</td>
</tr>
<tr>
<td>7400</td>
<td>Authorization denied</td>
</tr>
<tr>
<td>7401</td>
<td>Authorization refused by credit card companies</td>
</tr>
<tr>
<td>7402</td>
<td>Card not qualified</td>
</tr>
<tr>
<td>7403</td>
<td>Card not recognized</td>
</tr>
<tr>
<td>7404</td>
<td>Card expired</td>
</tr>
<tr>
<td>7405</td>
<td>Call credit card company</td>
</tr>
<tr>
<td>7406</td>
<td>Wrong card date</td>
</tr>
<tr>
<td>7407</td>
<td>Wrong transaction date</td>
</tr>
<tr>
<td>7408</td>
<td>System error</td>
</tr>
<tr>
<td>7409</td>
<td>Merchant not recognized</td>
</tr>
<tr>
<td>7410</td>
<td>Invalid format</td>
</tr>
<tr>
<td>7411</td>
<td>Amount not available</td>
</tr>
<tr>
<td>7412</td>
<td>Not settled</td>
</tr>
<tr>
<td>7413</td>
<td>Operation not allowed</td>
</tr>
<tr>
<td>7414</td>
<td>Network not available</td>
</tr>
<tr>
<td>7415</td>
<td>Collect card</td>
</tr>
<tr>
<td>7416</td>
<td>PIN attempts exhausted</td>
</tr>
<tr>
<td>7417</td>
<td>Blocked terminal</td>
</tr>
<tr>
<td>7418</td>
<td>Forcedly Closed terminal</td>
</tr>
<tr>
<td>7419</td>
<td>Not permitted transaction</td>
</tr>
<tr>
<td>7420</td>
<td>Not authorized transaction</td>
</tr>
<tr>
<td>7421</td>
<td>Service interrupted at 01/01/2002</td>
</tr>
<tr>
<td>7500</td>
<td>Authorization denied 7600 Authorization denied</td>
</tr>
<tr>
<td>8000</td>
<td>File correctly processed</td>
</tr>
<tr>
<td>8001</td>
<td>Header/bottom record not found</td>
</tr>
<tr>
<td>8002</td>
<td>Merchant code not set</td>
</tr>
<tr>
<td>8003</td>
<td>Incorrect row number</td>
</tr>
<tr>
<td>8004</td>
<td>Incorrect file format</td>
</tr>
<tr>
<td>8005</td>
<td>Merchant not enabled</td>
</tr>
<tr>
<td>8006</td>
<td>Verify By Visa</td>
</tr>
<tr>
<td>8007</td>
<td>Feature disabled for VISA credit card</td>
</tr>
<tr>
<td>8009</td>
<td>Payment interrupted</td>
</tr>
<tr>
<td>8010</td>
<td>Wrong credit card number for this transaction</td>
</tr>
<tr>
<td>8011</td>
<td>Transaction correctly received</td>
</tr>
<tr>
<td>8012</td>
<td>Authorization not found</td>
</tr>
<tr>
<td>8013</td>
<td>Settlement not found</td>
</tr>
<tr>
<td>8014</td>
<td>Settlement amount &gt; Authorization amount</td>
</tr>
<tr>
<td>8015</td>
<td>Refund amount &gt; balance</td>
</tr>
<tr>
<td>8016</td>
<td>Transaction without settlement</td>
</tr>
<tr>
<td>8017</td>
<td>File waiting to be processed</td>
</tr>
<tr>
<td>8018</td>
<td>File correctly processed</td>
</tr>
<tr>
<td>8021</td>
<td>Feature disable for MASTERCARD credit card</td>
</tr>
<tr>
<td>8022</td>
<td>Feature disable for JCB credit card</td>
</tr>
<tr>
<td>8023</td>
<td>Feature disabled for MAESTRO cards</td>
</tr>
<tr>
<td>8888</td>
<td>UP Mobile Payment</td>
</tr>
<tr>
<td>9991</td>
<td>Browser not supported</td>
</tr>
<tr>
<td>9992</td>
<td>Error creating iFrame</td>
</tr>
<tr>
<td>9997</td>
<td>Phase with error</td>
</tr>
<tr>
<td>9998</td>
<td>Phase correctly ended</td>
</tr>
<tr>
<td>9999</td>
<td>System Error</td>
</tr>
</tbody></table>

          <h1 id="payment-type-codes">Payment Type Codes</h1>

<table><thead>
<tr>
<th><strong>PaymentType</strong></th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code class="prettyprint">BON</code></strong></td>
<td>Money Transfer</td>
</tr>
<tr>
<td><strong><code class="prettyprint">CREDITCARD</code></strong></td>
<td>Credit Card</td>
</tr>
<tr>
<td><strong><code class="prettyprint">PAYPAL</code></strong></td>
<td>Paypal</td>
</tr>
<tr>
<td><strong><code class="prettyprint">MYBANK</code></strong></td>
<td>MyBank</td>
</tr>
<tr>
<td><strong><code class="prettyprint">UPMOBILE</code></strong></td>
<td>Mobile - QRCode</td>
</tr>
<tr>
<td><strong><code class="prettyprint">MASTERPASS</code></strong></td>
<td>MasterPass</td>
</tr>
<tr>
<td><strong><code class="prettyprint">CONSEL</code></strong></td>
<td>Consel</td>
</tr>
<tr>
<td><strong><code class="prettyprint">S2PALI</code></strong></td>
<td>Alipay (Alternatives)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">S2PKLA</code></strong></td>
<td>Klarna (Alternatives)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">S2PQIW</code></strong></td>
<td>Qiwi (Alternatives)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">S2PYAN</code></strong></td>
<td>Yandex (Alternatives)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">S2PSOF</code></strong></td>
<td>Sofort (Alternatives)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">S2PIDE</code></strong></td>
<td>Ideal (Alternatives)</td>
</tr>
<tr>
<td><strong><code class="prettyprint">COMPASS</code></strong></td>
<td>Compass C-pay</td>
</tr>
<tr>
<td><strong><code class="prettyprint">SOFORT</code></strong></td>
<td>SOFORT</td>
</tr>
<tr>
<td><strong><code class="prettyprint">IDEAL</code></strong></td>
<td>IDEAL</td>
</tr>
</tbody></table>

<p>For more informations about payment types, read <a href="https://hype-app.github.io/gestpay-doc/oth/what-does-it-really-mean-that-gestpay-is-a-payment-gateway.html">the docs</a>. </p>

          <h1 id="currency-codes">Currency Codes</h1>

<p>Currency codes are handled by GestPay using the currency attribute.</p>

<table><thead>
<tr>
<th>UIC code</th>
<th style="text-align: center">ISO code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">109</code></td>
<td style="text-align: center">AUD</td>
<td>Australia Dollar</td>
</tr>
<tr>
<td><code class="prettyprint">234</code></td>
<td style="text-align: center">BRL</td>
<td>Brazil Real</td>
</tr>
<tr>
<td><code class="prettyprint">12</code></td>
<td style="text-align: center">CAD</td>
<td>Canada Dollar</td>
</tr>
<tr>
<td><code class="prettyprint">3</code></td>
<td style="text-align: center">CHF</td>
<td>Switzerland Franc</td>
</tr>
<tr>
<td><code class="prettyprint">144</code></td>
<td style="text-align: center">CNY</td>
<td>China Yuan Renminbi</td>
</tr>
<tr>
<td><code class="prettyprint">223</code></td>
<td style="text-align: center">CZK</td>
<td>Czech Republic Koruna</td>
</tr>
<tr>
<td><code class="prettyprint">7</code></td>
<td style="text-align: center">DKK</td>
<td>Denmark Krone</td>
</tr>
<tr>
<td><code class="prettyprint">242</code></td>
<td style="text-align: center">EUR</td>
<td>Euro Member Countries</td>
</tr>
<tr>
<td><code class="prettyprint">2</code></td>
<td style="text-align: center">GBP</td>
<td>United Kingdom Pound</td>
</tr>
<tr>
<td><code class="prettyprint">103</code></td>
<td style="text-align: center">HKD</td>
<td>Hong Kong Dollar</td>
</tr>
<tr>
<td><code class="prettyprint">153</code></td>
<td style="text-align: center">HUF</td>
<td>Hungary Forint</td>
</tr>
<tr>
<td><code class="prettyprint">71</code></td>
<td style="text-align: center">JPY</td>
<td>Japan Yen</td>
</tr>
<tr>
<td><code class="prettyprint">8</code></td>
<td style="text-align: center">NOK</td>
<td>Norway Krone</td>
</tr>
<tr>
<td><code class="prettyprint">237</code></td>
<td style="text-align: center">PLN</td>
<td>Poland Zloty</td>
</tr>
<tr>
<td><code class="prettyprint">244</code></td>
<td style="text-align: center">RUB</td>
<td>Russian Ruble</td>
</tr>
<tr>
<td><code class="prettyprint">9</code></td>
<td style="text-align: center">SEK</td>
<td>Sweden Krona</td>
</tr>
<tr>
<td><code class="prettyprint">124</code></td>
<td style="text-align: center">SGD</td>
<td>Singapore Dollar</td>
</tr>
<tr>
<td><code class="prettyprint">1</code></td>
<td style="text-align: center">USD</td>
<td>United States Dollar</td>
</tr>
</tbody></table>

          <h1 id="paypal-country-codes">Paypal Country Codes</h1>

<p>You can find all the Country Codes that are supported by Paypal at <a href="https://developer.paypal.com/docs/classic/api/country_codes/">this link</a>. </p>

          <h1 id="language-codes">Language Codes</h1>

<p>The language code is handled by GestPay using the Language attribute. </p>

<table><thead>
<tr>
<th style="text-align: center">Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><code class="prettyprint">1</code></td>
<td>Italian</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">2</code></td>
<td>English</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">3</code></td>
<td>Spanish</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">4</code></td>
<td>Franch</td>
</tr>
<tr>
<td style="text-align: center"><code class="prettyprint">5</code></td>
<td>German</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="net">net</a>
          </div>
      </div>
    </div>
  </body>
</html>
